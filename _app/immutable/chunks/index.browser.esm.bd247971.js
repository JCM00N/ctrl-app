var Ya=Object.defineProperty;var Xa=(n,t,e)=>t in n?Ya(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var pe=(n,t,e)=>(Xa(n,typeof t!="symbol"?t+"":t,e),e);import{d as Ja,w as ro}from"./index.7d568148.js";import{p as Fi}from"./scheduler.eb18ca14.js";function Qa(n,t,e,r){var o,s,u=!1,w=e.length>=2,v=(I,k,A)=>{if(o=k,w&&(s=I),!u){let O=t(I,k,A);if(t.length<2)k(O);else return O}u=!1},B=Ja(n,v,r),x=!Array.isArray(n);function E(I){var k=e(I,s);x?(u=!0,n.set(k)):k.forEach((A,O)=>{u=!0,n[O].set(A)}),u=!1}var F=!1;function T(I){var k,A,O,$;if(F){$=I(Fi(B)),o($);return}var H=B.subscribe(Y=>{F?k?A=!0:k=!0:O=Y});$=I(O),F=!0,o($),H(),F=!1,A&&($=Fi(B)),k&&E($)}return{subscribe:B.subscribe,set(I){T(()=>I)},update:T}}const tc=20,Yr=ro([]),ji=ro(null),Kn=new Map,As=n=>{if(Kn.has(n))return;const t=setTimeout(()=>{Kn.delete(n),no(n)},1e3);Kn.set(n,t)},ec=n=>{const t=Kn.get(n);t&&clearTimeout(t)};function rc(n){n.id&&ec(n.id),Yr.update(t=>t.map(e=>e.id===n.id?{...e,...n}:e))}function nc(n){Yr.update(t=>[n,...t].slice(0,tc))}function ic(n){Fi(Yr).find(t=>t.id===n.id)?rc(n):nc(n)}function sc(n){Yr.update(t=>(n?As(n):t.forEach(e=>{As(e.id)}),t.map(e=>e.id===n||n===void 0?{...e,visible:!1}:e)))}function no(n){Yr.update(t=>n===void 0?[]:t.filter(e=>e.id!==n))}function l0(n){ji.set(n)}function d0(n){let t;ji.update(e=>(t=n-(e||0),null)),Yr.update(e=>e.map(r=>({...r,pauseDuration:r.pauseDuration+t})))}const oc={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function p0(n={}){return{toasts:Qa(Yr,e=>e.map(r=>{var o,s;return{...n,...n[r.type],...r,duration:r.duration||((o=n[r.type])==null?void 0:o.duration)||(n==null?void 0:n.duration)||oc[r.type],style:[n.style,(s=n[r.type])==null?void 0:s.style,r.style].join(";")}}),e=>e),pausedAt:ji}}const ac=n=>typeof n=="function",Is=(n,t)=>ac(n)?n(t):n,cc=(()=>{let n=0;return()=>(n+=1,n.toString())})(),g0=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){const t=matchMedia("(prefers-reduced-motion: reduce)");n=!t||t.matches}return n}})(),uc=(n,t="blank",e)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...e,id:(e==null?void 0:e.id)||cc()}),Tn=n=>(t,e)=>{const r=uc(t,n,e);return ic(r),r.id},Je=(n,t)=>Tn("blank")(n,t);Je.error=Tn("error");Je.success=Tn("success");Je.loading=Tn("loading");Je.custom=Tn("custom");Je.dismiss=n=>{sc(n)};Je.remove=n=>no(n);Je.promise=(n,t,e)=>{const r=Je.loading(t.loading,{...e,...e==null?void 0:e.loading});return n.then(o=>(Je.success(Is(t.success,o),{id:r,...e,...e==null?void 0:e.success}),o)).catch(o=>{Je.error(Is(t.error,o),{id:r,...e,...e==null?void 0:e.error})}),n};var le={},si={};si.byteLength=lc;si.toByteArray=pc;si.fromByteArray=yc;var Xe=[],Ne=[],fc=typeof Uint8Array<"u"?Uint8Array:Array,bi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var en=0,hc=bi.length;en<hc;++en)Xe[en]=bi[en],Ne[bi.charCodeAt(en)]=en;Ne["-".charCodeAt(0)]=62;Ne["_".charCodeAt(0)]=63;function io(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var r=e===t?0:4-e%4;return[e,r]}function lc(n){var t=io(n),e=t[0],r=t[1];return(e+r)*3/4-r}function dc(n,t,e){return(t+e)*3/4-e}function pc(n){var t,e=io(n),r=e[0],o=e[1],s=new fc(dc(n,r,o)),u=0,w=o>0?r-4:r,v;for(v=0;v<w;v+=4)t=Ne[n.charCodeAt(v)]<<18|Ne[n.charCodeAt(v+1)]<<12|Ne[n.charCodeAt(v+2)]<<6|Ne[n.charCodeAt(v+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=t&255;return o===2&&(t=Ne[n.charCodeAt(v)]<<2|Ne[n.charCodeAt(v+1)]>>4,s[u++]=t&255),o===1&&(t=Ne[n.charCodeAt(v)]<<10|Ne[n.charCodeAt(v+1)]<<4|Ne[n.charCodeAt(v+2)]>>2,s[u++]=t>>8&255,s[u++]=t&255),s}function gc(n){return Xe[n>>18&63]+Xe[n>>12&63]+Xe[n>>6&63]+Xe[n&63]}function mc(n,t,e){for(var r,o=[],s=t;s<e;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),o.push(gc(r));return o.join("")}function yc(n){for(var t,e=n.length,r=e%3,o=[],s=16383,u=0,w=e-r;u<w;u+=s)o.push(mc(n,u,u+s>w?w:u+s));return r===1?(t=n[e-1],o.push(Xe[t>>2]+Xe[t<<4&63]+"==")):r===2&&(t=(n[e-2]<<8)+n[e-1],o.push(Xe[t>>10]+Xe[t>>4&63]+Xe[t<<2&63]+"=")),o.join("")}var Zi={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Zi.read=function(n,t,e,r,o){var s,u,w=o*8-r-1,v=(1<<w)-1,B=v>>1,x=-7,E=e?o-1:0,F=e?-1:1,T=n[t+E];for(E+=F,s=T&(1<<-x)-1,T>>=-x,x+=w;x>0;s=s*256+n[t+E],E+=F,x-=8);for(u=s&(1<<-x)-1,s>>=-x,x+=r;x>0;u=u*256+n[t+E],E+=F,x-=8);if(s===0)s=1-B;else{if(s===v)return u?NaN:(T?-1:1)*(1/0);u=u+Math.pow(2,r),s=s-B}return(T?-1:1)*u*Math.pow(2,s-r)};Zi.write=function(n,t,e,r,o,s){var u,w,v,B=s*8-o-1,x=(1<<B)-1,E=x>>1,F=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=r?0:s-1,I=r?1:-1,k=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(w=isNaN(t)?1:0,u=x):(u=Math.floor(Math.log(t)/Math.LN2),t*(v=Math.pow(2,-u))<1&&(u--,v*=2),u+E>=1?t+=F/v:t+=F*Math.pow(2,1-E),t*v>=2&&(u++,v/=2),u+E>=x?(w=0,u=x):u+E>=1?(w=(t*v-1)*Math.pow(2,o),u=u+E):(w=t*Math.pow(2,E-1)*Math.pow(2,o),u=0));o>=8;n[e+T]=w&255,T+=I,w/=256,o-=8);for(u=u<<o|w,B+=o;B>0;n[e+T]=u&255,T+=I,u/=256,B-=8);n[e+T-I]|=k*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const t=si,e=Zi,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=x,n.SlowBuffer=V,n.INSPECT_MAX_BYTES=50;const o=2147483647;n.kMaxLength=o;const{Uint8Array:s,ArrayBuffer:u,SharedArrayBuffer:w}=globalThis;x.TYPED_ARRAY_SUPPORT=v(),!x.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function v(){try{const _=new s(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,s.prototype),Object.setPrototypeOf(_,h),_.foo()===42}catch{return!1}}Object.defineProperty(x.prototype,"parent",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.buffer}}),Object.defineProperty(x.prototype,"offset",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.byteOffset}});function B(_){if(_>o)throw new RangeError('The value "'+_+'" is invalid for option "size"');const h=new s(_);return Object.setPrototypeOf(h,x.prototype),h}function x(_,h,l){if(typeof _=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return I(_)}return E(_,h,l)}x.poolSize=8192;function E(_,h,l){if(typeof _=="string")return k(_,h);if(u.isView(_))return O(_);if(_==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _);if(fe(_,u)||_&&fe(_.buffer,u)||typeof w<"u"&&(fe(_,w)||_&&fe(_.buffer,w)))return $(_,h,l);if(typeof _=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const S=_.valueOf&&_.valueOf();if(S!=null&&S!==_)return x.from(S,h,l);const R=H(_);if(R)return R;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof _[Symbol.toPrimitive]=="function")return x.from(_[Symbol.toPrimitive]("string"),h,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _)}x.from=function(_,h,l){return E(_,h,l)},Object.setPrototypeOf(x.prototype,s.prototype),Object.setPrototypeOf(x,s);function F(_){if(typeof _!="number")throw new TypeError('"size" argument must be of type number');if(_<0)throw new RangeError('The value "'+_+'" is invalid for option "size"')}function T(_,h,l){return F(_),_<=0?B(_):h!==void 0?typeof l=="string"?B(_).fill(h,l):B(_).fill(h):B(_)}x.alloc=function(_,h,l){return T(_,h,l)};function I(_){return F(_),B(_<0?0:Y(_)|0)}x.allocUnsafe=function(_){return I(_)},x.allocUnsafeSlow=function(_){return I(_)};function k(_,h){if((typeof h!="string"||h==="")&&(h="utf8"),!x.isEncoding(h))throw new TypeError("Unknown encoding: "+h);const l=K(_,h)|0;let S=B(l);const R=S.write(_,h);return R!==l&&(S=S.slice(0,R)),S}function A(_){const h=_.length<0?0:Y(_.length)|0,l=B(h);for(let S=0;S<h;S+=1)l[S]=_[S]&255;return l}function O(_){if(fe(_,s)){const h=new s(_);return $(h.buffer,h.byteOffset,h.byteLength)}return A(_)}function $(_,h,l){if(h<0||_.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(_.byteLength<h+(l||0))throw new RangeError('"length" is outside of buffer bounds');let S;return h===void 0&&l===void 0?S=new s(_):l===void 0?S=new s(_,h):S=new s(_,h,l),Object.setPrototypeOf(S,x.prototype),S}function H(_){if(x.isBuffer(_)){const h=Y(_.length)|0,l=B(h);return l.length===0||_.copy(l,0,0,h),l}if(_.length!==void 0)return typeof _.length!="number"||wt(_.length)?B(0):A(_);if(_.type==="Buffer"&&Array.isArray(_.data))return A(_.data)}function Y(_){if(_>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return _|0}function V(_){return+_!=_&&(_=0),x.alloc(+_)}x.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==x.prototype},x.compare=function(h,l){if(fe(h,s)&&(h=x.from(h,h.offset,h.byteLength)),fe(l,s)&&(l=x.from(l,l.offset,l.byteLength)),!x.isBuffer(h)||!x.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===l)return 0;let S=h.length,R=l.length;for(let L=0,U=Math.min(S,R);L<U;++L)if(h[L]!==l[L]){S=h[L],R=l[L];break}return S<R?-1:R<S?1:0},x.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.concat=function(h,l){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return x.alloc(0);let S;if(l===void 0)for(l=0,S=0;S<h.length;++S)l+=h[S].length;const R=x.allocUnsafe(l);let L=0;for(S=0;S<h.length;++S){let U=h[S];if(fe(U,s))L+U.length>R.length?(x.isBuffer(U)||(U=x.from(U)),U.copy(R,L)):s.prototype.set.call(R,U,L);else if(x.isBuffer(U))U.copy(R,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=U.length}return R};function K(_,h){if(x.isBuffer(_))return _.length;if(u.isView(_)||fe(_,u))return _.byteLength;if(typeof _!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof _);const l=_.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&l===0)return 0;let R=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return bt(_).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return vt(_).length;default:if(R)return S?-1:bt(_).length;h=(""+h).toLowerCase(),R=!0}}x.byteLength=K;function J(_,h,l){let S=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,h>>>=0,l<=h))return"";for(_||(_="utf8");;)switch(_){case"hex":return a(this,h,l);case"utf8":case"utf-8":return p(this,h,l);case"ascii":return M(this,h,l);case"latin1":case"binary":return d(this,h,l);case"base64":return f(this,h,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,h,l);default:if(S)throw new TypeError("Unknown encoding: "+_);_=(_+"").toLowerCase(),S=!0}}x.prototype._isBuffer=!0;function rt(_,h,l){const S=_[h];_[h]=_[l],_[l]=S}x.prototype.swap16=function(){const h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<h;l+=2)rt(this,l,l+1);return this},x.prototype.swap32=function(){const h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<h;l+=4)rt(this,l,l+3),rt(this,l+1,l+2);return this},x.prototype.swap64=function(){const h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<h;l+=8)rt(this,l,l+7),rt(this,l+1,l+6),rt(this,l+2,l+5),rt(this,l+3,l+4);return this},x.prototype.toString=function(){const h=this.length;return h===0?"":arguments.length===0?p(this,0,h):J.apply(this,arguments)},x.prototype.toLocaleString=x.prototype.toString,x.prototype.equals=function(h){if(!x.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:x.compare(this,h)===0},x.prototype.inspect=function(){let h="";const l=n.INSPECT_MAX_BYTES;return h=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(h+=" ... "),"<Buffer "+h+">"},r&&(x.prototype[r]=x.prototype.inspect),x.prototype.compare=function(h,l,S,R,L){if(fe(h,s)&&(h=x.from(h,h.offset,h.byteLength)),!x.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(l===void 0&&(l=0),S===void 0&&(S=h?h.length:0),R===void 0&&(R=0),L===void 0&&(L=this.length),l<0||S>h.length||R<0||L>this.length)throw new RangeError("out of range index");if(R>=L&&l>=S)return 0;if(R>=L)return-1;if(l>=S)return 1;if(l>>>=0,S>>>=0,R>>>=0,L>>>=0,this===h)return 0;let U=L-R,kt=S-l;const at=Math.min(U,kt),ot=this.slice(R,L),Jt=h.slice(l,S);for(let it=0;it<at;++it)if(ot[it]!==Jt[it]){U=ot[it],kt=Jt[it];break}return U<kt?-1:kt<U?1:0};function Gt(_,h,l,S,R){if(_.length===0)return-1;if(typeof l=="string"?(S=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,wt(l)&&(l=R?0:_.length-1),l<0&&(l=_.length+l),l>=_.length){if(R)return-1;l=_.length-1}else if(l<0)if(R)l=0;else return-1;if(typeof h=="string"&&(h=x.from(h,S)),x.isBuffer(h))return h.length===0?-1:St(_,h,l,S,R);if(typeof h=="number")return h=h&255,typeof s.prototype.indexOf=="function"?R?s.prototype.indexOf.call(_,h,l):s.prototype.lastIndexOf.call(_,h,l):St(_,[h],l,S,R);throw new TypeError("val must be string, number or Buffer")}function St(_,h,l,S,R){let L=1,U=_.length,kt=h.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(_.length<2||h.length<2)return-1;L=2,U/=2,kt/=2,l/=2}function at(Jt,it){return L===1?Jt[it]:Jt.readUInt16BE(it*L)}let ot;if(R){let Jt=-1;for(ot=l;ot<U;ot++)if(at(_,ot)===at(h,Jt===-1?0:ot-Jt)){if(Jt===-1&&(Jt=ot),ot-Jt+1===kt)return Jt*L}else Jt!==-1&&(ot-=ot-Jt),Jt=-1}else for(l+kt>U&&(l=U-kt),ot=l;ot>=0;ot--){let Jt=!0;for(let it=0;it<kt;it++)if(at(_,ot+it)!==at(h,it)){Jt=!1;break}if(Jt)return ot}return-1}x.prototype.includes=function(h,l,S){return this.indexOf(h,l,S)!==-1},x.prototype.indexOf=function(h,l,S){return Gt(this,h,l,S,!0)},x.prototype.lastIndexOf=function(h,l,S){return Gt(this,h,l,S,!1)};function G(_,h,l,S){l=Number(l)||0;const R=_.length-l;S?(S=Number(S),S>R&&(S=R)):S=R;const L=h.length;S>L/2&&(S=L/2);let U;for(U=0;U<S;++U){const kt=parseInt(h.substr(U*2,2),16);if(wt(kt))return U;_[l+U]=kt}return U}function D(_,h,l,S){return gt(bt(h,_.length-l),_,l,S)}function y(_,h,l,S){return gt(Et(h),_,l,S)}function i(_,h,l,S){return gt(vt(h),_,l,S)}function c(_,h,l,S){return gt(Ze(h,_.length-l),_,l,S)}x.prototype.write=function(h,l,S,R){if(l===void 0)R="utf8",S=this.length,l=0;else if(S===void 0&&typeof l=="string")R=l,S=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(S)?(S=S>>>0,R===void 0&&(R="utf8")):(R=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const L=this.length-l;if((S===void 0||S>L)&&(S=L),h.length>0&&(S<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");R||(R="utf8");let U=!1;for(;;)switch(R){case"hex":return G(this,h,l,S);case"utf8":case"utf-8":return D(this,h,l,S);case"ascii":case"latin1":case"binary":return y(this,h,l,S);case"base64":return i(this,h,l,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c(this,h,l,S);default:if(U)throw new TypeError("Unknown encoding: "+R);R=(""+R).toLowerCase(),U=!0}},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function f(_,h,l){return h===0&&l===_.length?t.fromByteArray(_):t.fromByteArray(_.slice(h,l))}function p(_,h,l){l=Math.min(_.length,l);const S=[];let R=h;for(;R<l;){const L=_[R];let U=null,kt=L>239?4:L>223?3:L>191?2:1;if(R+kt<=l){let at,ot,Jt,it;switch(kt){case 1:L<128&&(U=L);break;case 2:at=_[R+1],(at&192)===128&&(it=(L&31)<<6|at&63,it>127&&(U=it));break;case 3:at=_[R+1],ot=_[R+2],(at&192)===128&&(ot&192)===128&&(it=(L&15)<<12|(at&63)<<6|ot&63,it>2047&&(it<55296||it>57343)&&(U=it));break;case 4:at=_[R+1],ot=_[R+2],Jt=_[R+3],(at&192)===128&&(ot&192)===128&&(Jt&192)===128&&(it=(L&15)<<18|(at&63)<<12|(ot&63)<<6|Jt&63,it>65535&&it<1114112&&(U=it))}}U===null?(U=65533,kt=1):U>65535&&(U-=65536,S.push(U>>>10&1023|55296),U=56320|U&1023),S.push(U),R+=kt}return b(S)}const g=4096;function b(_){const h=_.length;if(h<=g)return String.fromCharCode.apply(String,_);let l="",S=0;for(;S<h;)l+=String.fromCharCode.apply(String,_.slice(S,S+=g));return l}function M(_,h,l){let S="";l=Math.min(_.length,l);for(let R=h;R<l;++R)S+=String.fromCharCode(_[R]&127);return S}function d(_,h,l){let S="";l=Math.min(_.length,l);for(let R=h;R<l;++R)S+=String.fromCharCode(_[R]);return S}function a(_,h,l){const S=_.length;(!h||h<0)&&(h=0),(!l||l<0||l>S)&&(l=S);let R="";for(let L=h;L<l;++L)R+=_t[_[L]];return R}function m(_,h,l){const S=_.slice(h,l);let R="";for(let L=0;L<S.length-1;L+=2)R+=String.fromCharCode(S[L]+S[L+1]*256);return R}x.prototype.slice=function(h,l){const S=this.length;h=~~h,l=l===void 0?S:~~l,h<0?(h+=S,h<0&&(h=0)):h>S&&(h=S),l<0?(l+=S,l<0&&(l=0)):l>S&&(l=S),l<h&&(l=h);const R=this.subarray(h,l);return Object.setPrototypeOf(R,x.prototype),R};function N(_,h,l){if(_%1!==0||_<0)throw new RangeError("offset is not uint");if(_+h>l)throw new RangeError("Trying to access beyond buffer length")}x.prototype.readUintLE=x.prototype.readUIntLE=function(h,l,S){h=h>>>0,l=l>>>0,S||N(h,l,this.length);let R=this[h],L=1,U=0;for(;++U<l&&(L*=256);)R+=this[h+U]*L;return R},x.prototype.readUintBE=x.prototype.readUIntBE=function(h,l,S){h=h>>>0,l=l>>>0,S||N(h,l,this.length);let R=this[h+--l],L=1;for(;l>0&&(L*=256);)R+=this[h+--l]*L;return R},x.prototype.readUint8=x.prototype.readUInt8=function(h,l){return h=h>>>0,l||N(h,1,this.length),this[h]},x.prototype.readUint16LE=x.prototype.readUInt16LE=function(h,l){return h=h>>>0,l||N(h,2,this.length),this[h]|this[h+1]<<8},x.prototype.readUint16BE=x.prototype.readUInt16BE=function(h,l){return h=h>>>0,l||N(h,2,this.length),this[h]<<8|this[h+1]},x.prototype.readUint32LE=x.prototype.readUInt32LE=function(h,l){return h=h>>>0,l||N(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},x.prototype.readUint32BE=x.prototype.readUInt32BE=function(h,l){return h=h>>>0,l||N(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},x.prototype.readBigUInt64LE=ye(function(h){h=h>>>0,de(h,"offset");const l=this[h],S=this[h+7];(l===void 0||S===void 0)&&pt(h,this.length-8);const R=l+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,L=this[++h]+this[++h]*2**8+this[++h]*2**16+S*2**24;return BigInt(R)+(BigInt(L)<<BigInt(32))}),x.prototype.readBigUInt64BE=ye(function(h){h=h>>>0,de(h,"offset");const l=this[h],S=this[h+7];(l===void 0||S===void 0)&&pt(h,this.length-8);const R=l*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],L=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+S;return(BigInt(R)<<BigInt(32))+BigInt(L)}),x.prototype.readIntLE=function(h,l,S){h=h>>>0,l=l>>>0,S||N(h,l,this.length);let R=this[h],L=1,U=0;for(;++U<l&&(L*=256);)R+=this[h+U]*L;return L*=128,R>=L&&(R-=Math.pow(2,8*l)),R},x.prototype.readIntBE=function(h,l,S){h=h>>>0,l=l>>>0,S||N(h,l,this.length);let R=l,L=1,U=this[h+--R];for(;R>0&&(L*=256);)U+=this[h+--R]*L;return L*=128,U>=L&&(U-=Math.pow(2,8*l)),U},x.prototype.readInt8=function(h,l){return h=h>>>0,l||N(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},x.prototype.readInt16LE=function(h,l){h=h>>>0,l||N(h,2,this.length);const S=this[h]|this[h+1]<<8;return S&32768?S|4294901760:S},x.prototype.readInt16BE=function(h,l){h=h>>>0,l||N(h,2,this.length);const S=this[h+1]|this[h]<<8;return S&32768?S|4294901760:S},x.prototype.readInt32LE=function(h,l){return h=h>>>0,l||N(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},x.prototype.readInt32BE=function(h,l){return h=h>>>0,l||N(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},x.prototype.readBigInt64LE=ye(function(h){h=h>>>0,de(h,"offset");const l=this[h],S=this[h+7];(l===void 0||S===void 0)&&pt(h,this.length-8);const R=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(S<<24);return(BigInt(R)<<BigInt(32))+BigInt(l+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),x.prototype.readBigInt64BE=ye(function(h){h=h>>>0,de(h,"offset");const l=this[h],S=this[h+7];(l===void 0||S===void 0)&&pt(h,this.length-8);const R=(l<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(R)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+S)}),x.prototype.readFloatLE=function(h,l){return h=h>>>0,l||N(h,4,this.length),e.read(this,h,!0,23,4)},x.prototype.readFloatBE=function(h,l){return h=h>>>0,l||N(h,4,this.length),e.read(this,h,!1,23,4)},x.prototype.readDoubleLE=function(h,l){return h=h>>>0,l||N(h,8,this.length),e.read(this,h,!0,52,8)},x.prototype.readDoubleBE=function(h,l){return h=h>>>0,l||N(h,8,this.length),e.read(this,h,!1,52,8)};function q(_,h,l,S,R,L){if(!x.isBuffer(_))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>R||h<L)throw new RangeError('"value" argument is out of bounds');if(l+S>_.length)throw new RangeError("Index out of range")}x.prototype.writeUintLE=x.prototype.writeUIntLE=function(h,l,S,R){if(h=+h,l=l>>>0,S=S>>>0,!R){const kt=Math.pow(2,8*S)-1;q(this,h,l,S,kt,0)}let L=1,U=0;for(this[l]=h&255;++U<S&&(L*=256);)this[l+U]=h/L&255;return l+S},x.prototype.writeUintBE=x.prototype.writeUIntBE=function(h,l,S,R){if(h=+h,l=l>>>0,S=S>>>0,!R){const kt=Math.pow(2,8*S)-1;q(this,h,l,S,kt,0)}let L=S-1,U=1;for(this[l+L]=h&255;--L>=0&&(U*=256);)this[l+L]=h/U&255;return l+S},x.prototype.writeUint8=x.prototype.writeUInt8=function(h,l,S){return h=+h,l=l>>>0,S||q(this,h,l,1,255,0),this[l]=h&255,l+1},x.prototype.writeUint16LE=x.prototype.writeUInt16LE=function(h,l,S){return h=+h,l=l>>>0,S||q(this,h,l,2,65535,0),this[l]=h&255,this[l+1]=h>>>8,l+2},x.prototype.writeUint16BE=x.prototype.writeUInt16BE=function(h,l,S){return h=+h,l=l>>>0,S||q(this,h,l,2,65535,0),this[l]=h>>>8,this[l+1]=h&255,l+2},x.prototype.writeUint32LE=x.prototype.writeUInt32LE=function(h,l,S){return h=+h,l=l>>>0,S||q(this,h,l,4,4294967295,0),this[l+3]=h>>>24,this[l+2]=h>>>16,this[l+1]=h>>>8,this[l]=h&255,l+4},x.prototype.writeUint32BE=x.prototype.writeUInt32BE=function(h,l,S){return h=+h,l=l>>>0,S||q(this,h,l,4,4294967295,0),this[l]=h>>>24,this[l+1]=h>>>16,this[l+2]=h>>>8,this[l+3]=h&255,l+4};function z(_,h,l,S,R){dt(h,S,R,_,l,7);let L=Number(h&BigInt(4294967295));_[l++]=L,L=L>>8,_[l++]=L,L=L>>8,_[l++]=L,L=L>>8,_[l++]=L;let U=Number(h>>BigInt(32)&BigInt(4294967295));return _[l++]=U,U=U>>8,_[l++]=U,U=U>>8,_[l++]=U,U=U>>8,_[l++]=U,l}function nt(_,h,l,S,R){dt(h,S,R,_,l,7);let L=Number(h&BigInt(4294967295));_[l+7]=L,L=L>>8,_[l+6]=L,L=L>>8,_[l+5]=L,L=L>>8,_[l+4]=L;let U=Number(h>>BigInt(32)&BigInt(4294967295));return _[l+3]=U,U=U>>8,_[l+2]=U,U=U>>8,_[l+1]=U,U=U>>8,_[l]=U,l+8}x.prototype.writeBigUInt64LE=ye(function(h,l=0){return z(this,h,l,BigInt(0),BigInt("0xffffffffffffffff"))}),x.prototype.writeBigUInt64BE=ye(function(h,l=0){return nt(this,h,l,BigInt(0),BigInt("0xffffffffffffffff"))}),x.prototype.writeIntLE=function(h,l,S,R){if(h=+h,l=l>>>0,!R){const at=Math.pow(2,8*S-1);q(this,h,l,S,at-1,-at)}let L=0,U=1,kt=0;for(this[l]=h&255;++L<S&&(U*=256);)h<0&&kt===0&&this[l+L-1]!==0&&(kt=1),this[l+L]=(h/U>>0)-kt&255;return l+S},x.prototype.writeIntBE=function(h,l,S,R){if(h=+h,l=l>>>0,!R){const at=Math.pow(2,8*S-1);q(this,h,l,S,at-1,-at)}let L=S-1,U=1,kt=0;for(this[l+L]=h&255;--L>=0&&(U*=256);)h<0&&kt===0&&this[l+L+1]!==0&&(kt=1),this[l+L]=(h/U>>0)-kt&255;return l+S},x.prototype.writeInt8=function(h,l,S){return h=+h,l=l>>>0,S||q(this,h,l,1,127,-128),h<0&&(h=255+h+1),this[l]=h&255,l+1},x.prototype.writeInt16LE=function(h,l,S){return h=+h,l=l>>>0,S||q(this,h,l,2,32767,-32768),this[l]=h&255,this[l+1]=h>>>8,l+2},x.prototype.writeInt16BE=function(h,l,S){return h=+h,l=l>>>0,S||q(this,h,l,2,32767,-32768),this[l]=h>>>8,this[l+1]=h&255,l+2},x.prototype.writeInt32LE=function(h,l,S){return h=+h,l=l>>>0,S||q(this,h,l,4,2147483647,-2147483648),this[l]=h&255,this[l+1]=h>>>8,this[l+2]=h>>>16,this[l+3]=h>>>24,l+4},x.prototype.writeInt32BE=function(h,l,S){return h=+h,l=l>>>0,S||q(this,h,l,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[l]=h>>>24,this[l+1]=h>>>16,this[l+2]=h>>>8,this[l+3]=h&255,l+4},x.prototype.writeBigInt64LE=ye(function(h,l=0){return z(this,h,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),x.prototype.writeBigInt64BE=ye(function(h,l=0){return nt(this,h,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function X(_,h,l,S,R,L){if(l+S>_.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function Q(_,h,l,S,R){return h=+h,l=l>>>0,R||X(_,h,l,4),e.write(_,h,l,S,23,4),l+4}x.prototype.writeFloatLE=function(h,l,S){return Q(this,h,l,!0,S)},x.prototype.writeFloatBE=function(h,l,S){return Q(this,h,l,!1,S)};function Qt(_,h,l,S,R){return h=+h,l=l>>>0,R||X(_,h,l,8),e.write(_,h,l,S,52,8),l+8}x.prototype.writeDoubleLE=function(h,l,S){return Qt(this,h,l,!0,S)},x.prototype.writeDoubleBE=function(h,l,S){return Qt(this,h,l,!1,S)},x.prototype.copy=function(h,l,S,R){if(!x.isBuffer(h))throw new TypeError("argument should be a Buffer");if(S||(S=0),!R&&R!==0&&(R=this.length),l>=h.length&&(l=h.length),l||(l=0),R>0&&R<S&&(R=S),R===S||h.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("sourceEnd out of bounds");R>this.length&&(R=this.length),h.length-l<R-S&&(R=h.length-l+S);const L=R-S;return this===h&&typeof s.prototype.copyWithin=="function"?this.copyWithin(l,S,R):s.prototype.set.call(h,this.subarray(S,R),l),L},x.prototype.fill=function(h,l,S,R){if(typeof h=="string"){if(typeof l=="string"?(R=l,l=0,S=this.length):typeof S=="string"&&(R=S,S=this.length),R!==void 0&&typeof R!="string")throw new TypeError("encoding must be a string");if(typeof R=="string"&&!x.isEncoding(R))throw new TypeError("Unknown encoding: "+R);if(h.length===1){const U=h.charCodeAt(0);(R==="utf8"&&U<128||R==="latin1")&&(h=U)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(l<0||this.length<l||this.length<S)throw new RangeError("Out of range index");if(S<=l)return this;l=l>>>0,S=S===void 0?this.length:S>>>0,h||(h=0);let L;if(typeof h=="number")for(L=l;L<S;++L)this[L]=h;else{const U=x.isBuffer(h)?h:x.from(h,R),kt=U.length;if(kt===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(L=0;L<S-l;++L)this[L+l]=U[L%kt]}return this};const st={};function ct(_,h,l){st[_]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${_}]`,this.stack,delete this.name}get code(){return _}set code(R){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:R,writable:!0})}toString(){return`${this.name} [${_}]: ${this.message}`}}}ct("ERR_BUFFER_OUT_OF_BOUNDS",function(_){return _?`${_} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ct("ERR_INVALID_ARG_TYPE",function(_,h){return`The "${_}" argument must be of type number. Received type ${typeof h}`},TypeError),ct("ERR_OUT_OF_RANGE",function(_,h,l){let S=`The value of "${_}" is out of range.`,R=l;return Number.isInteger(l)&&Math.abs(l)>2**32?R=Yt(String(l)):typeof l=="bigint"&&(R=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(R=Yt(R)),R+="n"),S+=` It must be ${h}. Received ${R}`,S},RangeError);function Yt(_){let h="",l=_.length;const S=_[0]==="-"?1:0;for(;l>=S+4;l-=3)h=`_${_.slice(l-3,l)}${h}`;return`${_.slice(0,l)}${h}`}function ht(_,h,l){de(h,"offset"),(_[h]===void 0||_[h+l]===void 0)&&pt(h,_.length-(l+1))}function dt(_,h,l,S,R,L){if(_>l||_<h){const U=typeof h=="bigint"?"n":"";let kt;throw L>3?h===0||h===BigInt(0)?kt=`>= 0${U} and < 2${U} ** ${(L+1)*8}${U}`:kt=`>= -(2${U} ** ${(L+1)*8-1}${U}) and < 2 ** ${(L+1)*8-1}${U}`:kt=`>= ${h}${U} and <= ${l}${U}`,new st.ERR_OUT_OF_RANGE("value",kt,_)}ht(S,R,L)}function de(_,h){if(typeof _!="number")throw new st.ERR_INVALID_ARG_TYPE(h,"number",_)}function pt(_,h,l){throw Math.floor(_)!==_?(de(_,l),new st.ERR_OUT_OF_RANGE(l||"offset","an integer",_)):h<0?new st.ERR_BUFFER_OUT_OF_BOUNDS:new st.ERR_OUT_OF_RANGE(l||"offset",`>= ${l?1:0} and <= ${h}`,_)}const Bt=/[^+/0-9A-Za-z-_]/g;function nr(_){if(_=_.split("=")[0],_=_.trim().replace(Bt,""),_.length<2)return"";for(;_.length%4!==0;)_=_+"=";return _}function bt(_,h){h=h||1/0;let l;const S=_.length;let R=null;const L=[];for(let U=0;U<S;++U){if(l=_.charCodeAt(U),l>55295&&l<57344){if(!R){if(l>56319){(h-=3)>-1&&L.push(239,191,189);continue}else if(U+1===S){(h-=3)>-1&&L.push(239,191,189);continue}R=l;continue}if(l<56320){(h-=3)>-1&&L.push(239,191,189),R=l;continue}l=(R-55296<<10|l-56320)+65536}else R&&(h-=3)>-1&&L.push(239,191,189);if(R=null,l<128){if((h-=1)<0)break;L.push(l)}else if(l<2048){if((h-=2)<0)break;L.push(l>>6|192,l&63|128)}else if(l<65536){if((h-=3)<0)break;L.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((h-=4)<0)break;L.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return L}function Et(_){const h=[];for(let l=0;l<_.length;++l)h.push(_.charCodeAt(l)&255);return h}function Ze(_,h){let l,S,R;const L=[];for(let U=0;U<_.length&&!((h-=2)<0);++U)l=_.charCodeAt(U),S=l>>8,R=l%256,L.push(R),L.push(S);return L}function vt(_){return t.toByteArray(nr(_))}function gt(_,h,l,S){let R;for(R=0;R<S&&!(R+l>=h.length||R>=_.length);++R)h[R+l]=_[R];return R}function fe(_,h){return _ instanceof h||_!=null&&_.constructor!=null&&_.constructor.name!=null&&_.constructor.name===h.name}function wt(_){return _!==_}const _t=function(){const _="0123456789abcdef",h=new Array(256);for(let l=0;l<16;++l){const S=l*16;for(let R=0;R<16;++R)h[S+R]=_[l]+_[R]}return h}();function ye(_){return typeof BigInt>"u"?Mt:_}function Mt(){throw new Error("BigInt not supported")}})(le);const ae=le.Buffer,wc=le.Blob,bc=le.BlobOptions,$t=le.Buffer,vc=le.File,xc=le.FileOptions,_c=le.INSPECT_MAX_BYTES,Mc=le.SlowBuffer,Sc=le.TranscodeEncoding,Bc=le.atob,Ec=le.btoa,kc=le.constants,Ac=le.isAscii,Ic=le.isUtf8,Rc=le.kMaxLength,Lc=le.kStringMaxLength,Tc=le.resolveObjectURL,Cc=le.transcode,Uc=Object.freeze(Object.defineProperty({__proto__:null,Blob:wc,BlobOptions:bc,Buffer:$t,File:vc,FileOptions:xc,INSPECT_MAX_BYTES:_c,SlowBuffer:Mc,TranscodeEncoding:Sc,atob:Bc,btoa:Ec,constants:kc,default:ae,isAscii:Ac,isUtf8:Ic,kMaxLength:Rc,kStringMaxLength:Lc,resolveObjectURL:Tc,transcode:Cc},Symbol.toStringTag,{value:"Module"}));var $e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Xi(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var e=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}),e}var Ve={},yr={},ge={};Object.defineProperty(ge,"__esModule",{value:!0});ge.output=ge.exists=ge.hash=ge.bytes=ge.bool=ge.number=ge.isBytes=void 0;function Gn(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}ge.number=Gn;function so(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}ge.bool=so;function oo(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}ge.isBytes=oo;function Ji(n,...t){if(!oo(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${n.length}`)}ge.bytes=Ji;function ao(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Gn(n.outputLen),Gn(n.blockLen)}ge.hash=ao;function co(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}ge.exists=co;function uo(n,t){Ji(n);const e=t.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}ge.output=uo;const Fc={number:Gn,bool:so,bytes:Ji,hash:ao,exists:co,output:uo};ge.default=Fc;var vr={},oi={};Object.defineProperty(oi,"__esModule",{value:!0});oi.crypto=void 0;oi.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;(function(n){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(n,"__esModule",{value:!0}),n.randomBytes=n.wrapXOFConstructorWithOpts=n.wrapConstructorWithOpts=n.wrapConstructor=n.checkOpts=n.Hash=n.concatBytes=n.toBytes=n.utf8ToBytes=n.asyncLoop=n.nextTick=n.hexToBytes=n.bytesToHex=n.byteSwap32=n.byteSwapIfBE=n.byteSwap=n.isLE=n.rotl=n.rotr=n.createView=n.u32=n.u8=n.isBytes=void 0;const t=oi,e=ge;function r(D){return D instanceof Uint8Array||D!=null&&typeof D=="object"&&D.constructor.name==="Uint8Array"}n.isBytes=r;const o=D=>new Uint8Array(D.buffer,D.byteOffset,D.byteLength);n.u8=o;const s=D=>new Uint32Array(D.buffer,D.byteOffset,Math.floor(D.byteLength/4));n.u32=s;const u=D=>new DataView(D.buffer,D.byteOffset,D.byteLength);n.createView=u;const w=(D,y)=>D<<32-y|D>>>y;n.rotr=w;const v=(D,y)=>D<<y|D>>>32-y>>>0;n.rotl=v,n.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;const B=D=>D<<24&4278190080|D<<8&16711680|D>>>8&65280|D>>>24&255;n.byteSwap=B,n.byteSwapIfBE=n.isLE?D=>D:D=>(0,n.byteSwap)(D);function x(D){for(let y=0;y<D.length;y++)D[y]=(0,n.byteSwap)(D[y])}n.byteSwap32=x;const E=Array.from({length:256},(D,y)=>y.toString(16).padStart(2,"0"));function F(D){(0,e.bytes)(D);let y="";for(let i=0;i<D.length;i++)y+=E[D[i]];return y}n.bytesToHex=F;const T={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function I(D){if(D>=T._0&&D<=T._9)return D-T._0;if(D>=T._A&&D<=T._F)return D-(T._A-10);if(D>=T._a&&D<=T._f)return D-(T._a-10)}function k(D){if(typeof D!="string")throw new Error("hex string expected, got "+typeof D);const y=D.length,i=y/2;if(y%2)throw new Error("padded hex string expected, got unpadded hex of length "+y);const c=new Uint8Array(i);for(let f=0,p=0;f<i;f++,p+=2){const g=I(D.charCodeAt(p)),b=I(D.charCodeAt(p+1));if(g===void 0||b===void 0){const M=D[p]+D[p+1];throw new Error('hex string expected, got non-hex character "'+M+'" at index '+p)}c[f]=g*16+b}return c}n.hexToBytes=k;const A=async()=>{};n.nextTick=A;async function O(D,y,i){let c=Date.now();for(let f=0;f<D;f++){i(f);const p=Date.now()-c;p>=0&&p<y||(await(0,n.nextTick)(),c+=p)}}n.asyncLoop=O;function $(D){if(typeof D!="string")throw new Error(`utf8ToBytes expected string, got ${typeof D}`);return new Uint8Array(new TextEncoder().encode(D))}n.utf8ToBytes=$;function H(D){return typeof D=="string"&&(D=$(D)),(0,e.bytes)(D),D}n.toBytes=H;function Y(...D){let y=0;for(let c=0;c<D.length;c++){const f=D[c];(0,e.bytes)(f),y+=f.length}const i=new Uint8Array(y);for(let c=0,f=0;c<D.length;c++){const p=D[c];i.set(p,f),f+=p.length}return i}n.concatBytes=Y;class V{clone(){return this._cloneInto()}}n.Hash=V;const K={}.toString;function J(D,y){if(y!==void 0&&K.call(y)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(D,y)}n.checkOpts=J;function rt(D){const y=c=>D().update(H(c)).digest(),i=D();return y.outputLen=i.outputLen,y.blockLen=i.blockLen,y.create=()=>D(),y}n.wrapConstructor=rt;function Gt(D){const y=(c,f)=>D(f).update(H(c)).digest(),i=D({});return y.outputLen=i.outputLen,y.blockLen=i.blockLen,y.create=c=>D(c),y}n.wrapConstructorWithOpts=Gt;function St(D){const y=(c,f)=>D(f).update(H(c)).digest(),i=D({});return y.outputLen=i.outputLen,y.blockLen=i.blockLen,y.create=c=>D(c),y}n.wrapXOFConstructorWithOpts=St;function G(D=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(D));throw new Error("crypto.getRandomValues must be defined")}n.randomBytes=G})(vr);Object.defineProperty(yr,"__esModule",{value:!0});yr.HashMD=yr.Maj=yr.Chi=void 0;const vi=ge,Bn=vr;function Nc(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const o=BigInt(32),s=BigInt(4294967295),u=Number(e>>o&s),w=Number(e&s),v=r?4:0,B=r?0:4;n.setUint32(t+v,u,r),n.setUint32(t+B,w,r)}const Pc=(n,t,e)=>n&t^~n&e;yr.Chi=Pc;const Oc=(n,t,e)=>n&t^n&e^t&e;yr.Maj=Oc;let qc=class extends Bn.Hash{constructor(t,e,r,o){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Bn.createView)(this.buffer)}update(t){(0,vi.exists)(this);const{view:e,buffer:r,blockLen:o}=this;t=(0,Bn.toBytes)(t);const s=t.length;for(let u=0;u<s;){const w=Math.min(o-this.pos,s-u);if(w===o){const v=(0,Bn.createView)(t);for(;o<=s-u;u+=o)this.process(v,u);continue}r.set(t.subarray(u,u+w),this.pos),this.pos+=w,u+=w,this.pos===o&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,vi.exists)(this),(0,vi.output)(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:o,isLE:s}=this;let{pos:u}=this;e[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>o-u&&(this.process(r,0),u=0);for(let E=u;E<o;E++)e[E]=0;Nc(r,o-8,BigInt(this.length*8),s),this.process(r,0);const w=(0,Bn.createView)(t),v=this.outputLen;if(v%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const B=v/4,x=this.get();if(B>x.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<B;E++)w.setUint32(4*E,x[E],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:o,finished:s,destroyed:u,pos:w}=this;return t.length=o,t.pos=w,t.finished=s,t.destroyed=u,o%e&&t.buffer.set(r),t}};yr.HashMD=qc;var xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.add5L=xt.add5H=xt.add4H=xt.add4L=xt.add3H=xt.add3L=xt.add=xt.rotlBL=xt.rotlBH=xt.rotlSL=xt.rotlSH=xt.rotr32L=xt.rotr32H=xt.rotrBL=xt.rotrBH=xt.rotrSL=xt.rotrSH=xt.shrSL=xt.shrSH=xt.toBig=xt.split=xt.fromBig=void 0;const qn=BigInt(2**32-1),Ni=BigInt(32);function Qi(n,t=!1){return t?{h:Number(n&qn),l:Number(n>>Ni&qn)}:{h:Number(n>>Ni&qn)|0,l:Number(n&qn)|0}}xt.fromBig=Qi;function fo(n,t=!1){let e=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let o=0;o<n.length;o++){const{h:s,l:u}=Qi(n[o],t);[e[o],r[o]]=[s,u]}return[e,r]}xt.split=fo;const ho=(n,t)=>BigInt(n>>>0)<<Ni|BigInt(t>>>0);xt.toBig=ho;const lo=(n,t,e)=>n>>>e;xt.shrSH=lo;const po=(n,t,e)=>n<<32-e|t>>>e;xt.shrSL=po;const go=(n,t,e)=>n>>>e|t<<32-e;xt.rotrSH=go;const mo=(n,t,e)=>n<<32-e|t>>>e;xt.rotrSL=mo;const yo=(n,t,e)=>n<<64-e|t>>>e-32;xt.rotrBH=yo;const wo=(n,t,e)=>n>>>e-32|t<<64-e;xt.rotrBL=wo;const bo=(n,t)=>t;xt.rotr32H=bo;const vo=(n,t)=>n;xt.rotr32L=vo;const xo=(n,t,e)=>n<<e|t>>>32-e;xt.rotlSH=xo;const _o=(n,t,e)=>t<<e|n>>>32-e;xt.rotlSL=_o;const Mo=(n,t,e)=>t<<e-32|n>>>64-e;xt.rotlBH=Mo;const So=(n,t,e)=>n<<e-32|t>>>64-e;xt.rotlBL=So;function Bo(n,t,e,r){const o=(t>>>0)+(r>>>0);return{h:n+e+(o/2**32|0)|0,l:o|0}}xt.add=Bo;const Eo=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0);xt.add3L=Eo;const ko=(n,t,e,r)=>t+e+r+(n/2**32|0)|0;xt.add3H=ko;const Ao=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0);xt.add4L=Ao;const Io=(n,t,e,r,o)=>t+e+r+o+(n/2**32|0)|0;xt.add4H=Io;const Ro=(n,t,e,r,o)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(o>>>0);xt.add5L=Ro;const Lo=(n,t,e,r,o,s)=>t+e+r+o+s+(n/2**32|0)|0;xt.add5H=Lo;const Dc={fromBig:Qi,split:fo,toBig:ho,shrSH:lo,shrSL:po,rotrSH:go,rotrSL:mo,rotrBH:yo,rotrBL:wo,rotr32H:bo,rotr32L:vo,rotlSH:xo,rotlSL:_o,rotlBH:Mo,rotlBL:So,add:Bo,add3L:Eo,add3H:ko,add4L:Ao,add4H:Io,add5H:Lo,add5L:Ro};xt.default=Dc;Object.defineProperty(Ve,"__esModule",{value:!0});Ve.sha384=Ve.sha512_256=Ve.sha512_224=ts=Ve.sha512=Ve.SHA512=void 0;const Hc=yr,Kt=xt,ai=vr,[zc,$c]=(()=>Kt.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),fr=new Uint32Array(80),hr=new Uint32Array(80);class Cn extends Hc.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:o,Ch:s,Cl:u,Dh:w,Dl:v,Eh:B,El:x,Fh:E,Fl:F,Gh:T,Gl:I,Hh:k,Hl:A}=this;return[t,e,r,o,s,u,w,v,B,x,E,F,T,I,k,A]}set(t,e,r,o,s,u,w,v,B,x,E,F,T,I,k,A){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=o|0,this.Ch=s|0,this.Cl=u|0,this.Dh=w|0,this.Dl=v|0,this.Eh=B|0,this.El=x|0,this.Fh=E|0,this.Fl=F|0,this.Gh=T|0,this.Gl=I|0,this.Hh=k|0,this.Hl=A|0}process(t,e){for(let H=0;H<16;H++,e+=4)fr[H]=t.getUint32(e),hr[H]=t.getUint32(e+=4);for(let H=16;H<80;H++){const Y=fr[H-15]|0,V=hr[H-15]|0,K=Kt.default.rotrSH(Y,V,1)^Kt.default.rotrSH(Y,V,8)^Kt.default.shrSH(Y,V,7),J=Kt.default.rotrSL(Y,V,1)^Kt.default.rotrSL(Y,V,8)^Kt.default.shrSL(Y,V,7),rt=fr[H-2]|0,Gt=hr[H-2]|0,St=Kt.default.rotrSH(rt,Gt,19)^Kt.default.rotrBH(rt,Gt,61)^Kt.default.shrSH(rt,Gt,6),G=Kt.default.rotrSL(rt,Gt,19)^Kt.default.rotrBL(rt,Gt,61)^Kt.default.shrSL(rt,Gt,6),D=Kt.default.add4L(J,G,hr[H-7],hr[H-16]),y=Kt.default.add4H(D,K,St,fr[H-7],fr[H-16]);fr[H]=y|0,hr[H]=D|0}let{Ah:r,Al:o,Bh:s,Bl:u,Ch:w,Cl:v,Dh:B,Dl:x,Eh:E,El:F,Fh:T,Fl:I,Gh:k,Gl:A,Hh:O,Hl:$}=this;for(let H=0;H<80;H++){const Y=Kt.default.rotrSH(E,F,14)^Kt.default.rotrSH(E,F,18)^Kt.default.rotrBH(E,F,41),V=Kt.default.rotrSL(E,F,14)^Kt.default.rotrSL(E,F,18)^Kt.default.rotrBL(E,F,41),K=E&T^~E&k,J=F&I^~F&A,rt=Kt.default.add5L($,V,J,$c[H],hr[H]),Gt=Kt.default.add5H(rt,O,Y,K,zc[H],fr[H]),St=rt|0,G=Kt.default.rotrSH(r,o,28)^Kt.default.rotrBH(r,o,34)^Kt.default.rotrBH(r,o,39),D=Kt.default.rotrSL(r,o,28)^Kt.default.rotrBL(r,o,34)^Kt.default.rotrBL(r,o,39),y=r&s^r&w^s&w,i=o&u^o&v^u&v;O=k|0,$=A|0,k=T|0,A=I|0,T=E|0,I=F|0,{h:E,l:F}=Kt.default.add(B|0,x|0,Gt|0,St|0),B=w|0,x=v|0,w=s|0,v=u|0,s=r|0,u=o|0;const c=Kt.default.add3L(St,D,i);r=Kt.default.add3H(c,Gt,G,y),o=c|0}({h:r,l:o}=Kt.default.add(this.Ah|0,this.Al|0,r|0,o|0)),{h:s,l:u}=Kt.default.add(this.Bh|0,this.Bl|0,s|0,u|0),{h:w,l:v}=Kt.default.add(this.Ch|0,this.Cl|0,w|0,v|0),{h:B,l:x}=Kt.default.add(this.Dh|0,this.Dl|0,B|0,x|0),{h:E,l:F}=Kt.default.add(this.Eh|0,this.El|0,E|0,F|0),{h:T,l:I}=Kt.default.add(this.Fh|0,this.Fl|0,T|0,I|0),{h:k,l:A}=Kt.default.add(this.Gh|0,this.Gl|0,k|0,A|0),{h:O,l:$}=Kt.default.add(this.Hh|0,this.Hl|0,O|0,$|0),this.set(r,o,s,u,w,v,B,x,E,F,T,I,k,A,O,$)}roundClean(){fr.fill(0),hr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Ve.SHA512=Cn;class Kc extends Cn{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Wc extends Cn{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Vc extends Cn{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}var ts=Ve.sha512=(0,ai.wrapConstructor)(()=>new Cn);Ve.sha512_224=(0,ai.wrapConstructor)(()=>new Kc);Ve.sha512_256=(0,ai.wrapConstructor)(()=>new Wc);Ve.sha384=(0,ai.wrapConstructor)(()=>new Vc);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const To=BigInt(0),ci=BigInt(1),Gc=BigInt(2);function Gr(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function Un(n){if(!Gr(n))throw new Error("Uint8Array expected")}const jc=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function jr(n){Un(n);let t="";for(let e=0;e<n.length;e++)t+=jc[n[e]];return t}function Co(n){const t=n.toString(16);return t.length&1?`0${t}`:t}function es(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}const ir={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Rs(n){if(n>=ir._0&&n<=ir._9)return n-ir._0;if(n>=ir._A&&n<=ir._F)return n-(ir._A-10);if(n>=ir._a&&n<=ir._f)return n-(ir._a-10)}function cn(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const t=n.length,e=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let o=0,s=0;o<e;o++,s+=2){const u=Rs(n.charCodeAt(s)),w=Rs(n.charCodeAt(s+1));if(u===void 0||w===void 0){const v=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+v+'" at index '+s)}r[o]=u*16+w}return r}function Wr(n){return es(jr(n))}function on(n){return Un(n),es(jr(Uint8Array.from(n).reverse()))}function un(n,t){return cn(n.toString(16).padStart(t*2,"0"))}function In(n,t){return un(n,t).reverse()}function Zc(n){return cn(Co(n))}function he(n,t,e){let r;if(typeof t=="string")try{r=cn(t)}catch(s){throw new Error(`${n} must be valid hex string, got "${t}". Cause: ${s}`)}else if(Gr(t))r=Uint8Array.from(t);else throw new Error(`${n} must be hex string or Uint8Array`);const o=r.length;if(typeof e=="number"&&o!==e)throw new Error(`${n} expected ${e} bytes, got ${o}`);return r}function Zr(...n){let t=0;for(let r=0;r<n.length;r++){const o=n[r];Un(o),t+=o.length}const e=new Uint8Array(t);for(let r=0,o=0;r<n.length;r++){const s=n[r];e.set(s,o),o+=s.length}return e}function Yc(n,t){if(n.length!==t.length)return!1;let e=0;for(let r=0;r<n.length;r++)e|=n[r]^t[r];return e===0}function Xc(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Jc(n){let t;for(t=0;n>To;n>>=ci,t+=1);return t}function Qc(n,t){return n>>BigInt(t)&ci}function tu(n,t,e){return n|(e?ci:To)<<BigInt(t)}const rs=n=>(Gc<<BigInt(n-1))-ci,xi=n=>new Uint8Array(n),Ls=n=>Uint8Array.from(n);function Uo(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=xi(n),o=xi(n),s=0;const u=()=>{r.fill(1),o.fill(0),s=0},w=(...E)=>e(o,r,...E),v=(E=xi())=>{o=w(Ls([0]),E),r=w(),E.length!==0&&(o=w(Ls([1]),E),r=w())},B=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let E=0;const F=[];for(;E<t;){r=w();const T=r.slice();F.push(T),E+=r.length}return Zr(...F)};return(E,F)=>{u(),v(E);let T;for(;!(T=F(B()));)v();return u(),T}}const eu={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||Gr(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function dn(n,t,e={}){const r=(o,s,u)=>{const w=eu[s];if(typeof w!="function")throw new Error(`Invalid validator "${s}", expected function`);const v=n[o];if(!(u&&v===void 0)&&!w(v,n))throw new Error(`Invalid param ${String(o)}=${v} (${typeof v}), expected ${s}`)};for(const[o,s]of Object.entries(t))r(o,s,!1);for(const[o,s]of Object.entries(e))r(o,s,!0);return n}const ru=Object.freeze(Object.defineProperty({__proto__:null,abytes:Un,bitGet:Qc,bitLen:Jc,bitMask:rs,bitSet:tu,bytesToHex:jr,bytesToNumberBE:Wr,bytesToNumberLE:on,concatBytes:Zr,createHmacDrbg:Uo,ensureBytes:he,equalBytes:Yc,hexToBytes:cn,hexToNumber:es,isBytes:Gr,numberToBytesBE:un,numberToBytesLE:In,numberToHexUnpadded:Co,numberToVarBytesBE:Zc,utf8ToBytes:Xc,validateObject:dn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const me=BigInt(0),ne=BigInt(1),Hr=BigInt(2),nu=BigInt(3),Pi=BigInt(4),Ts=BigInt(5),Cs=BigInt(8);BigInt(9);BigInt(16);function ee(n,t){const e=n%t;return e>=me?e:t+e}function iu(n,t,e){if(e<=me||t<me)throw new Error("Expected power/modulo > 0");if(e===ne)return me;let r=ne;for(;t>me;)t&ne&&(r=r*n%e),n=n*n%e,t>>=ne;return r}function ie(n,t,e){let r=n;for(;t-- >me;)r*=r,r%=e;return r}function Oi(n,t){if(n===me||t<=me)throw new Error(`invert: expected positive integers, got n=${n} mod=${t}`);let e=ee(n,t),r=t,o=me,s=ne;for(;e!==me;){const w=r/e,v=r%e,B=o-s*w;r=e,e=v,o=s,s=B}if(r!==ne)throw new Error("invert: does not exist");return ee(o,t)}function su(n){const t=(n-ne)/Hr;let e,r,o;for(e=n-ne,r=0;e%Hr===me;e/=Hr,r++);for(o=Hr;o<n&&iu(o,t,n)!==n-ne;o++);if(r===1){const u=(n+ne)/Pi;return function(v,B){const x=v.pow(B,u);if(!v.eql(v.sqr(x),B))throw new Error("Cannot find square root");return x}}const s=(e+ne)/Hr;return function(w,v){if(w.pow(v,t)===w.neg(w.ONE))throw new Error("Cannot find square root");let B=r,x=w.pow(w.mul(w.ONE,o),e),E=w.pow(v,s),F=w.pow(v,e);for(;!w.eql(F,w.ONE);){if(w.eql(F,w.ZERO))return w.ZERO;let T=1;for(let k=w.sqr(F);T<B&&!w.eql(k,w.ONE);T++)k=w.sqr(k);const I=w.pow(x,ne<<BigInt(B-T-1));x=w.sqr(I),E=w.mul(E,I),F=w.mul(F,x),B=T}return E}}function ou(n){if(n%Pi===nu){const t=(n+ne)/Pi;return function(r,o){const s=r.pow(o,t);if(!r.eql(r.sqr(s),o))throw new Error("Cannot find square root");return s}}if(n%Cs===Ts){const t=(n-Ts)/Cs;return function(r,o){const s=r.mul(o,Hr),u=r.pow(s,t),w=r.mul(o,u),v=r.mul(r.mul(w,Hr),u),B=r.mul(w,r.sub(v,r.ONE));if(!r.eql(r.sqr(B),o))throw new Error("Cannot find square root");return B}}return su(n)}const au=(n,t)=>(ee(n,t)&ne)===ne,cu=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function uu(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=cu.reduce((r,o)=>(r[o]="function",r),t);return dn(n,e)}function fu(n,t,e){if(e<me)throw new Error("Expected power > 0");if(e===me)return n.ONE;if(e===ne)return t;let r=n.ONE,o=t;for(;e>me;)e&ne&&(r=n.mul(r,o)),o=n.sqr(o),e>>=ne;return r}function hu(n,t){const e=new Array(t.length),r=t.reduce((s,u,w)=>n.is0(u)?s:(e[w]=s,n.mul(s,u)),n.ONE),o=n.inv(r);return t.reduceRight((s,u,w)=>n.is0(u)?s:(e[w]=n.mul(s,e[w]),n.mul(s,u)),o),e}function Fo(n,t){const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function No(n,t,e=!1,r={}){if(n<=me)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:o,nByteLength:s}=Fo(n,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const u=ou(n),w=Object.freeze({ORDER:n,BITS:o,BYTES:s,MASK:rs(o),ZERO:me,ONE:ne,create:v=>ee(v,n),isValid:v=>{if(typeof v!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof v}`);return me<=v&&v<n},is0:v=>v===me,isOdd:v=>(v&ne)===ne,neg:v=>ee(-v,n),eql:(v,B)=>v===B,sqr:v=>ee(v*v,n),add:(v,B)=>ee(v+B,n),sub:(v,B)=>ee(v-B,n),mul:(v,B)=>ee(v*B,n),pow:(v,B)=>fu(w,v,B),div:(v,B)=>ee(v*Oi(B,n),n),sqrN:v=>v*v,addN:(v,B)=>v+B,subN:(v,B)=>v-B,mulN:(v,B)=>v*B,inv:v=>Oi(v,n),sqrt:r.sqrt||(v=>u(w,v)),invertBatch:v=>hu(w,v),cmov:(v,B,x)=>x?B:v,toBytes:v=>e?In(v,s):un(v,s),fromBytes:v=>{if(v.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${v.length}`);return e?on(v):Wr(v)}});return Object.freeze(w)}function lu(n,t){if(!n.isOdd)throw new Error("Field doesn't have isOdd");const e=n.sqrt(t);return n.isOdd(e)?n.neg(e):e}function Po(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function Oo(n){const t=Po(n);return t+Math.ceil(t/2)}function du(n,t,e=!1){const r=n.length,o=Po(t),s=Oo(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const u=e?Wr(n):on(n),w=ee(u,t-ne)+ne;return e?In(w,o):un(w,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pu=BigInt(0),_i=BigInt(1);function qo(n,t){const e=(o,s)=>{const u=s.negate();return o?u:s},r=o=>{const s=Math.ceil(t/o)+1,u=2**(o-1);return{windows:s,windowSize:u}};return{constTimeNegate:e,unsafeLadder(o,s){let u=n.ZERO,w=o;for(;s>pu;)s&_i&&(u=u.add(w)),w=w.double(),s>>=_i;return u},precomputeWindow(o,s){const{windows:u,windowSize:w}=r(s),v=[];let B=o,x=B;for(let E=0;E<u;E++){x=B,v.push(x);for(let F=1;F<w;F++)x=x.add(B),v.push(x);B=x.double()}return v},wNAF(o,s,u){const{windows:w,windowSize:v}=r(o);let B=n.ZERO,x=n.BASE;const E=BigInt(2**o-1),F=2**o,T=BigInt(o);for(let I=0;I<w;I++){const k=I*v;let A=Number(u&E);u>>=T,A>v&&(A-=F,u+=_i);const O=k,$=k+Math.abs(A)-1,H=I%2!==0,Y=A<0;A===0?x=x.add(e(H,s[O])):B=B.add(e(Y,s[$]))}return{p:B,f:x}},wNAFCached(o,s,u,w){const v=o._WINDOW_SIZE||1;let B=s.get(o);return B||(B=this.precomputeWindow(o,v),v!==1&&s.set(o,w(B))),this.wNAF(v,B,u)}}}function ns(n){return uu(n.Fp),dn(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Fo(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ke=BigInt(0),Le=BigInt(1),Dn=BigInt(2),gu=BigInt(8),mu={zip215:!0};function yu(n){const t=ns(n);return dn(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function is(n){const t=yu(n),{Fp:e,n:r,prehash:o,hash:s,randomBytes:u,nByteLength:w,h:v}=t,B=Dn<<BigInt(w*8)-Le,x=e.create,E=t.uvRatio||((g,b)=>{try{return{isValid:!0,value:e.sqrt(g*e.inv(b))}}catch{return{isValid:!1,value:Ke}}}),F=t.adjustScalarBytes||(g=>g),T=t.domain||((g,b,M)=>{if(b.length||M)throw new Error("Contexts/pre-hash are not supported");return g}),I=g=>typeof g=="bigint"&&Ke<g,k=(g,b)=>I(g)&&I(b)&&g<b,A=g=>g===Ke||k(g,B);function O(g,b){if(k(g,b))return g;throw new Error(`Expected valid scalar < ${b}, got ${typeof g} ${g}`)}function $(g){return g===Ke?g:O(g,r)}const H=new Map;function Y(g){if(!(g instanceof V))throw new Error("ExtendedPoint expected")}class V{constructor(b,M,d,a){if(this.ex=b,this.ey=M,this.ez=d,this.et=a,!A(b))throw new Error("x required");if(!A(M))throw new Error("y required");if(!A(d))throw new Error("z required");if(!A(a))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(b){if(b instanceof V)throw new Error("extended point not allowed");const{x:M,y:d}=b||{};if(!A(M)||!A(d))throw new Error("invalid affine point");return new V(M,d,Le,x(M*d))}static normalizeZ(b){const M=e.invertBatch(b.map(d=>d.ez));return b.map((d,a)=>d.toAffine(M[a])).map(V.fromAffine)}_setWindowSize(b){this._WINDOW_SIZE=b,H.delete(this)}assertValidity(){const{a:b,d:M}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:d,ey:a,ez:m,et:N}=this,q=x(d*d),z=x(a*a),nt=x(m*m),X=x(nt*nt),Q=x(q*b),Qt=x(nt*x(Q+z)),st=x(X+x(M*x(q*z)));if(Qt!==st)throw new Error("bad point: equation left != right (1)");const ct=x(d*a),Yt=x(m*N);if(ct!==Yt)throw new Error("bad point: equation left != right (2)")}equals(b){Y(b);const{ex:M,ey:d,ez:a}=this,{ex:m,ey:N,ez:q}=b,z=x(M*q),nt=x(m*a),X=x(d*q),Q=x(N*a);return z===nt&&X===Q}is0(){return this.equals(V.ZERO)}negate(){return new V(x(-this.ex),this.ey,this.ez,x(-this.et))}double(){const{a:b}=t,{ex:M,ey:d,ez:a}=this,m=x(M*M),N=x(d*d),q=x(Dn*x(a*a)),z=x(b*m),nt=M+d,X=x(x(nt*nt)-m-N),Q=z+N,Qt=Q-q,st=z-N,ct=x(X*Qt),Yt=x(Q*st),ht=x(X*st),dt=x(Qt*Q);return new V(ct,Yt,dt,ht)}add(b){Y(b);const{a:M,d}=t,{ex:a,ey:m,ez:N,et:q}=this,{ex:z,ey:nt,ez:X,et:Q}=b;if(M===BigInt(-1)){const Ze=x((m-a)*(nt+z)),vt=x((m+a)*(nt-z)),gt=x(vt-Ze);if(gt===Ke)return this.double();const fe=x(N*Dn*Q),wt=x(q*Dn*X),_t=wt+fe,ye=vt+Ze,Mt=wt-fe,_=x(_t*gt),h=x(ye*Mt),l=x(_t*Mt),S=x(gt*ye);return new V(_,h,S,l)}const Qt=x(a*z),st=x(m*nt),ct=x(q*d*Q),Yt=x(N*X),ht=x((a+m)*(z+nt)-Qt-st),dt=Yt-ct,de=Yt+ct,pt=x(st-M*Qt),Bt=x(ht*dt),nr=x(de*pt),bt=x(ht*pt),Et=x(dt*de);return new V(Bt,nr,Et,bt)}subtract(b){return this.add(b.negate())}wNAF(b){return rt.wNAFCached(this,H,b,V.normalizeZ)}multiply(b){const{p:M,f:d}=this.wNAF(O(b,r));return V.normalizeZ([M,d])[0]}multiplyUnsafe(b){let M=$(b);return M===Ke?J:this.equals(J)||M===Le?this:this.equals(K)?this.wNAF(M).p:rt.unsafeLadder(this,M)}isSmallOrder(){return this.multiplyUnsafe(v).is0()}isTorsionFree(){return rt.unsafeLadder(this,r).is0()}toAffine(b){const{ex:M,ey:d,ez:a}=this,m=this.is0();b==null&&(b=m?gu:e.inv(a));const N=x(M*b),q=x(d*b),z=x(a*b);if(m)return{x:Ke,y:Le};if(z!==Le)throw new Error("invZ was invalid");return{x:N,y:q}}clearCofactor(){const{h:b}=t;return b===Le?this:this.multiplyUnsafe(b)}static fromHex(b,M=!1){const{d,a}=t,m=e.BYTES;b=he("pointHex",b,m);const N=b.slice(),q=b[m-1];N[m-1]=q&-129;const z=on(N);z===Ke||(M?O(z,B):O(z,e.ORDER));const nt=x(z*z),X=x(nt-Le),Q=x(d*nt-a);let{isValid:Qt,value:st}=E(X,Q);if(!Qt)throw new Error("Point.fromHex: invalid y coordinate");const ct=(st&Le)===Le,Yt=(q&128)!==0;if(!M&&st===Ke&&Yt)throw new Error("Point.fromHex: x=0 and x_0=1");return Yt!==ct&&(st=x(-st)),V.fromAffine({x:st,y:z})}static fromPrivateKey(b){return G(b).point}toRawBytes(){const{x:b,y:M}=this.toAffine(),d=In(M,e.BYTES);return d[d.length-1]|=b&Le?128:0,d}toHex(){return jr(this.toRawBytes())}}V.BASE=new V(t.Gx,t.Gy,Le,x(t.Gx*t.Gy)),V.ZERO=new V(Ke,Le,Le,Ke);const{BASE:K,ZERO:J}=V,rt=qo(V,w*8);function Gt(g){return ee(g,r)}function St(g){return Gt(on(g))}function G(g){const b=w;g=he("private key",g,b);const M=he("hashed private key",s(g),2*b),d=F(M.slice(0,b)),a=M.slice(b,2*b),m=St(d),N=K.multiply(m),q=N.toRawBytes();return{head:d,prefix:a,scalar:m,point:N,pointBytes:q}}function D(g){return G(g).pointBytes}function y(g=new Uint8Array,...b){const M=Zr(...b);return St(s(T(M,he("context",g),!!o)))}function i(g,b,M={}){g=he("message",g),o&&(g=o(g));const{prefix:d,scalar:a,pointBytes:m}=G(b),N=y(M.context,d,g),q=K.multiply(N).toRawBytes(),z=y(M.context,q,m,g),nt=Gt(N+z*a);$(nt);const X=Zr(q,In(nt,e.BYTES));return he("result",X,w*2)}const c=mu;function f(g,b,M,d=c){const{context:a,zip215:m}=d,N=e.BYTES;g=he("signature",g,2*N),b=he("message",b),o&&(b=o(b));const q=on(g.slice(N,2*N));let z,nt,X;try{z=V.fromHex(M,m),nt=V.fromHex(g.slice(0,N),m),X=K.multiplyUnsafe(q)}catch{return!1}if(!m&&z.isSmallOrder())return!1;const Q=y(a,nt.toRawBytes(),z.toRawBytes(),b);return nt.add(z.multiplyUnsafe(Q)).subtract(X).clearCofactor().equals(V.ZERO)}return K._setWindowSize(8),{CURVE:t,getPublicKey:D,sign:i,verify:f,ExtendedPoint:V,utils:{getExtendedPublicKey:G,randomPrivateKey:()=>u(e.BYTES),precompute(g=8,b=V.BASE){return b._setWindowSize(g),b.multiply(BigInt(3)),b}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ss=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Us=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const wu=BigInt(1),qi=BigInt(2),bu=BigInt(5),Fs=BigInt(10),vu=BigInt(20),xu=BigInt(40),Ns=BigInt(80);function _u(n){const t=ss,r=n*n%t*n%t,o=ie(r,qi,t)*r%t,s=ie(o,wu,t)*n%t,u=ie(s,bu,t)*s%t,w=ie(u,Fs,t)*u%t,v=ie(w,vu,t)*w%t,B=ie(v,xu,t)*v%t,x=ie(B,Ns,t)*B%t,E=ie(x,Ns,t)*B%t,F=ie(E,Fs,t)*u%t;return{pow_p_5_8:ie(F,qi,t)*n%t,b2:r}}function Mu(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function Su(n,t){const e=ss,r=ee(t*t*t,e),o=ee(r*r*t,e),s=_u(n*o).pow_p_5_8;let u=ee(n*r*s,e);const w=ee(t*u*u,e),v=u,B=ee(u*Us,e),x=w===n,E=w===ee(-n,e),F=w===ee(-n*Us,e);return x&&(u=v),(E||F)&&(u=B),au(u,e)&&(u=ee(-u,e)),{isValid:x||E,value:u}}const ur=No(ss,void 0,!0),os={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ur,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ts,randomBytes:vr.randomBytes,adjustScalarBytes:Mu,uvRatio:Su},pn=is(os);function Do(n,t,e){if(t.length>255)throw new Error("Context is too big");return vr.concatBytes(vr.utf8ToBytes("SigEd25519 no Ed25519 collisions"),new Uint8Array([e?1:0,t.length]),t,n)}({...os});({...os});const Bu=(ur.ORDER+BigInt(3))/BigInt(8);ur.pow(qi,Bu);ur.sqrt(ur.neg(ur.ONE));(ur.ORDER-BigInt(5))/BigInt(8);BigInt(486662);lu(ur,ur.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var as={exports:{}};const ui=Xi(Uc);as.exports;(function(n){(function(t,e){function r(y,i){if(!y)throw new Error(i||"Assertion failed")}function o(y,i){y.super_=i;var c=function(){};c.prototype=i.prototype,y.prototype=new c,y.prototype.constructor=y}function s(y,i,c){if(s.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,y!==null&&((i==="le"||i==="be")&&(c=i,i=10),this._init(y||0,i||10,c||"be"))}typeof t=="object"?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=ui.Buffer}catch{}s.isBN=function(i){return i instanceof s?!0:i!==null&&typeof i=="object"&&i.constructor.wordSize===s.wordSize&&Array.isArray(i.words)},s.max=function(i,c){return i.cmp(c)>0?i:c},s.min=function(i,c){return i.cmp(c)<0?i:c},s.prototype._init=function(i,c,f){if(typeof i=="number")return this._initNumber(i,c,f);if(typeof i=="object")return this._initArray(i,c,f);c==="hex"&&(c=16),r(c===(c|0)&&c>=2&&c<=36),i=i.toString().replace(/\s+/g,"");var p=0;i[0]==="-"&&(p++,this.negative=1),p<i.length&&(c===16?this._parseHex(i,p,f):(this._parseBase(i,c,p),f==="le"&&this._initArray(this.toArray(),c,f)))},s.prototype._initNumber=function(i,c,f){i<0&&(this.negative=1,i=-i),i<67108864?(this.words=[i&67108863],this.length=1):i<4503599627370496?(this.words=[i&67108863,i/67108864&67108863],this.length=2):(r(i<9007199254740992),this.words=[i&67108863,i/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),c,f)},s.prototype._initArray=function(i,c,f){if(r(typeof i.length=="number"),i.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(i.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var g,b,M=0;if(f==="be")for(p=i.length-1,g=0;p>=0;p-=3)b=i[p]|i[p-1]<<8|i[p-2]<<16,this.words[g]|=b<<M&67108863,this.words[g+1]=b>>>26-M&67108863,M+=24,M>=26&&(M-=26,g++);else if(f==="le")for(p=0,g=0;p<i.length;p+=3)b=i[p]|i[p+1]<<8|i[p+2]<<16,this.words[g]|=b<<M&67108863,this.words[g+1]=b>>>26-M&67108863,M+=24,M>=26&&(M-=26,g++);return this._strip()};function w(y,i){var c=y.charCodeAt(i);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;r(!1,"Invalid character in "+y)}function v(y,i,c){var f=w(y,c);return c-1>=i&&(f|=w(y,c-1)<<4),f}s.prototype._parseHex=function(i,c,f){this.length=Math.ceil((i.length-c)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var g=0,b=0,M;if(f==="be")for(p=i.length-1;p>=c;p-=2)M=v(i,c,p)<<g,this.words[b]|=M&67108863,g>=18?(g-=18,b+=1,this.words[b]|=M>>>26):g+=8;else{var d=i.length-c;for(p=d%2===0?c+1:c;p<i.length;p+=2)M=v(i,c,p)<<g,this.words[b]|=M&67108863,g>=18?(g-=18,b+=1,this.words[b]|=M>>>26):g+=8}this._strip()};function B(y,i,c,f){for(var p=0,g=0,b=Math.min(y.length,c),M=i;M<b;M++){var d=y.charCodeAt(M)-48;p*=f,d>=49?g=d-49+10:d>=17?g=d-17+10:g=d,r(d>=0&&g<f,"Invalid character"),p+=g}return p}s.prototype._parseBase=function(i,c,f){this.words=[0],this.length=1;for(var p=0,g=1;g<=67108863;g*=c)p++;p--,g=g/c|0;for(var b=i.length-f,M=b%p,d=Math.min(b,b-M)+f,a=0,m=f;m<d;m+=p)a=B(i,m,m+p,c),this.imuln(g),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(M!==0){var N=1;for(a=B(i,m,i.length,c),m=0;m<M;m++)N*=c;this.imuln(N),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this._strip()},s.prototype.copy=function(i){i.words=new Array(this.length);for(var c=0;c<this.length;c++)i.words[c]=this.words[c];i.length=this.length,i.negative=this.negative,i.red=this.red};function x(y,i){y.words=i.words,y.length=i.length,y.negative=i.negative,y.red=i.red}if(s.prototype._move=function(i){x(i,this)},s.prototype.clone=function(){var i=new s(null);return this.copy(i),i},s.prototype._expand=function(i){for(;this.length<i;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=E}catch{s.prototype.inspect=E}else s.prototype.inspect=E;function E(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var F=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],T=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(i,c){i=i||10,c=c|0||1;var f;if(i===16||i==="hex"){f="";for(var p=0,g=0,b=0;b<this.length;b++){var M=this.words[b],d=((M<<p|g)&16777215).toString(16);g=M>>>24-p&16777215,p+=2,p>=26&&(p-=26,b--),g!==0||b!==this.length-1?f=F[6-d.length]+d+f:f=d+f}for(g!==0&&(f=g.toString(16)+f);f.length%c!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(i===(i|0)&&i>=2&&i<=36){var a=T[i],m=I[i];f="";var N=this.clone();for(N.negative=0;!N.isZero();){var q=N.modrn(m).toString(i);N=N.idivn(m),N.isZero()?f=q+f:f=F[a-q.length]+q+f}for(this.isZero()&&(f="0"+f);f.length%c!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var i=this.words[0];return this.length===2?i+=this.words[1]*67108864:this.length===3&&this.words[2]===1?i+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-i:i},s.prototype.toJSON=function(){return this.toString(16,2)},u&&(s.prototype.toBuffer=function(i,c){return this.toArrayLike(u,i,c)}),s.prototype.toArray=function(i,c){return this.toArrayLike(Array,i,c)};var k=function(i,c){return i.allocUnsafe?i.allocUnsafe(c):new i(c)};s.prototype.toArrayLike=function(i,c,f){this._strip();var p=this.byteLength(),g=f||Math.max(1,p);r(p<=g,"byte array longer than desired length"),r(g>0,"Requested array length <= 0");var b=k(i,g),M=c==="le"?"LE":"BE";return this["_toArrayLike"+M](b,p),b},s.prototype._toArrayLikeLE=function(i,c){for(var f=0,p=0,g=0,b=0;g<this.length;g++){var M=this.words[g]<<b|p;i[f++]=M&255,f<i.length&&(i[f++]=M>>8&255),f<i.length&&(i[f++]=M>>16&255),b===6?(f<i.length&&(i[f++]=M>>24&255),p=0,b=0):(p=M>>>24,b+=2)}if(f<i.length)for(i[f++]=p;f<i.length;)i[f++]=0},s.prototype._toArrayLikeBE=function(i,c){for(var f=i.length-1,p=0,g=0,b=0;g<this.length;g++){var M=this.words[g]<<b|p;i[f--]=M&255,f>=0&&(i[f--]=M>>8&255),f>=0&&(i[f--]=M>>16&255),b===6?(f>=0&&(i[f--]=M>>24&255),p=0,b=0):(p=M>>>24,b+=2)}if(f>=0)for(i[f--]=p;f>=0;)i[f--]=0},Math.clz32?s.prototype._countBits=function(i){return 32-Math.clz32(i)}:s.prototype._countBits=function(i){var c=i,f=0;return c>=4096&&(f+=13,c>>>=13),c>=64&&(f+=7,c>>>=7),c>=8&&(f+=4,c>>>=4),c>=2&&(f+=2,c>>>=2),f+c},s.prototype._zeroBits=function(i){if(i===0)return 26;var c=i,f=0;return c&8191||(f+=13,c>>>=13),c&127||(f+=7,c>>>=7),c&15||(f+=4,c>>>=4),c&3||(f+=2,c>>>=2),c&1||f++,f},s.prototype.bitLength=function(){var i=this.words[this.length-1],c=this._countBits(i);return(this.length-1)*26+c};function A(y){for(var i=new Array(y.bitLength()),c=0;c<i.length;c++){var f=c/26|0,p=c%26;i[c]=y.words[f]>>>p&1}return i}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var i=0,c=0;c<this.length;c++){var f=this._zeroBits(this.words[c]);if(i+=f,f!==26)break}return i},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(i){return this.negative!==0?this.abs().inotn(i).iaddn(1):this.clone()},s.prototype.fromTwos=function(i){return this.testn(i-1)?this.notn(i).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(i){for(;this.length<i.length;)this.words[this.length++]=0;for(var c=0;c<i.length;c++)this.words[c]=this.words[c]|i.words[c];return this._strip()},s.prototype.ior=function(i){return r((this.negative|i.negative)===0),this.iuor(i)},s.prototype.or=function(i){return this.length>i.length?this.clone().ior(i):i.clone().ior(this)},s.prototype.uor=function(i){return this.length>i.length?this.clone().iuor(i):i.clone().iuor(this)},s.prototype.iuand=function(i){var c;this.length>i.length?c=i:c=this;for(var f=0;f<c.length;f++)this.words[f]=this.words[f]&i.words[f];return this.length=c.length,this._strip()},s.prototype.iand=function(i){return r((this.negative|i.negative)===0),this.iuand(i)},s.prototype.and=function(i){return this.length>i.length?this.clone().iand(i):i.clone().iand(this)},s.prototype.uand=function(i){return this.length>i.length?this.clone().iuand(i):i.clone().iuand(this)},s.prototype.iuxor=function(i){var c,f;this.length>i.length?(c=this,f=i):(c=i,f=this);for(var p=0;p<f.length;p++)this.words[p]=c.words[p]^f.words[p];if(this!==c)for(;p<c.length;p++)this.words[p]=c.words[p];return this.length=c.length,this._strip()},s.prototype.ixor=function(i){return r((this.negative|i.negative)===0),this.iuxor(i)},s.prototype.xor=function(i){return this.length>i.length?this.clone().ixor(i):i.clone().ixor(this)},s.prototype.uxor=function(i){return this.length>i.length?this.clone().iuxor(i):i.clone().iuxor(this)},s.prototype.inotn=function(i){r(typeof i=="number"&&i>=0);var c=Math.ceil(i/26)|0,f=i%26;this._expand(c),f>0&&c--;for(var p=0;p<c;p++)this.words[p]=~this.words[p]&67108863;return f>0&&(this.words[p]=~this.words[p]&67108863>>26-f),this._strip()},s.prototype.notn=function(i){return this.clone().inotn(i)},s.prototype.setn=function(i,c){r(typeof i=="number"&&i>=0);var f=i/26|0,p=i%26;return this._expand(f+1),c?this.words[f]=this.words[f]|1<<p:this.words[f]=this.words[f]&~(1<<p),this._strip()},s.prototype.iadd=function(i){var c;if(this.negative!==0&&i.negative===0)return this.negative=0,c=this.isub(i),this.negative^=1,this._normSign();if(this.negative===0&&i.negative!==0)return i.negative=0,c=this.isub(i),i.negative=1,c._normSign();var f,p;this.length>i.length?(f=this,p=i):(f=i,p=this);for(var g=0,b=0;b<p.length;b++)c=(f.words[b]|0)+(p.words[b]|0)+g,this.words[b]=c&67108863,g=c>>>26;for(;g!==0&&b<f.length;b++)c=(f.words[b]|0)+g,this.words[b]=c&67108863,g=c>>>26;if(this.length=f.length,g!==0)this.words[this.length]=g,this.length++;else if(f!==this)for(;b<f.length;b++)this.words[b]=f.words[b];return this},s.prototype.add=function(i){var c;return i.negative!==0&&this.negative===0?(i.negative=0,c=this.sub(i),i.negative^=1,c):i.negative===0&&this.negative!==0?(this.negative=0,c=i.sub(this),this.negative=1,c):this.length>i.length?this.clone().iadd(i):i.clone().iadd(this)},s.prototype.isub=function(i){if(i.negative!==0){i.negative=0;var c=this.iadd(i);return i.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(i),this.negative=1,this._normSign();var f=this.cmp(i);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,g;f>0?(p=this,g=i):(p=i,g=this);for(var b=0,M=0;M<g.length;M++)c=(p.words[M]|0)-(g.words[M]|0)+b,b=c>>26,this.words[M]=c&67108863;for(;b!==0&&M<p.length;M++)c=(p.words[M]|0)+b,b=c>>26,this.words[M]=c&67108863;if(b===0&&M<p.length&&p!==this)for(;M<p.length;M++)this.words[M]=p.words[M];return this.length=Math.max(this.length,M),p!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(i){return this.clone().isub(i)};function O(y,i,c){c.negative=i.negative^y.negative;var f=y.length+i.length|0;c.length=f,f=f-1|0;var p=y.words[0]|0,g=i.words[0]|0,b=p*g,M=b&67108863,d=b/67108864|0;c.words[0]=M;for(var a=1;a<f;a++){for(var m=d>>>26,N=d&67108863,q=Math.min(a,i.length-1),z=Math.max(0,a-y.length+1);z<=q;z++){var nt=a-z|0;p=y.words[nt]|0,g=i.words[z]|0,b=p*g+N,m+=b/67108864|0,N=b&67108863}c.words[a]=N|0,d=m|0}return d!==0?c.words[a]=d|0:c.length--,c._strip()}var $=function(i,c,f){var p=i.words,g=c.words,b=f.words,M=0,d,a,m,N=p[0]|0,q=N&8191,z=N>>>13,nt=p[1]|0,X=nt&8191,Q=nt>>>13,Qt=p[2]|0,st=Qt&8191,ct=Qt>>>13,Yt=p[3]|0,ht=Yt&8191,dt=Yt>>>13,de=p[4]|0,pt=de&8191,Bt=de>>>13,nr=p[5]|0,bt=nr&8191,Et=nr>>>13,Ze=p[6]|0,vt=Ze&8191,gt=Ze>>>13,fe=p[7]|0,wt=fe&8191,_t=fe>>>13,ye=p[8]|0,Mt=ye&8191,_=ye>>>13,h=p[9]|0,l=h&8191,S=h>>>13,R=g[0]|0,L=R&8191,U=R>>>13,kt=g[1]|0,at=kt&8191,ot=kt>>>13,Jt=g[2]|0,it=Jt&8191,At=Jt>>>13,wn=g[3]|0,It=wn&8191,Rt=wn>>>13,bn=g[4]|0,Lt=bn&8191,Tt=bn>>>13,vn=g[5]|0,Ct=vn&8191,Ut=vn>>>13,xn=g[6]|0,Ft=xn&8191,Nt=xn>>>13,_n=g[7]|0,Pt=_n&8191,Ot=_n>>>13,Mn=g[8]|0,qt=Mn&8191,Dt=Mn>>>13,Sn=g[9]|0,Ht=Sn&8191,zt=Sn>>>13;f.negative=i.negative^c.negative,f.length=19,d=Math.imul(q,L),a=Math.imul(q,U),a=a+Math.imul(z,L)|0,m=Math.imul(z,U);var _r=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(_r>>>26)|0,_r&=67108863,d=Math.imul(X,L),a=Math.imul(X,U),a=a+Math.imul(Q,L)|0,m=Math.imul(Q,U),d=d+Math.imul(q,at)|0,a=a+Math.imul(q,ot)|0,a=a+Math.imul(z,at)|0,m=m+Math.imul(z,ot)|0;var Mr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,d=Math.imul(st,L),a=Math.imul(st,U),a=a+Math.imul(ct,L)|0,m=Math.imul(ct,U),d=d+Math.imul(X,at)|0,a=a+Math.imul(X,ot)|0,a=a+Math.imul(Q,at)|0,m=m+Math.imul(Q,ot)|0,d=d+Math.imul(q,it)|0,a=a+Math.imul(q,At)|0,a=a+Math.imul(z,it)|0,m=m+Math.imul(z,At)|0;var Sr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,d=Math.imul(ht,L),a=Math.imul(ht,U),a=a+Math.imul(dt,L)|0,m=Math.imul(dt,U),d=d+Math.imul(st,at)|0,a=a+Math.imul(st,ot)|0,a=a+Math.imul(ct,at)|0,m=m+Math.imul(ct,ot)|0,d=d+Math.imul(X,it)|0,a=a+Math.imul(X,At)|0,a=a+Math.imul(Q,it)|0,m=m+Math.imul(Q,At)|0,d=d+Math.imul(q,It)|0,a=a+Math.imul(q,Rt)|0,a=a+Math.imul(z,It)|0,m=m+Math.imul(z,Rt)|0;var Br=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Br>>>26)|0,Br&=67108863,d=Math.imul(pt,L),a=Math.imul(pt,U),a=a+Math.imul(Bt,L)|0,m=Math.imul(Bt,U),d=d+Math.imul(ht,at)|0,a=a+Math.imul(ht,ot)|0,a=a+Math.imul(dt,at)|0,m=m+Math.imul(dt,ot)|0,d=d+Math.imul(st,it)|0,a=a+Math.imul(st,At)|0,a=a+Math.imul(ct,it)|0,m=m+Math.imul(ct,At)|0,d=d+Math.imul(X,It)|0,a=a+Math.imul(X,Rt)|0,a=a+Math.imul(Q,It)|0,m=m+Math.imul(Q,Rt)|0,d=d+Math.imul(q,Lt)|0,a=a+Math.imul(q,Tt)|0,a=a+Math.imul(z,Lt)|0,m=m+Math.imul(z,Tt)|0;var Er=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Er>>>26)|0,Er&=67108863,d=Math.imul(bt,L),a=Math.imul(bt,U),a=a+Math.imul(Et,L)|0,m=Math.imul(Et,U),d=d+Math.imul(pt,at)|0,a=a+Math.imul(pt,ot)|0,a=a+Math.imul(Bt,at)|0,m=m+Math.imul(Bt,ot)|0,d=d+Math.imul(ht,it)|0,a=a+Math.imul(ht,At)|0,a=a+Math.imul(dt,it)|0,m=m+Math.imul(dt,At)|0,d=d+Math.imul(st,It)|0,a=a+Math.imul(st,Rt)|0,a=a+Math.imul(ct,It)|0,m=m+Math.imul(ct,Rt)|0,d=d+Math.imul(X,Lt)|0,a=a+Math.imul(X,Tt)|0,a=a+Math.imul(Q,Lt)|0,m=m+Math.imul(Q,Tt)|0,d=d+Math.imul(q,Ct)|0,a=a+Math.imul(q,Ut)|0,a=a+Math.imul(z,Ct)|0,m=m+Math.imul(z,Ut)|0;var kr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(kr>>>26)|0,kr&=67108863,d=Math.imul(vt,L),a=Math.imul(vt,U),a=a+Math.imul(gt,L)|0,m=Math.imul(gt,U),d=d+Math.imul(bt,at)|0,a=a+Math.imul(bt,ot)|0,a=a+Math.imul(Et,at)|0,m=m+Math.imul(Et,ot)|0,d=d+Math.imul(pt,it)|0,a=a+Math.imul(pt,At)|0,a=a+Math.imul(Bt,it)|0,m=m+Math.imul(Bt,At)|0,d=d+Math.imul(ht,It)|0,a=a+Math.imul(ht,Rt)|0,a=a+Math.imul(dt,It)|0,m=m+Math.imul(dt,Rt)|0,d=d+Math.imul(st,Lt)|0,a=a+Math.imul(st,Tt)|0,a=a+Math.imul(ct,Lt)|0,m=m+Math.imul(ct,Tt)|0,d=d+Math.imul(X,Ct)|0,a=a+Math.imul(X,Ut)|0,a=a+Math.imul(Q,Ct)|0,m=m+Math.imul(Q,Ut)|0,d=d+Math.imul(q,Ft)|0,a=a+Math.imul(q,Nt)|0,a=a+Math.imul(z,Ft)|0,m=m+Math.imul(z,Nt)|0;var Ar=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,d=Math.imul(wt,L),a=Math.imul(wt,U),a=a+Math.imul(_t,L)|0,m=Math.imul(_t,U),d=d+Math.imul(vt,at)|0,a=a+Math.imul(vt,ot)|0,a=a+Math.imul(gt,at)|0,m=m+Math.imul(gt,ot)|0,d=d+Math.imul(bt,it)|0,a=a+Math.imul(bt,At)|0,a=a+Math.imul(Et,it)|0,m=m+Math.imul(Et,At)|0,d=d+Math.imul(pt,It)|0,a=a+Math.imul(pt,Rt)|0,a=a+Math.imul(Bt,It)|0,m=m+Math.imul(Bt,Rt)|0,d=d+Math.imul(ht,Lt)|0,a=a+Math.imul(ht,Tt)|0,a=a+Math.imul(dt,Lt)|0,m=m+Math.imul(dt,Tt)|0,d=d+Math.imul(st,Ct)|0,a=a+Math.imul(st,Ut)|0,a=a+Math.imul(ct,Ct)|0,m=m+Math.imul(ct,Ut)|0,d=d+Math.imul(X,Ft)|0,a=a+Math.imul(X,Nt)|0,a=a+Math.imul(Q,Ft)|0,m=m+Math.imul(Q,Nt)|0,d=d+Math.imul(q,Pt)|0,a=a+Math.imul(q,Ot)|0,a=a+Math.imul(z,Pt)|0,m=m+Math.imul(z,Ot)|0;var Ir=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,d=Math.imul(Mt,L),a=Math.imul(Mt,U),a=a+Math.imul(_,L)|0,m=Math.imul(_,U),d=d+Math.imul(wt,at)|0,a=a+Math.imul(wt,ot)|0,a=a+Math.imul(_t,at)|0,m=m+Math.imul(_t,ot)|0,d=d+Math.imul(vt,it)|0,a=a+Math.imul(vt,At)|0,a=a+Math.imul(gt,it)|0,m=m+Math.imul(gt,At)|0,d=d+Math.imul(bt,It)|0,a=a+Math.imul(bt,Rt)|0,a=a+Math.imul(Et,It)|0,m=m+Math.imul(Et,Rt)|0,d=d+Math.imul(pt,Lt)|0,a=a+Math.imul(pt,Tt)|0,a=a+Math.imul(Bt,Lt)|0,m=m+Math.imul(Bt,Tt)|0,d=d+Math.imul(ht,Ct)|0,a=a+Math.imul(ht,Ut)|0,a=a+Math.imul(dt,Ct)|0,m=m+Math.imul(dt,Ut)|0,d=d+Math.imul(st,Ft)|0,a=a+Math.imul(st,Nt)|0,a=a+Math.imul(ct,Ft)|0,m=m+Math.imul(ct,Nt)|0,d=d+Math.imul(X,Pt)|0,a=a+Math.imul(X,Ot)|0,a=a+Math.imul(Q,Pt)|0,m=m+Math.imul(Q,Ot)|0,d=d+Math.imul(q,qt)|0,a=a+Math.imul(q,Dt)|0,a=a+Math.imul(z,qt)|0,m=m+Math.imul(z,Dt)|0;var Rr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,d=Math.imul(l,L),a=Math.imul(l,U),a=a+Math.imul(S,L)|0,m=Math.imul(S,U),d=d+Math.imul(Mt,at)|0,a=a+Math.imul(Mt,ot)|0,a=a+Math.imul(_,at)|0,m=m+Math.imul(_,ot)|0,d=d+Math.imul(wt,it)|0,a=a+Math.imul(wt,At)|0,a=a+Math.imul(_t,it)|0,m=m+Math.imul(_t,At)|0,d=d+Math.imul(vt,It)|0,a=a+Math.imul(vt,Rt)|0,a=a+Math.imul(gt,It)|0,m=m+Math.imul(gt,Rt)|0,d=d+Math.imul(bt,Lt)|0,a=a+Math.imul(bt,Tt)|0,a=a+Math.imul(Et,Lt)|0,m=m+Math.imul(Et,Tt)|0,d=d+Math.imul(pt,Ct)|0,a=a+Math.imul(pt,Ut)|0,a=a+Math.imul(Bt,Ct)|0,m=m+Math.imul(Bt,Ut)|0,d=d+Math.imul(ht,Ft)|0,a=a+Math.imul(ht,Nt)|0,a=a+Math.imul(dt,Ft)|0,m=m+Math.imul(dt,Nt)|0,d=d+Math.imul(st,Pt)|0,a=a+Math.imul(st,Ot)|0,a=a+Math.imul(ct,Pt)|0,m=m+Math.imul(ct,Ot)|0,d=d+Math.imul(X,qt)|0,a=a+Math.imul(X,Dt)|0,a=a+Math.imul(Q,qt)|0,m=m+Math.imul(Q,Dt)|0,d=d+Math.imul(q,Ht)|0,a=a+Math.imul(q,zt)|0,a=a+Math.imul(z,Ht)|0,m=m+Math.imul(z,zt)|0;var Lr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,d=Math.imul(l,at),a=Math.imul(l,ot),a=a+Math.imul(S,at)|0,m=Math.imul(S,ot),d=d+Math.imul(Mt,it)|0,a=a+Math.imul(Mt,At)|0,a=a+Math.imul(_,it)|0,m=m+Math.imul(_,At)|0,d=d+Math.imul(wt,It)|0,a=a+Math.imul(wt,Rt)|0,a=a+Math.imul(_t,It)|0,m=m+Math.imul(_t,Rt)|0,d=d+Math.imul(vt,Lt)|0,a=a+Math.imul(vt,Tt)|0,a=a+Math.imul(gt,Lt)|0,m=m+Math.imul(gt,Tt)|0,d=d+Math.imul(bt,Ct)|0,a=a+Math.imul(bt,Ut)|0,a=a+Math.imul(Et,Ct)|0,m=m+Math.imul(Et,Ut)|0,d=d+Math.imul(pt,Ft)|0,a=a+Math.imul(pt,Nt)|0,a=a+Math.imul(Bt,Ft)|0,m=m+Math.imul(Bt,Nt)|0,d=d+Math.imul(ht,Pt)|0,a=a+Math.imul(ht,Ot)|0,a=a+Math.imul(dt,Pt)|0,m=m+Math.imul(dt,Ot)|0,d=d+Math.imul(st,qt)|0,a=a+Math.imul(st,Dt)|0,a=a+Math.imul(ct,qt)|0,m=m+Math.imul(ct,Dt)|0,d=d+Math.imul(X,Ht)|0,a=a+Math.imul(X,zt)|0,a=a+Math.imul(Q,Ht)|0,m=m+Math.imul(Q,zt)|0;var Tr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,d=Math.imul(l,it),a=Math.imul(l,At),a=a+Math.imul(S,it)|0,m=Math.imul(S,At),d=d+Math.imul(Mt,It)|0,a=a+Math.imul(Mt,Rt)|0,a=a+Math.imul(_,It)|0,m=m+Math.imul(_,Rt)|0,d=d+Math.imul(wt,Lt)|0,a=a+Math.imul(wt,Tt)|0,a=a+Math.imul(_t,Lt)|0,m=m+Math.imul(_t,Tt)|0,d=d+Math.imul(vt,Ct)|0,a=a+Math.imul(vt,Ut)|0,a=a+Math.imul(gt,Ct)|0,m=m+Math.imul(gt,Ut)|0,d=d+Math.imul(bt,Ft)|0,a=a+Math.imul(bt,Nt)|0,a=a+Math.imul(Et,Ft)|0,m=m+Math.imul(Et,Nt)|0,d=d+Math.imul(pt,Pt)|0,a=a+Math.imul(pt,Ot)|0,a=a+Math.imul(Bt,Pt)|0,m=m+Math.imul(Bt,Ot)|0,d=d+Math.imul(ht,qt)|0,a=a+Math.imul(ht,Dt)|0,a=a+Math.imul(dt,qt)|0,m=m+Math.imul(dt,Dt)|0,d=d+Math.imul(st,Ht)|0,a=a+Math.imul(st,zt)|0,a=a+Math.imul(ct,Ht)|0,m=m+Math.imul(ct,zt)|0;var Cr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,d=Math.imul(l,It),a=Math.imul(l,Rt),a=a+Math.imul(S,It)|0,m=Math.imul(S,Rt),d=d+Math.imul(Mt,Lt)|0,a=a+Math.imul(Mt,Tt)|0,a=a+Math.imul(_,Lt)|0,m=m+Math.imul(_,Tt)|0,d=d+Math.imul(wt,Ct)|0,a=a+Math.imul(wt,Ut)|0,a=a+Math.imul(_t,Ct)|0,m=m+Math.imul(_t,Ut)|0,d=d+Math.imul(vt,Ft)|0,a=a+Math.imul(vt,Nt)|0,a=a+Math.imul(gt,Ft)|0,m=m+Math.imul(gt,Nt)|0,d=d+Math.imul(bt,Pt)|0,a=a+Math.imul(bt,Ot)|0,a=a+Math.imul(Et,Pt)|0,m=m+Math.imul(Et,Ot)|0,d=d+Math.imul(pt,qt)|0,a=a+Math.imul(pt,Dt)|0,a=a+Math.imul(Bt,qt)|0,m=m+Math.imul(Bt,Dt)|0,d=d+Math.imul(ht,Ht)|0,a=a+Math.imul(ht,zt)|0,a=a+Math.imul(dt,Ht)|0,m=m+Math.imul(dt,zt)|0;var Ur=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,d=Math.imul(l,Lt),a=Math.imul(l,Tt),a=a+Math.imul(S,Lt)|0,m=Math.imul(S,Tt),d=d+Math.imul(Mt,Ct)|0,a=a+Math.imul(Mt,Ut)|0,a=a+Math.imul(_,Ct)|0,m=m+Math.imul(_,Ut)|0,d=d+Math.imul(wt,Ft)|0,a=a+Math.imul(wt,Nt)|0,a=a+Math.imul(_t,Ft)|0,m=m+Math.imul(_t,Nt)|0,d=d+Math.imul(vt,Pt)|0,a=a+Math.imul(vt,Ot)|0,a=a+Math.imul(gt,Pt)|0,m=m+Math.imul(gt,Ot)|0,d=d+Math.imul(bt,qt)|0,a=a+Math.imul(bt,Dt)|0,a=a+Math.imul(Et,qt)|0,m=m+Math.imul(Et,Dt)|0,d=d+Math.imul(pt,Ht)|0,a=a+Math.imul(pt,zt)|0,a=a+Math.imul(Bt,Ht)|0,m=m+Math.imul(Bt,zt)|0;var Fr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,d=Math.imul(l,Ct),a=Math.imul(l,Ut),a=a+Math.imul(S,Ct)|0,m=Math.imul(S,Ut),d=d+Math.imul(Mt,Ft)|0,a=a+Math.imul(Mt,Nt)|0,a=a+Math.imul(_,Ft)|0,m=m+Math.imul(_,Nt)|0,d=d+Math.imul(wt,Pt)|0,a=a+Math.imul(wt,Ot)|0,a=a+Math.imul(_t,Pt)|0,m=m+Math.imul(_t,Ot)|0,d=d+Math.imul(vt,qt)|0,a=a+Math.imul(vt,Dt)|0,a=a+Math.imul(gt,qt)|0,m=m+Math.imul(gt,Dt)|0,d=d+Math.imul(bt,Ht)|0,a=a+Math.imul(bt,zt)|0,a=a+Math.imul(Et,Ht)|0,m=m+Math.imul(Et,zt)|0;var Nr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,d=Math.imul(l,Ft),a=Math.imul(l,Nt),a=a+Math.imul(S,Ft)|0,m=Math.imul(S,Nt),d=d+Math.imul(Mt,Pt)|0,a=a+Math.imul(Mt,Ot)|0,a=a+Math.imul(_,Pt)|0,m=m+Math.imul(_,Ot)|0,d=d+Math.imul(wt,qt)|0,a=a+Math.imul(wt,Dt)|0,a=a+Math.imul(_t,qt)|0,m=m+Math.imul(_t,Dt)|0,d=d+Math.imul(vt,Ht)|0,a=a+Math.imul(vt,zt)|0,a=a+Math.imul(gt,Ht)|0,m=m+Math.imul(gt,zt)|0;var Pr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,d=Math.imul(l,Pt),a=Math.imul(l,Ot),a=a+Math.imul(S,Pt)|0,m=Math.imul(S,Ot),d=d+Math.imul(Mt,qt)|0,a=a+Math.imul(Mt,Dt)|0,a=a+Math.imul(_,qt)|0,m=m+Math.imul(_,Dt)|0,d=d+Math.imul(wt,Ht)|0,a=a+Math.imul(wt,zt)|0,a=a+Math.imul(_t,Ht)|0,m=m+Math.imul(_t,zt)|0;var Or=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Or>>>26)|0,Or&=67108863,d=Math.imul(l,qt),a=Math.imul(l,Dt),a=a+Math.imul(S,qt)|0,m=Math.imul(S,Dt),d=d+Math.imul(Mt,Ht)|0,a=a+Math.imul(Mt,zt)|0,a=a+Math.imul(_,Ht)|0,m=m+Math.imul(_,zt)|0;var qr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(qr>>>26)|0,qr&=67108863,d=Math.imul(l,Ht),a=Math.imul(l,zt),a=a+Math.imul(S,Ht)|0,m=Math.imul(S,zt);var Dr=(M+d|0)+((a&8191)<<13)|0;return M=(m+(a>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,b[0]=_r,b[1]=Mr,b[2]=Sr,b[3]=Br,b[4]=Er,b[5]=kr,b[6]=Ar,b[7]=Ir,b[8]=Rr,b[9]=Lr,b[10]=Tr,b[11]=Cr,b[12]=Ur,b[13]=Fr,b[14]=Nr,b[15]=Pr,b[16]=Or,b[17]=qr,b[18]=Dr,M!==0&&(b[19]=M,f.length++),f};Math.imul||($=O);function H(y,i,c){c.negative=i.negative^y.negative,c.length=y.length+i.length;for(var f=0,p=0,g=0;g<c.length-1;g++){var b=p;p=0;for(var M=f&67108863,d=Math.min(g,i.length-1),a=Math.max(0,g-y.length+1);a<=d;a++){var m=g-a,N=y.words[m]|0,q=i.words[a]|0,z=N*q,nt=z&67108863;b=b+(z/67108864|0)|0,nt=nt+M|0,M=nt&67108863,b=b+(nt>>>26)|0,p+=b>>>26,b&=67108863}c.words[g]=M,f=b,b=p}return f!==0?c.words[g]=f:c.length--,c._strip()}function Y(y,i,c){return H(y,i,c)}s.prototype.mulTo=function(i,c){var f,p=this.length+i.length;return this.length===10&&i.length===10?f=$(this,i,c):p<63?f=O(this,i,c):p<1024?f=H(this,i,c):f=Y(this,i,c),f},s.prototype.mul=function(i){var c=new s(null);return c.words=new Array(this.length+i.length),this.mulTo(i,c)},s.prototype.mulf=function(i){var c=new s(null);return c.words=new Array(this.length+i.length),Y(this,i,c)},s.prototype.imul=function(i){return this.clone().mulTo(i,this)},s.prototype.imuln=function(i){var c=i<0;c&&(i=-i),r(typeof i=="number"),r(i<67108864);for(var f=0,p=0;p<this.length;p++){var g=(this.words[p]|0)*i,b=(g&67108863)+(f&67108863);f>>=26,f+=g/67108864|0,f+=b>>>26,this.words[p]=b&67108863}return f!==0&&(this.words[p]=f,this.length++),c?this.ineg():this},s.prototype.muln=function(i){return this.clone().imuln(i)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(i){var c=A(i);if(c.length===0)return new s(1);for(var f=this,p=0;p<c.length&&c[p]===0;p++,f=f.sqr());if(++p<c.length)for(var g=f.sqr();p<c.length;p++,g=g.sqr())c[p]!==0&&(f=f.mul(g));return f},s.prototype.iushln=function(i){r(typeof i=="number"&&i>=0);var c=i%26,f=(i-c)/26,p=67108863>>>26-c<<26-c,g;if(c!==0){var b=0;for(g=0;g<this.length;g++){var M=this.words[g]&p,d=(this.words[g]|0)-M<<c;this.words[g]=d|b,b=M>>>26-c}b&&(this.words[g]=b,this.length++)}if(f!==0){for(g=this.length-1;g>=0;g--)this.words[g+f]=this.words[g];for(g=0;g<f;g++)this.words[g]=0;this.length+=f}return this._strip()},s.prototype.ishln=function(i){return r(this.negative===0),this.iushln(i)},s.prototype.iushrn=function(i,c,f){r(typeof i=="number"&&i>=0);var p;c?p=(c-c%26)/26:p=0;var g=i%26,b=Math.min((i-g)/26,this.length),M=67108863^67108863>>>g<<g,d=f;if(p-=b,p=Math.max(0,p),d){for(var a=0;a<b;a++)d.words[a]=this.words[a];d.length=b}if(b!==0)if(this.length>b)for(this.length-=b,a=0;a<this.length;a++)this.words[a]=this.words[a+b];else this.words[0]=0,this.length=1;var m=0;for(a=this.length-1;a>=0&&(m!==0||a>=p);a--){var N=this.words[a]|0;this.words[a]=m<<26-g|N>>>g,m=N&M}return d&&m!==0&&(d.words[d.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(i,c,f){return r(this.negative===0),this.iushrn(i,c,f)},s.prototype.shln=function(i){return this.clone().ishln(i)},s.prototype.ushln=function(i){return this.clone().iushln(i)},s.prototype.shrn=function(i){return this.clone().ishrn(i)},s.prototype.ushrn=function(i){return this.clone().iushrn(i)},s.prototype.testn=function(i){r(typeof i=="number"&&i>=0);var c=i%26,f=(i-c)/26,p=1<<c;if(this.length<=f)return!1;var g=this.words[f];return!!(g&p)},s.prototype.imaskn=function(i){r(typeof i=="number"&&i>=0);var c=i%26,f=(i-c)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(c!==0&&f++,this.length=Math.min(f,this.length),c!==0){var p=67108863^67108863>>>c<<c;this.words[this.length-1]&=p}return this._strip()},s.prototype.maskn=function(i){return this.clone().imaskn(i)},s.prototype.iaddn=function(i){return r(typeof i=="number"),r(i<67108864),i<0?this.isubn(-i):this.negative!==0?this.length===1&&(this.words[0]|0)<=i?(this.words[0]=i-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(i),this.negative=1,this):this._iaddn(i)},s.prototype._iaddn=function(i){this.words[0]+=i;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},s.prototype.isubn=function(i){if(r(typeof i=="number"),r(i<67108864),i<0)return this.iaddn(-i);if(this.negative!==0)return this.negative=0,this.iaddn(i),this.negative=1,this;if(this.words[0]-=i,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},s.prototype.addn=function(i){return this.clone().iaddn(i)},s.prototype.subn=function(i){return this.clone().isubn(i)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(i,c,f){var p=i.length+f,g;this._expand(p);var b,M=0;for(g=0;g<i.length;g++){b=(this.words[g+f]|0)+M;var d=(i.words[g]|0)*c;b-=d&67108863,M=(b>>26)-(d/67108864|0),this.words[g+f]=b&67108863}for(;g<this.length-f;g++)b=(this.words[g+f]|0)+M,M=b>>26,this.words[g+f]=b&67108863;if(M===0)return this._strip();for(r(M===-1),M=0,g=0;g<this.length;g++)b=-(this.words[g]|0)+M,M=b>>26,this.words[g]=b&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(i,c){var f=this.length-i.length,p=this.clone(),g=i,b=g.words[g.length-1]|0,M=this._countBits(b);f=26-M,f!==0&&(g=g.ushln(f),p.iushln(f),b=g.words[g.length-1]|0);var d=p.length-g.length,a;if(c!=="mod"){a=new s(null),a.length=d+1,a.words=new Array(a.length);for(var m=0;m<a.length;m++)a.words[m]=0}var N=p.clone()._ishlnsubmul(g,1,d);N.negative===0&&(p=N,a&&(a.words[d]=1));for(var q=d-1;q>=0;q--){var z=(p.words[g.length+q]|0)*67108864+(p.words[g.length+q-1]|0);for(z=Math.min(z/b|0,67108863),p._ishlnsubmul(g,z,q);p.negative!==0;)z--,p.negative=0,p._ishlnsubmul(g,1,q),p.isZero()||(p.negative^=1);a&&(a.words[q]=z)}return a&&a._strip(),p._strip(),c!=="div"&&f!==0&&p.iushrn(f),{div:a||null,mod:p}},s.prototype.divmod=function(i,c,f){if(r(!i.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var p,g,b;return this.negative!==0&&i.negative===0?(b=this.neg().divmod(i,c),c!=="mod"&&(p=b.div.neg()),c!=="div"&&(g=b.mod.neg(),f&&g.negative!==0&&g.iadd(i)),{div:p,mod:g}):this.negative===0&&i.negative!==0?(b=this.divmod(i.neg(),c),c!=="mod"&&(p=b.div.neg()),{div:p,mod:b.mod}):this.negative&i.negative?(b=this.neg().divmod(i.neg(),c),c!=="div"&&(g=b.mod.neg(),f&&g.negative!==0&&g.isub(i)),{div:b.div,mod:g}):i.length>this.length||this.cmp(i)<0?{div:new s(0),mod:this}:i.length===1?c==="div"?{div:this.divn(i.words[0]),mod:null}:c==="mod"?{div:null,mod:new s(this.modrn(i.words[0]))}:{div:this.divn(i.words[0]),mod:new s(this.modrn(i.words[0]))}:this._wordDiv(i,c)},s.prototype.div=function(i){return this.divmod(i,"div",!1).div},s.prototype.mod=function(i){return this.divmod(i,"mod",!1).mod},s.prototype.umod=function(i){return this.divmod(i,"mod",!0).mod},s.prototype.divRound=function(i){var c=this.divmod(i);if(c.mod.isZero())return c.div;var f=c.div.negative!==0?c.mod.isub(i):c.mod,p=i.ushrn(1),g=i.andln(1),b=f.cmp(p);return b<0||g===1&&b===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},s.prototype.modrn=function(i){var c=i<0;c&&(i=-i),r(i<=67108863);for(var f=(1<<26)%i,p=0,g=this.length-1;g>=0;g--)p=(f*p+(this.words[g]|0))%i;return c?-p:p},s.prototype.modn=function(i){return this.modrn(i)},s.prototype.idivn=function(i){var c=i<0;c&&(i=-i),r(i<=67108863);for(var f=0,p=this.length-1;p>=0;p--){var g=(this.words[p]|0)+f*67108864;this.words[p]=g/i|0,f=g%i}return this._strip(),c?this.ineg():this},s.prototype.divn=function(i){return this.clone().idivn(i)},s.prototype.egcd=function(i){r(i.negative===0),r(!i.isZero());var c=this,f=i.clone();c.negative!==0?c=c.umod(i):c=c.clone();for(var p=new s(1),g=new s(0),b=new s(0),M=new s(1),d=0;c.isEven()&&f.isEven();)c.iushrn(1),f.iushrn(1),++d;for(var a=f.clone(),m=c.clone();!c.isZero();){for(var N=0,q=1;!(c.words[0]&q)&&N<26;++N,q<<=1);if(N>0)for(c.iushrn(N);N-- >0;)(p.isOdd()||g.isOdd())&&(p.iadd(a),g.isub(m)),p.iushrn(1),g.iushrn(1);for(var z=0,nt=1;!(f.words[0]&nt)&&z<26;++z,nt<<=1);if(z>0)for(f.iushrn(z);z-- >0;)(b.isOdd()||M.isOdd())&&(b.iadd(a),M.isub(m)),b.iushrn(1),M.iushrn(1);c.cmp(f)>=0?(c.isub(f),p.isub(b),g.isub(M)):(f.isub(c),b.isub(p),M.isub(g))}return{a:b,b:M,gcd:f.iushln(d)}},s.prototype._invmp=function(i){r(i.negative===0),r(!i.isZero());var c=this,f=i.clone();c.negative!==0?c=c.umod(i):c=c.clone();for(var p=new s(1),g=new s(0),b=f.clone();c.cmpn(1)>0&&f.cmpn(1)>0;){for(var M=0,d=1;!(c.words[0]&d)&&M<26;++M,d<<=1);if(M>0)for(c.iushrn(M);M-- >0;)p.isOdd()&&p.iadd(b),p.iushrn(1);for(var a=0,m=1;!(f.words[0]&m)&&a<26;++a,m<<=1);if(a>0)for(f.iushrn(a);a-- >0;)g.isOdd()&&g.iadd(b),g.iushrn(1);c.cmp(f)>=0?(c.isub(f),p.isub(g)):(f.isub(c),g.isub(p))}var N;return c.cmpn(1)===0?N=p:N=g,N.cmpn(0)<0&&N.iadd(i),N},s.prototype.gcd=function(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var c=this.clone(),f=i.clone();c.negative=0,f.negative=0;for(var p=0;c.isEven()&&f.isEven();p++)c.iushrn(1),f.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;f.isEven();)f.iushrn(1);var g=c.cmp(f);if(g<0){var b=c;c=f,f=b}else if(g===0||f.cmpn(1)===0)break;c.isub(f)}while(!0);return f.iushln(p)},s.prototype.invm=function(i){return this.egcd(i).a.umod(i)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(i){return this.words[0]&i},s.prototype.bincn=function(i){r(typeof i=="number");var c=i%26,f=(i-c)/26,p=1<<c;if(this.length<=f)return this._expand(f+1),this.words[f]|=p,this;for(var g=p,b=f;g!==0&&b<this.length;b++){var M=this.words[b]|0;M+=g,g=M>>>26,M&=67108863,this.words[b]=M}return g!==0&&(this.words[b]=g,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(i){var c=i<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var f;if(this.length>1)f=1;else{c&&(i=-i),r(i<=67108863,"Number is too big");var p=this.words[0]|0;f=p===i?0:p<i?-1:1}return this.negative!==0?-f|0:f},s.prototype.cmp=function(i){if(this.negative!==0&&i.negative===0)return-1;if(this.negative===0&&i.negative!==0)return 1;var c=this.ucmp(i);return this.negative!==0?-c|0:c},s.prototype.ucmp=function(i){if(this.length>i.length)return 1;if(this.length<i.length)return-1;for(var c=0,f=this.length-1;f>=0;f--){var p=this.words[f]|0,g=i.words[f]|0;if(p!==g){p<g?c=-1:p>g&&(c=1);break}}return c},s.prototype.gtn=function(i){return this.cmpn(i)===1},s.prototype.gt=function(i){return this.cmp(i)===1},s.prototype.gten=function(i){return this.cmpn(i)>=0},s.prototype.gte=function(i){return this.cmp(i)>=0},s.prototype.ltn=function(i){return this.cmpn(i)===-1},s.prototype.lt=function(i){return this.cmp(i)===-1},s.prototype.lten=function(i){return this.cmpn(i)<=0},s.prototype.lte=function(i){return this.cmp(i)<=0},s.prototype.eqn=function(i){return this.cmpn(i)===0},s.prototype.eq=function(i){return this.cmp(i)===0},s.red=function(i){return new G(i)},s.prototype.toRed=function(i){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),i.convertTo(this)._forceRed(i)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(i){return this.red=i,this},s.prototype.forceRed=function(i){return r(!this.red,"Already a number in reduction context"),this._forceRed(i)},s.prototype.redAdd=function(i){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,i)},s.prototype.redIAdd=function(i){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,i)},s.prototype.redSub=function(i){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,i)},s.prototype.redISub=function(i){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,i)},s.prototype.redShl=function(i){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,i)},s.prototype.redMul=function(i){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.mul(this,i)},s.prototype.redIMul=function(i){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.imul(this,i)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(i){return r(this.red&&!i.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,i)};var V={k256:null,p224:null,p192:null,p25519:null};function K(y,i){this.name=y,this.p=new s(i,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}K.prototype._tmp=function(){var i=new s(null);return i.words=new Array(Math.ceil(this.n/13)),i},K.prototype.ireduce=function(i){var c=i,f;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),f=c.bitLength();while(f>this.n);var p=f<this.n?-1:c.ucmp(this.p);return p===0?(c.words[0]=0,c.length=1):p>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},K.prototype.split=function(i,c){i.iushrn(this.n,0,c)},K.prototype.imulK=function(i){return i.imul(this.k)};function J(){K.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(J,K),J.prototype.split=function(i,c){for(var f=4194303,p=Math.min(i.length,9),g=0;g<p;g++)c.words[g]=i.words[g];if(c.length=p,i.length<=9){i.words[0]=0,i.length=1;return}var b=i.words[9];for(c.words[c.length++]=b&f,g=10;g<i.length;g++){var M=i.words[g]|0;i.words[g-10]=(M&f)<<4|b>>>22,b=M}b>>>=22,i.words[g-10]=b,b===0&&i.length>10?i.length-=10:i.length-=9},J.prototype.imulK=function(i){i.words[i.length]=0,i.words[i.length+1]=0,i.length+=2;for(var c=0,f=0;f<i.length;f++){var p=i.words[f]|0;c+=p*977,i.words[f]=c&67108863,c=p*64+(c/67108864|0)}return i.words[i.length-1]===0&&(i.length--,i.words[i.length-1]===0&&i.length--),i};function rt(){K.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(rt,K);function Gt(){K.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(Gt,K);function St(){K.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(St,K),St.prototype.imulK=function(i){for(var c=0,f=0;f<i.length;f++){var p=(i.words[f]|0)*19+c,g=p&67108863;p>>>=26,i.words[f]=g,c=p}return c!==0&&(i.words[i.length++]=c),i},s._prime=function(i){if(V[i])return V[i];var c;if(i==="k256")c=new J;else if(i==="p224")c=new rt;else if(i==="p192")c=new Gt;else if(i==="p25519")c=new St;else throw new Error("Unknown prime "+i);return V[i]=c,c};function G(y){if(typeof y=="string"){var i=s._prime(y);this.m=i.p,this.prime=i}else r(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}G.prototype._verify1=function(i){r(i.negative===0,"red works only with positives"),r(i.red,"red works only with red numbers")},G.prototype._verify2=function(i,c){r((i.negative|c.negative)===0,"red works only with positives"),r(i.red&&i.red===c.red,"red works only with red numbers")},G.prototype.imod=function(i){return this.prime?this.prime.ireduce(i)._forceRed(this):(x(i,i.umod(this.m)._forceRed(this)),i)},G.prototype.neg=function(i){return i.isZero()?i.clone():this.m.sub(i)._forceRed(this)},G.prototype.add=function(i,c){this._verify2(i,c);var f=i.add(c);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},G.prototype.iadd=function(i,c){this._verify2(i,c);var f=i.iadd(c);return f.cmp(this.m)>=0&&f.isub(this.m),f},G.prototype.sub=function(i,c){this._verify2(i,c);var f=i.sub(c);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},G.prototype.isub=function(i,c){this._verify2(i,c);var f=i.isub(c);return f.cmpn(0)<0&&f.iadd(this.m),f},G.prototype.shl=function(i,c){return this._verify1(i),this.imod(i.ushln(c))},G.prototype.imul=function(i,c){return this._verify2(i,c),this.imod(i.imul(c))},G.prototype.mul=function(i,c){return this._verify2(i,c),this.imod(i.mul(c))},G.prototype.isqr=function(i){return this.imul(i,i.clone())},G.prototype.sqr=function(i){return this.mul(i,i)},G.prototype.sqrt=function(i){if(i.isZero())return i.clone();var c=this.m.andln(3);if(r(c%2===1),c===3){var f=this.m.add(new s(1)).iushrn(2);return this.pow(i,f)}for(var p=this.m.subn(1),g=0;!p.isZero()&&p.andln(1)===0;)g++,p.iushrn(1);r(!p.isZero());var b=new s(1).toRed(this),M=b.redNeg(),d=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new s(2*a*a).toRed(this);this.pow(a,d).cmp(M)!==0;)a.redIAdd(M);for(var m=this.pow(a,p),N=this.pow(i,p.addn(1).iushrn(1)),q=this.pow(i,p),z=g;q.cmp(b)!==0;){for(var nt=q,X=0;nt.cmp(b)!==0;X++)nt=nt.redSqr();r(X<z);var Q=this.pow(m,new s(1).iushln(z-X-1));N=N.redMul(Q),m=Q.redSqr(),q=q.redMul(m),z=X}return N},G.prototype.invm=function(i){var c=i._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},G.prototype.pow=function(i,c){if(c.isZero())return new s(1).toRed(this);if(c.cmpn(1)===0)return i.clone();var f=4,p=new Array(1<<f);p[0]=new s(1).toRed(this),p[1]=i;for(var g=2;g<p.length;g++)p[g]=this.mul(p[g-1],i);var b=p[0],M=0,d=0,a=c.bitLength()%26;for(a===0&&(a=26),g=c.length-1;g>=0;g--){for(var m=c.words[g],N=a-1;N>=0;N--){var q=m>>N&1;if(b!==p[0]&&(b=this.sqr(b)),q===0&&M===0){d=0;continue}M<<=1,M|=q,d++,!(d!==f&&(g!==0||N!==0))&&(b=this.mul(b,p[M]),d=0,M=0)}a=26}return b},G.prototype.convertTo=function(i){var c=i.umod(this.m);return c===i?c.clone():c},G.prototype.convertFrom=function(i){var c=i.clone();return c.red=null,c},s.mont=function(i){return new D(i)};function D(y){G.call(this,y),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(D,G),D.prototype.convertTo=function(i){return this.imod(i.ushln(this.shift))},D.prototype.convertFrom=function(i){var c=this.imod(i.mul(this.rinv));return c.red=null,c},D.prototype.imul=function(i,c){if(i.isZero()||c.isZero())return i.words[0]=0,i.length=1,i;var f=i.imul(c),p=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=f.isub(p).iushrn(this.shift),b=g;return g.cmp(this.m)>=0?b=g.isub(this.m):g.cmpn(0)<0&&(b=g.iadd(this.m)),b._forceRed(this)},D.prototype.mul=function(i,c){if(i.isZero()||c.isZero())return new s(0)._forceRed(this);var f=i.mul(c),p=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=f.isub(p).iushrn(this.shift),b=g;return g.cmp(this.m)>=0?b=g.isub(this.m):g.cmpn(0)<0&&(b=g.iadd(this.m)),b._forceRed(this)},D.prototype.invm=function(i){var c=this.imod(i._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(n,$e)})(as);var Eu=as.exports;const Ps=Yi(Eu);var Di={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,t){var e=ui,r=e.Buffer;function o(u,w){for(var v in u)w[v]=u[v]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(o(e,t),t.Buffer=s);function s(u,w,v){return r(u,w,v)}s.prototype=Object.create(r.prototype),o(r,s),s.from=function(u,w,v){if(typeof u=="number")throw new TypeError("Argument must not be a number");return r(u,w,v)},s.alloc=function(u,w,v){if(typeof u!="number")throw new TypeError("Argument must be a number");var B=r(u);return w!==void 0?typeof v=="string"?B.fill(w,v):B.fill(w):B.fill(0),B},s.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r(u)},s.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(u)}})(Di,Di.exports);var ku=Di.exports,Hn=ku.Buffer;function Au(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var o=n.charAt(r),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=r}var u=n.length,w=n.charAt(0),v=Math.log(u)/Math.log(256),B=Math.log(256)/Math.log(u);function x(T){if((Array.isArray(T)||T instanceof Uint8Array)&&(T=Hn.from(T)),!Hn.isBuffer(T))throw new TypeError("Expected Buffer");if(T.length===0)return"";for(var I=0,k=0,A=0,O=T.length;A!==O&&T[A]===0;)A++,I++;for(var $=(O-A)*B+1>>>0,H=new Uint8Array($);A!==O;){for(var Y=T[A],V=0,K=$-1;(Y!==0||V<k)&&K!==-1;K--,V++)Y+=256*H[K]>>>0,H[K]=Y%u>>>0,Y=Y/u>>>0;if(Y!==0)throw new Error("Non-zero carry");k=V,A++}for(var J=$-k;J!==$&&H[J]===0;)J++;for(var rt=w.repeat(I);J<$;++J)rt+=n.charAt(H[J]);return rt}function E(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return Hn.alloc(0);for(var I=0,k=0,A=0;T[I]===w;)k++,I++;for(var O=(T.length-I)*v+1>>>0,$=new Uint8Array(O);T[I];){var H=t[T.charCodeAt(I)];if(H===255)return;for(var Y=0,V=O-1;(H!==0||Y<A)&&V!==-1;V--,Y++)H+=u*$[V]>>>0,$[V]=H%256>>>0,H=H/256>>>0;if(H!==0)throw new Error("Non-zero carry");A=Y,I++}for(var K=O-A;K!==O&&$[K]===0;)K++;var J=Hn.allocUnsafe(k+(O-K));J.fill(0,0,k);for(var rt=k;K!==O;)J[rt++]=$[K++];return J}function F(T){var I=E(T);if(I)return I;throw new Error("Non-base"+u+" character")}return{encode:x,decodeUnsafe:E,decode:F}}var Iu=Au,Ru=Iu,Lu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Ho=Ru(Lu);const _e=Yi(Ho);function Os(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}function Tu(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function cs(n,...t){if(!Tu(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${n.length}`)}function Cu(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Os(n.outputLen),Os(n.blockLen)}function jn(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Uu(n,t){cs(n);const e=t.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mi=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Ye=(n,t)=>n<<32-t|n>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Fu(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function us(n){return typeof n=="string"&&(n=Fu(n)),cs(n),n}class zo{clone(){return this._cloneInto()}}function $o(n){const t=r=>n().update(us(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function Nu(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const o=BigInt(32),s=BigInt(4294967295),u=Number(e>>o&s),w=Number(e&s),v=r?4:0,B=r?0:4;n.setUint32(t+v,u,r),n.setUint32(t+B,w,r)}const Pu=(n,t,e)=>n&t^~n&e,Ou=(n,t,e)=>n&t^n&e^t&e;class qu extends zo{constructor(t,e,r,o){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Mi(this.buffer)}update(t){jn(this);const{view:e,buffer:r,blockLen:o}=this;t=us(t);const s=t.length;for(let u=0;u<s;){const w=Math.min(o-this.pos,s-u);if(w===o){const v=Mi(t);for(;o<=s-u;u+=o)this.process(v,u);continue}r.set(t.subarray(u,u+w),this.pos),this.pos+=w,u+=w,this.pos===o&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){jn(this),Uu(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:o,isLE:s}=this;let{pos:u}=this;e[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>o-u&&(this.process(r,0),u=0);for(let E=u;E<o;E++)e[E]=0;Nu(r,o-8,BigInt(this.length*8),s),this.process(r,0);const w=Mi(t),v=this.outputLen;if(v%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const B=v/4,x=this.get();if(B>x.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<B;E++)w.setUint32(4*E,x[E],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:o,finished:s,destroyed:u,pos:w}=this;return t.length=o,t.pos=w,t.finished=s,t.destroyed=u,o%e&&t.buffer.set(r),t}}const Du=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),lr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),dr=new Uint32Array(64);class Ko extends qu{constructor(){super(64,32,8,!1),this.A=lr[0]|0,this.B=lr[1]|0,this.C=lr[2]|0,this.D=lr[3]|0,this.E=lr[4]|0,this.F=lr[5]|0,this.G=lr[6]|0,this.H=lr[7]|0}get(){const{A:t,B:e,C:r,D:o,E:s,F:u,G:w,H:v}=this;return[t,e,r,o,s,u,w,v]}set(t,e,r,o,s,u,w,v){this.A=t|0,this.B=e|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=u|0,this.G=w|0,this.H=v|0}process(t,e){for(let E=0;E<16;E++,e+=4)dr[E]=t.getUint32(e,!1);for(let E=16;E<64;E++){const F=dr[E-15],T=dr[E-2],I=Ye(F,7)^Ye(F,18)^F>>>3,k=Ye(T,17)^Ye(T,19)^T>>>10;dr[E]=k+dr[E-7]+I+dr[E-16]|0}let{A:r,B:o,C:s,D:u,E:w,F:v,G:B,H:x}=this;for(let E=0;E<64;E++){const F=Ye(w,6)^Ye(w,11)^Ye(w,25),T=x+F+Pu(w,v,B)+Du[E]+dr[E]|0,k=(Ye(r,2)^Ye(r,13)^Ye(r,22))+Ou(r,o,s)|0;x=B,B=v,v=w,w=u+T|0,u=s,s=o,o=r,r=T+k|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,u=u+this.D|0,w=w+this.E|0,v=v+this.F|0,B=B+this.G|0,x=x+this.H|0,this.set(r,o,s,u,w,v,B,x)}roundClean(){dr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Hu extends Ko{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Zn=$o(()=>new Ko),zu=$o(()=>new Hu),w0=Object.freeze(Object.defineProperty({__proto__:null,sha224:zu,sha256:Zn},Symbol.toStringTag,{value:"Module"}));var xe={},fs={exports:{}};fs.exports;(function(n){(function(t,e){function r(y,i){if(!y)throw new Error(i||"Assertion failed")}function o(y,i){y.super_=i;var c=function(){};c.prototype=i.prototype,y.prototype=new c,y.prototype.constructor=y}function s(y,i,c){if(s.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,y!==null&&((i==="le"||i==="be")&&(c=i,i=10),this._init(y||0,i||10,c||"be"))}typeof t=="object"?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=ui.Buffer}catch{}s.isBN=function(i){return i instanceof s?!0:i!==null&&typeof i=="object"&&i.constructor.wordSize===s.wordSize&&Array.isArray(i.words)},s.max=function(i,c){return i.cmp(c)>0?i:c},s.min=function(i,c){return i.cmp(c)<0?i:c},s.prototype._init=function(i,c,f){if(typeof i=="number")return this._initNumber(i,c,f);if(typeof i=="object")return this._initArray(i,c,f);c==="hex"&&(c=16),r(c===(c|0)&&c>=2&&c<=36),i=i.toString().replace(/\s+/g,"");var p=0;i[0]==="-"&&(p++,this.negative=1),p<i.length&&(c===16?this._parseHex(i,p,f):(this._parseBase(i,c,p),f==="le"&&this._initArray(this.toArray(),c,f)))},s.prototype._initNumber=function(i,c,f){i<0&&(this.negative=1,i=-i),i<67108864?(this.words=[i&67108863],this.length=1):i<4503599627370496?(this.words=[i&67108863,i/67108864&67108863],this.length=2):(r(i<9007199254740992),this.words=[i&67108863,i/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),c,f)},s.prototype._initArray=function(i,c,f){if(r(typeof i.length=="number"),i.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(i.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var g,b,M=0;if(f==="be")for(p=i.length-1,g=0;p>=0;p-=3)b=i[p]|i[p-1]<<8|i[p-2]<<16,this.words[g]|=b<<M&67108863,this.words[g+1]=b>>>26-M&67108863,M+=24,M>=26&&(M-=26,g++);else if(f==="le")for(p=0,g=0;p<i.length;p+=3)b=i[p]|i[p+1]<<8|i[p+2]<<16,this.words[g]|=b<<M&67108863,this.words[g+1]=b>>>26-M&67108863,M+=24,M>=26&&(M-=26,g++);return this._strip()};function w(y,i){var c=y.charCodeAt(i);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;r(!1,"Invalid character in "+y)}function v(y,i,c){var f=w(y,c);return c-1>=i&&(f|=w(y,c-1)<<4),f}s.prototype._parseHex=function(i,c,f){this.length=Math.ceil((i.length-c)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var g=0,b=0,M;if(f==="be")for(p=i.length-1;p>=c;p-=2)M=v(i,c,p)<<g,this.words[b]|=M&67108863,g>=18?(g-=18,b+=1,this.words[b]|=M>>>26):g+=8;else{var d=i.length-c;for(p=d%2===0?c+1:c;p<i.length;p+=2)M=v(i,c,p)<<g,this.words[b]|=M&67108863,g>=18?(g-=18,b+=1,this.words[b]|=M>>>26):g+=8}this._strip()};function B(y,i,c,f){for(var p=0,g=0,b=Math.min(y.length,c),M=i;M<b;M++){var d=y.charCodeAt(M)-48;p*=f,d>=49?g=d-49+10:d>=17?g=d-17+10:g=d,r(d>=0&&g<f,"Invalid character"),p+=g}return p}s.prototype._parseBase=function(i,c,f){this.words=[0],this.length=1;for(var p=0,g=1;g<=67108863;g*=c)p++;p--,g=g/c|0;for(var b=i.length-f,M=b%p,d=Math.min(b,b-M)+f,a=0,m=f;m<d;m+=p)a=B(i,m,m+p,c),this.imuln(g),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(M!==0){var N=1;for(a=B(i,m,i.length,c),m=0;m<M;m++)N*=c;this.imuln(N),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this._strip()},s.prototype.copy=function(i){i.words=new Array(this.length);for(var c=0;c<this.length;c++)i.words[c]=this.words[c];i.length=this.length,i.negative=this.negative,i.red=this.red};function x(y,i){y.words=i.words,y.length=i.length,y.negative=i.negative,y.red=i.red}if(s.prototype._move=function(i){x(i,this)},s.prototype.clone=function(){var i=new s(null);return this.copy(i),i},s.prototype._expand=function(i){for(;this.length<i;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=E}catch{s.prototype.inspect=E}else s.prototype.inspect=E;function E(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var F=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],T=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(i,c){i=i||10,c=c|0||1;var f;if(i===16||i==="hex"){f="";for(var p=0,g=0,b=0;b<this.length;b++){var M=this.words[b],d=((M<<p|g)&16777215).toString(16);g=M>>>24-p&16777215,p+=2,p>=26&&(p-=26,b--),g!==0||b!==this.length-1?f=F[6-d.length]+d+f:f=d+f}for(g!==0&&(f=g.toString(16)+f);f.length%c!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(i===(i|0)&&i>=2&&i<=36){var a=T[i],m=I[i];f="";var N=this.clone();for(N.negative=0;!N.isZero();){var q=N.modrn(m).toString(i);N=N.idivn(m),N.isZero()?f=q+f:f=F[a-q.length]+q+f}for(this.isZero()&&(f="0"+f);f.length%c!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var i=this.words[0];return this.length===2?i+=this.words[1]*67108864:this.length===3&&this.words[2]===1?i+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-i:i},s.prototype.toJSON=function(){return this.toString(16,2)},u&&(s.prototype.toBuffer=function(i,c){return this.toArrayLike(u,i,c)}),s.prototype.toArray=function(i,c){return this.toArrayLike(Array,i,c)};var k=function(i,c){return i.allocUnsafe?i.allocUnsafe(c):new i(c)};s.prototype.toArrayLike=function(i,c,f){this._strip();var p=this.byteLength(),g=f||Math.max(1,p);r(p<=g,"byte array longer than desired length"),r(g>0,"Requested array length <= 0");var b=k(i,g),M=c==="le"?"LE":"BE";return this["_toArrayLike"+M](b,p),b},s.prototype._toArrayLikeLE=function(i,c){for(var f=0,p=0,g=0,b=0;g<this.length;g++){var M=this.words[g]<<b|p;i[f++]=M&255,f<i.length&&(i[f++]=M>>8&255),f<i.length&&(i[f++]=M>>16&255),b===6?(f<i.length&&(i[f++]=M>>24&255),p=0,b=0):(p=M>>>24,b+=2)}if(f<i.length)for(i[f++]=p;f<i.length;)i[f++]=0},s.prototype._toArrayLikeBE=function(i,c){for(var f=i.length-1,p=0,g=0,b=0;g<this.length;g++){var M=this.words[g]<<b|p;i[f--]=M&255,f>=0&&(i[f--]=M>>8&255),f>=0&&(i[f--]=M>>16&255),b===6?(f>=0&&(i[f--]=M>>24&255),p=0,b=0):(p=M>>>24,b+=2)}if(f>=0)for(i[f--]=p;f>=0;)i[f--]=0},Math.clz32?s.prototype._countBits=function(i){return 32-Math.clz32(i)}:s.prototype._countBits=function(i){var c=i,f=0;return c>=4096&&(f+=13,c>>>=13),c>=64&&(f+=7,c>>>=7),c>=8&&(f+=4,c>>>=4),c>=2&&(f+=2,c>>>=2),f+c},s.prototype._zeroBits=function(i){if(i===0)return 26;var c=i,f=0;return c&8191||(f+=13,c>>>=13),c&127||(f+=7,c>>>=7),c&15||(f+=4,c>>>=4),c&3||(f+=2,c>>>=2),c&1||f++,f},s.prototype.bitLength=function(){var i=this.words[this.length-1],c=this._countBits(i);return(this.length-1)*26+c};function A(y){for(var i=new Array(y.bitLength()),c=0;c<i.length;c++){var f=c/26|0,p=c%26;i[c]=y.words[f]>>>p&1}return i}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var i=0,c=0;c<this.length;c++){var f=this._zeroBits(this.words[c]);if(i+=f,f!==26)break}return i},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(i){return this.negative!==0?this.abs().inotn(i).iaddn(1):this.clone()},s.prototype.fromTwos=function(i){return this.testn(i-1)?this.notn(i).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(i){for(;this.length<i.length;)this.words[this.length++]=0;for(var c=0;c<i.length;c++)this.words[c]=this.words[c]|i.words[c];return this._strip()},s.prototype.ior=function(i){return r((this.negative|i.negative)===0),this.iuor(i)},s.prototype.or=function(i){return this.length>i.length?this.clone().ior(i):i.clone().ior(this)},s.prototype.uor=function(i){return this.length>i.length?this.clone().iuor(i):i.clone().iuor(this)},s.prototype.iuand=function(i){var c;this.length>i.length?c=i:c=this;for(var f=0;f<c.length;f++)this.words[f]=this.words[f]&i.words[f];return this.length=c.length,this._strip()},s.prototype.iand=function(i){return r((this.negative|i.negative)===0),this.iuand(i)},s.prototype.and=function(i){return this.length>i.length?this.clone().iand(i):i.clone().iand(this)},s.prototype.uand=function(i){return this.length>i.length?this.clone().iuand(i):i.clone().iuand(this)},s.prototype.iuxor=function(i){var c,f;this.length>i.length?(c=this,f=i):(c=i,f=this);for(var p=0;p<f.length;p++)this.words[p]=c.words[p]^f.words[p];if(this!==c)for(;p<c.length;p++)this.words[p]=c.words[p];return this.length=c.length,this._strip()},s.prototype.ixor=function(i){return r((this.negative|i.negative)===0),this.iuxor(i)},s.prototype.xor=function(i){return this.length>i.length?this.clone().ixor(i):i.clone().ixor(this)},s.prototype.uxor=function(i){return this.length>i.length?this.clone().iuxor(i):i.clone().iuxor(this)},s.prototype.inotn=function(i){r(typeof i=="number"&&i>=0);var c=Math.ceil(i/26)|0,f=i%26;this._expand(c),f>0&&c--;for(var p=0;p<c;p++)this.words[p]=~this.words[p]&67108863;return f>0&&(this.words[p]=~this.words[p]&67108863>>26-f),this._strip()},s.prototype.notn=function(i){return this.clone().inotn(i)},s.prototype.setn=function(i,c){r(typeof i=="number"&&i>=0);var f=i/26|0,p=i%26;return this._expand(f+1),c?this.words[f]=this.words[f]|1<<p:this.words[f]=this.words[f]&~(1<<p),this._strip()},s.prototype.iadd=function(i){var c;if(this.negative!==0&&i.negative===0)return this.negative=0,c=this.isub(i),this.negative^=1,this._normSign();if(this.negative===0&&i.negative!==0)return i.negative=0,c=this.isub(i),i.negative=1,c._normSign();var f,p;this.length>i.length?(f=this,p=i):(f=i,p=this);for(var g=0,b=0;b<p.length;b++)c=(f.words[b]|0)+(p.words[b]|0)+g,this.words[b]=c&67108863,g=c>>>26;for(;g!==0&&b<f.length;b++)c=(f.words[b]|0)+g,this.words[b]=c&67108863,g=c>>>26;if(this.length=f.length,g!==0)this.words[this.length]=g,this.length++;else if(f!==this)for(;b<f.length;b++)this.words[b]=f.words[b];return this},s.prototype.add=function(i){var c;return i.negative!==0&&this.negative===0?(i.negative=0,c=this.sub(i),i.negative^=1,c):i.negative===0&&this.negative!==0?(this.negative=0,c=i.sub(this),this.negative=1,c):this.length>i.length?this.clone().iadd(i):i.clone().iadd(this)},s.prototype.isub=function(i){if(i.negative!==0){i.negative=0;var c=this.iadd(i);return i.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(i),this.negative=1,this._normSign();var f=this.cmp(i);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,g;f>0?(p=this,g=i):(p=i,g=this);for(var b=0,M=0;M<g.length;M++)c=(p.words[M]|0)-(g.words[M]|0)+b,b=c>>26,this.words[M]=c&67108863;for(;b!==0&&M<p.length;M++)c=(p.words[M]|0)+b,b=c>>26,this.words[M]=c&67108863;if(b===0&&M<p.length&&p!==this)for(;M<p.length;M++)this.words[M]=p.words[M];return this.length=Math.max(this.length,M),p!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(i){return this.clone().isub(i)};function O(y,i,c){c.negative=i.negative^y.negative;var f=y.length+i.length|0;c.length=f,f=f-1|0;var p=y.words[0]|0,g=i.words[0]|0,b=p*g,M=b&67108863,d=b/67108864|0;c.words[0]=M;for(var a=1;a<f;a++){for(var m=d>>>26,N=d&67108863,q=Math.min(a,i.length-1),z=Math.max(0,a-y.length+1);z<=q;z++){var nt=a-z|0;p=y.words[nt]|0,g=i.words[z]|0,b=p*g+N,m+=b/67108864|0,N=b&67108863}c.words[a]=N|0,d=m|0}return d!==0?c.words[a]=d|0:c.length--,c._strip()}var $=function(i,c,f){var p=i.words,g=c.words,b=f.words,M=0,d,a,m,N=p[0]|0,q=N&8191,z=N>>>13,nt=p[1]|0,X=nt&8191,Q=nt>>>13,Qt=p[2]|0,st=Qt&8191,ct=Qt>>>13,Yt=p[3]|0,ht=Yt&8191,dt=Yt>>>13,de=p[4]|0,pt=de&8191,Bt=de>>>13,nr=p[5]|0,bt=nr&8191,Et=nr>>>13,Ze=p[6]|0,vt=Ze&8191,gt=Ze>>>13,fe=p[7]|0,wt=fe&8191,_t=fe>>>13,ye=p[8]|0,Mt=ye&8191,_=ye>>>13,h=p[9]|0,l=h&8191,S=h>>>13,R=g[0]|0,L=R&8191,U=R>>>13,kt=g[1]|0,at=kt&8191,ot=kt>>>13,Jt=g[2]|0,it=Jt&8191,At=Jt>>>13,wn=g[3]|0,It=wn&8191,Rt=wn>>>13,bn=g[4]|0,Lt=bn&8191,Tt=bn>>>13,vn=g[5]|0,Ct=vn&8191,Ut=vn>>>13,xn=g[6]|0,Ft=xn&8191,Nt=xn>>>13,_n=g[7]|0,Pt=_n&8191,Ot=_n>>>13,Mn=g[8]|0,qt=Mn&8191,Dt=Mn>>>13,Sn=g[9]|0,Ht=Sn&8191,zt=Sn>>>13;f.negative=i.negative^c.negative,f.length=19,d=Math.imul(q,L),a=Math.imul(q,U),a=a+Math.imul(z,L)|0,m=Math.imul(z,U);var _r=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(_r>>>26)|0,_r&=67108863,d=Math.imul(X,L),a=Math.imul(X,U),a=a+Math.imul(Q,L)|0,m=Math.imul(Q,U),d=d+Math.imul(q,at)|0,a=a+Math.imul(q,ot)|0,a=a+Math.imul(z,at)|0,m=m+Math.imul(z,ot)|0;var Mr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,d=Math.imul(st,L),a=Math.imul(st,U),a=a+Math.imul(ct,L)|0,m=Math.imul(ct,U),d=d+Math.imul(X,at)|0,a=a+Math.imul(X,ot)|0,a=a+Math.imul(Q,at)|0,m=m+Math.imul(Q,ot)|0,d=d+Math.imul(q,it)|0,a=a+Math.imul(q,At)|0,a=a+Math.imul(z,it)|0,m=m+Math.imul(z,At)|0;var Sr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,d=Math.imul(ht,L),a=Math.imul(ht,U),a=a+Math.imul(dt,L)|0,m=Math.imul(dt,U),d=d+Math.imul(st,at)|0,a=a+Math.imul(st,ot)|0,a=a+Math.imul(ct,at)|0,m=m+Math.imul(ct,ot)|0,d=d+Math.imul(X,it)|0,a=a+Math.imul(X,At)|0,a=a+Math.imul(Q,it)|0,m=m+Math.imul(Q,At)|0,d=d+Math.imul(q,It)|0,a=a+Math.imul(q,Rt)|0,a=a+Math.imul(z,It)|0,m=m+Math.imul(z,Rt)|0;var Br=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Br>>>26)|0,Br&=67108863,d=Math.imul(pt,L),a=Math.imul(pt,U),a=a+Math.imul(Bt,L)|0,m=Math.imul(Bt,U),d=d+Math.imul(ht,at)|0,a=a+Math.imul(ht,ot)|0,a=a+Math.imul(dt,at)|0,m=m+Math.imul(dt,ot)|0,d=d+Math.imul(st,it)|0,a=a+Math.imul(st,At)|0,a=a+Math.imul(ct,it)|0,m=m+Math.imul(ct,At)|0,d=d+Math.imul(X,It)|0,a=a+Math.imul(X,Rt)|0,a=a+Math.imul(Q,It)|0,m=m+Math.imul(Q,Rt)|0,d=d+Math.imul(q,Lt)|0,a=a+Math.imul(q,Tt)|0,a=a+Math.imul(z,Lt)|0,m=m+Math.imul(z,Tt)|0;var Er=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Er>>>26)|0,Er&=67108863,d=Math.imul(bt,L),a=Math.imul(bt,U),a=a+Math.imul(Et,L)|0,m=Math.imul(Et,U),d=d+Math.imul(pt,at)|0,a=a+Math.imul(pt,ot)|0,a=a+Math.imul(Bt,at)|0,m=m+Math.imul(Bt,ot)|0,d=d+Math.imul(ht,it)|0,a=a+Math.imul(ht,At)|0,a=a+Math.imul(dt,it)|0,m=m+Math.imul(dt,At)|0,d=d+Math.imul(st,It)|0,a=a+Math.imul(st,Rt)|0,a=a+Math.imul(ct,It)|0,m=m+Math.imul(ct,Rt)|0,d=d+Math.imul(X,Lt)|0,a=a+Math.imul(X,Tt)|0,a=a+Math.imul(Q,Lt)|0,m=m+Math.imul(Q,Tt)|0,d=d+Math.imul(q,Ct)|0,a=a+Math.imul(q,Ut)|0,a=a+Math.imul(z,Ct)|0,m=m+Math.imul(z,Ut)|0;var kr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(kr>>>26)|0,kr&=67108863,d=Math.imul(vt,L),a=Math.imul(vt,U),a=a+Math.imul(gt,L)|0,m=Math.imul(gt,U),d=d+Math.imul(bt,at)|0,a=a+Math.imul(bt,ot)|0,a=a+Math.imul(Et,at)|0,m=m+Math.imul(Et,ot)|0,d=d+Math.imul(pt,it)|0,a=a+Math.imul(pt,At)|0,a=a+Math.imul(Bt,it)|0,m=m+Math.imul(Bt,At)|0,d=d+Math.imul(ht,It)|0,a=a+Math.imul(ht,Rt)|0,a=a+Math.imul(dt,It)|0,m=m+Math.imul(dt,Rt)|0,d=d+Math.imul(st,Lt)|0,a=a+Math.imul(st,Tt)|0,a=a+Math.imul(ct,Lt)|0,m=m+Math.imul(ct,Tt)|0,d=d+Math.imul(X,Ct)|0,a=a+Math.imul(X,Ut)|0,a=a+Math.imul(Q,Ct)|0,m=m+Math.imul(Q,Ut)|0,d=d+Math.imul(q,Ft)|0,a=a+Math.imul(q,Nt)|0,a=a+Math.imul(z,Ft)|0,m=m+Math.imul(z,Nt)|0;var Ar=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,d=Math.imul(wt,L),a=Math.imul(wt,U),a=a+Math.imul(_t,L)|0,m=Math.imul(_t,U),d=d+Math.imul(vt,at)|0,a=a+Math.imul(vt,ot)|0,a=a+Math.imul(gt,at)|0,m=m+Math.imul(gt,ot)|0,d=d+Math.imul(bt,it)|0,a=a+Math.imul(bt,At)|0,a=a+Math.imul(Et,it)|0,m=m+Math.imul(Et,At)|0,d=d+Math.imul(pt,It)|0,a=a+Math.imul(pt,Rt)|0,a=a+Math.imul(Bt,It)|0,m=m+Math.imul(Bt,Rt)|0,d=d+Math.imul(ht,Lt)|0,a=a+Math.imul(ht,Tt)|0,a=a+Math.imul(dt,Lt)|0,m=m+Math.imul(dt,Tt)|0,d=d+Math.imul(st,Ct)|0,a=a+Math.imul(st,Ut)|0,a=a+Math.imul(ct,Ct)|0,m=m+Math.imul(ct,Ut)|0,d=d+Math.imul(X,Ft)|0,a=a+Math.imul(X,Nt)|0,a=a+Math.imul(Q,Ft)|0,m=m+Math.imul(Q,Nt)|0,d=d+Math.imul(q,Pt)|0,a=a+Math.imul(q,Ot)|0,a=a+Math.imul(z,Pt)|0,m=m+Math.imul(z,Ot)|0;var Ir=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,d=Math.imul(Mt,L),a=Math.imul(Mt,U),a=a+Math.imul(_,L)|0,m=Math.imul(_,U),d=d+Math.imul(wt,at)|0,a=a+Math.imul(wt,ot)|0,a=a+Math.imul(_t,at)|0,m=m+Math.imul(_t,ot)|0,d=d+Math.imul(vt,it)|0,a=a+Math.imul(vt,At)|0,a=a+Math.imul(gt,it)|0,m=m+Math.imul(gt,At)|0,d=d+Math.imul(bt,It)|0,a=a+Math.imul(bt,Rt)|0,a=a+Math.imul(Et,It)|0,m=m+Math.imul(Et,Rt)|0,d=d+Math.imul(pt,Lt)|0,a=a+Math.imul(pt,Tt)|0,a=a+Math.imul(Bt,Lt)|0,m=m+Math.imul(Bt,Tt)|0,d=d+Math.imul(ht,Ct)|0,a=a+Math.imul(ht,Ut)|0,a=a+Math.imul(dt,Ct)|0,m=m+Math.imul(dt,Ut)|0,d=d+Math.imul(st,Ft)|0,a=a+Math.imul(st,Nt)|0,a=a+Math.imul(ct,Ft)|0,m=m+Math.imul(ct,Nt)|0,d=d+Math.imul(X,Pt)|0,a=a+Math.imul(X,Ot)|0,a=a+Math.imul(Q,Pt)|0,m=m+Math.imul(Q,Ot)|0,d=d+Math.imul(q,qt)|0,a=a+Math.imul(q,Dt)|0,a=a+Math.imul(z,qt)|0,m=m+Math.imul(z,Dt)|0;var Rr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,d=Math.imul(l,L),a=Math.imul(l,U),a=a+Math.imul(S,L)|0,m=Math.imul(S,U),d=d+Math.imul(Mt,at)|0,a=a+Math.imul(Mt,ot)|0,a=a+Math.imul(_,at)|0,m=m+Math.imul(_,ot)|0,d=d+Math.imul(wt,it)|0,a=a+Math.imul(wt,At)|0,a=a+Math.imul(_t,it)|0,m=m+Math.imul(_t,At)|0,d=d+Math.imul(vt,It)|0,a=a+Math.imul(vt,Rt)|0,a=a+Math.imul(gt,It)|0,m=m+Math.imul(gt,Rt)|0,d=d+Math.imul(bt,Lt)|0,a=a+Math.imul(bt,Tt)|0,a=a+Math.imul(Et,Lt)|0,m=m+Math.imul(Et,Tt)|0,d=d+Math.imul(pt,Ct)|0,a=a+Math.imul(pt,Ut)|0,a=a+Math.imul(Bt,Ct)|0,m=m+Math.imul(Bt,Ut)|0,d=d+Math.imul(ht,Ft)|0,a=a+Math.imul(ht,Nt)|0,a=a+Math.imul(dt,Ft)|0,m=m+Math.imul(dt,Nt)|0,d=d+Math.imul(st,Pt)|0,a=a+Math.imul(st,Ot)|0,a=a+Math.imul(ct,Pt)|0,m=m+Math.imul(ct,Ot)|0,d=d+Math.imul(X,qt)|0,a=a+Math.imul(X,Dt)|0,a=a+Math.imul(Q,qt)|0,m=m+Math.imul(Q,Dt)|0,d=d+Math.imul(q,Ht)|0,a=a+Math.imul(q,zt)|0,a=a+Math.imul(z,Ht)|0,m=m+Math.imul(z,zt)|0;var Lr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,d=Math.imul(l,at),a=Math.imul(l,ot),a=a+Math.imul(S,at)|0,m=Math.imul(S,ot),d=d+Math.imul(Mt,it)|0,a=a+Math.imul(Mt,At)|0,a=a+Math.imul(_,it)|0,m=m+Math.imul(_,At)|0,d=d+Math.imul(wt,It)|0,a=a+Math.imul(wt,Rt)|0,a=a+Math.imul(_t,It)|0,m=m+Math.imul(_t,Rt)|0,d=d+Math.imul(vt,Lt)|0,a=a+Math.imul(vt,Tt)|0,a=a+Math.imul(gt,Lt)|0,m=m+Math.imul(gt,Tt)|0,d=d+Math.imul(bt,Ct)|0,a=a+Math.imul(bt,Ut)|0,a=a+Math.imul(Et,Ct)|0,m=m+Math.imul(Et,Ut)|0,d=d+Math.imul(pt,Ft)|0,a=a+Math.imul(pt,Nt)|0,a=a+Math.imul(Bt,Ft)|0,m=m+Math.imul(Bt,Nt)|0,d=d+Math.imul(ht,Pt)|0,a=a+Math.imul(ht,Ot)|0,a=a+Math.imul(dt,Pt)|0,m=m+Math.imul(dt,Ot)|0,d=d+Math.imul(st,qt)|0,a=a+Math.imul(st,Dt)|0,a=a+Math.imul(ct,qt)|0,m=m+Math.imul(ct,Dt)|0,d=d+Math.imul(X,Ht)|0,a=a+Math.imul(X,zt)|0,a=a+Math.imul(Q,Ht)|0,m=m+Math.imul(Q,zt)|0;var Tr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,d=Math.imul(l,it),a=Math.imul(l,At),a=a+Math.imul(S,it)|0,m=Math.imul(S,At),d=d+Math.imul(Mt,It)|0,a=a+Math.imul(Mt,Rt)|0,a=a+Math.imul(_,It)|0,m=m+Math.imul(_,Rt)|0,d=d+Math.imul(wt,Lt)|0,a=a+Math.imul(wt,Tt)|0,a=a+Math.imul(_t,Lt)|0,m=m+Math.imul(_t,Tt)|0,d=d+Math.imul(vt,Ct)|0,a=a+Math.imul(vt,Ut)|0,a=a+Math.imul(gt,Ct)|0,m=m+Math.imul(gt,Ut)|0,d=d+Math.imul(bt,Ft)|0,a=a+Math.imul(bt,Nt)|0,a=a+Math.imul(Et,Ft)|0,m=m+Math.imul(Et,Nt)|0,d=d+Math.imul(pt,Pt)|0,a=a+Math.imul(pt,Ot)|0,a=a+Math.imul(Bt,Pt)|0,m=m+Math.imul(Bt,Ot)|0,d=d+Math.imul(ht,qt)|0,a=a+Math.imul(ht,Dt)|0,a=a+Math.imul(dt,qt)|0,m=m+Math.imul(dt,Dt)|0,d=d+Math.imul(st,Ht)|0,a=a+Math.imul(st,zt)|0,a=a+Math.imul(ct,Ht)|0,m=m+Math.imul(ct,zt)|0;var Cr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,d=Math.imul(l,It),a=Math.imul(l,Rt),a=a+Math.imul(S,It)|0,m=Math.imul(S,Rt),d=d+Math.imul(Mt,Lt)|0,a=a+Math.imul(Mt,Tt)|0,a=a+Math.imul(_,Lt)|0,m=m+Math.imul(_,Tt)|0,d=d+Math.imul(wt,Ct)|0,a=a+Math.imul(wt,Ut)|0,a=a+Math.imul(_t,Ct)|0,m=m+Math.imul(_t,Ut)|0,d=d+Math.imul(vt,Ft)|0,a=a+Math.imul(vt,Nt)|0,a=a+Math.imul(gt,Ft)|0,m=m+Math.imul(gt,Nt)|0,d=d+Math.imul(bt,Pt)|0,a=a+Math.imul(bt,Ot)|0,a=a+Math.imul(Et,Pt)|0,m=m+Math.imul(Et,Ot)|0,d=d+Math.imul(pt,qt)|0,a=a+Math.imul(pt,Dt)|0,a=a+Math.imul(Bt,qt)|0,m=m+Math.imul(Bt,Dt)|0,d=d+Math.imul(ht,Ht)|0,a=a+Math.imul(ht,zt)|0,a=a+Math.imul(dt,Ht)|0,m=m+Math.imul(dt,zt)|0;var Ur=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,d=Math.imul(l,Lt),a=Math.imul(l,Tt),a=a+Math.imul(S,Lt)|0,m=Math.imul(S,Tt),d=d+Math.imul(Mt,Ct)|0,a=a+Math.imul(Mt,Ut)|0,a=a+Math.imul(_,Ct)|0,m=m+Math.imul(_,Ut)|0,d=d+Math.imul(wt,Ft)|0,a=a+Math.imul(wt,Nt)|0,a=a+Math.imul(_t,Ft)|0,m=m+Math.imul(_t,Nt)|0,d=d+Math.imul(vt,Pt)|0,a=a+Math.imul(vt,Ot)|0,a=a+Math.imul(gt,Pt)|0,m=m+Math.imul(gt,Ot)|0,d=d+Math.imul(bt,qt)|0,a=a+Math.imul(bt,Dt)|0,a=a+Math.imul(Et,qt)|0,m=m+Math.imul(Et,Dt)|0,d=d+Math.imul(pt,Ht)|0,a=a+Math.imul(pt,zt)|0,a=a+Math.imul(Bt,Ht)|0,m=m+Math.imul(Bt,zt)|0;var Fr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,d=Math.imul(l,Ct),a=Math.imul(l,Ut),a=a+Math.imul(S,Ct)|0,m=Math.imul(S,Ut),d=d+Math.imul(Mt,Ft)|0,a=a+Math.imul(Mt,Nt)|0,a=a+Math.imul(_,Ft)|0,m=m+Math.imul(_,Nt)|0,d=d+Math.imul(wt,Pt)|0,a=a+Math.imul(wt,Ot)|0,a=a+Math.imul(_t,Pt)|0,m=m+Math.imul(_t,Ot)|0,d=d+Math.imul(vt,qt)|0,a=a+Math.imul(vt,Dt)|0,a=a+Math.imul(gt,qt)|0,m=m+Math.imul(gt,Dt)|0,d=d+Math.imul(bt,Ht)|0,a=a+Math.imul(bt,zt)|0,a=a+Math.imul(Et,Ht)|0,m=m+Math.imul(Et,zt)|0;var Nr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,d=Math.imul(l,Ft),a=Math.imul(l,Nt),a=a+Math.imul(S,Ft)|0,m=Math.imul(S,Nt),d=d+Math.imul(Mt,Pt)|0,a=a+Math.imul(Mt,Ot)|0,a=a+Math.imul(_,Pt)|0,m=m+Math.imul(_,Ot)|0,d=d+Math.imul(wt,qt)|0,a=a+Math.imul(wt,Dt)|0,a=a+Math.imul(_t,qt)|0,m=m+Math.imul(_t,Dt)|0,d=d+Math.imul(vt,Ht)|0,a=a+Math.imul(vt,zt)|0,a=a+Math.imul(gt,Ht)|0,m=m+Math.imul(gt,zt)|0;var Pr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,d=Math.imul(l,Pt),a=Math.imul(l,Ot),a=a+Math.imul(S,Pt)|0,m=Math.imul(S,Ot),d=d+Math.imul(Mt,qt)|0,a=a+Math.imul(Mt,Dt)|0,a=a+Math.imul(_,qt)|0,m=m+Math.imul(_,Dt)|0,d=d+Math.imul(wt,Ht)|0,a=a+Math.imul(wt,zt)|0,a=a+Math.imul(_t,Ht)|0,m=m+Math.imul(_t,zt)|0;var Or=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(Or>>>26)|0,Or&=67108863,d=Math.imul(l,qt),a=Math.imul(l,Dt),a=a+Math.imul(S,qt)|0,m=Math.imul(S,Dt),d=d+Math.imul(Mt,Ht)|0,a=a+Math.imul(Mt,zt)|0,a=a+Math.imul(_,Ht)|0,m=m+Math.imul(_,zt)|0;var qr=(M+d|0)+((a&8191)<<13)|0;M=(m+(a>>>13)|0)+(qr>>>26)|0,qr&=67108863,d=Math.imul(l,Ht),a=Math.imul(l,zt),a=a+Math.imul(S,Ht)|0,m=Math.imul(S,zt);var Dr=(M+d|0)+((a&8191)<<13)|0;return M=(m+(a>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,b[0]=_r,b[1]=Mr,b[2]=Sr,b[3]=Br,b[4]=Er,b[5]=kr,b[6]=Ar,b[7]=Ir,b[8]=Rr,b[9]=Lr,b[10]=Tr,b[11]=Cr,b[12]=Ur,b[13]=Fr,b[14]=Nr,b[15]=Pr,b[16]=Or,b[17]=qr,b[18]=Dr,M!==0&&(b[19]=M,f.length++),f};Math.imul||($=O);function H(y,i,c){c.negative=i.negative^y.negative,c.length=y.length+i.length;for(var f=0,p=0,g=0;g<c.length-1;g++){var b=p;p=0;for(var M=f&67108863,d=Math.min(g,i.length-1),a=Math.max(0,g-y.length+1);a<=d;a++){var m=g-a,N=y.words[m]|0,q=i.words[a]|0,z=N*q,nt=z&67108863;b=b+(z/67108864|0)|0,nt=nt+M|0,M=nt&67108863,b=b+(nt>>>26)|0,p+=b>>>26,b&=67108863}c.words[g]=M,f=b,b=p}return f!==0?c.words[g]=f:c.length--,c._strip()}function Y(y,i,c){return H(y,i,c)}s.prototype.mulTo=function(i,c){var f,p=this.length+i.length;return this.length===10&&i.length===10?f=$(this,i,c):p<63?f=O(this,i,c):p<1024?f=H(this,i,c):f=Y(this,i,c),f},s.prototype.mul=function(i){var c=new s(null);return c.words=new Array(this.length+i.length),this.mulTo(i,c)},s.prototype.mulf=function(i){var c=new s(null);return c.words=new Array(this.length+i.length),Y(this,i,c)},s.prototype.imul=function(i){return this.clone().mulTo(i,this)},s.prototype.imuln=function(i){var c=i<0;c&&(i=-i),r(typeof i=="number"),r(i<67108864);for(var f=0,p=0;p<this.length;p++){var g=(this.words[p]|0)*i,b=(g&67108863)+(f&67108863);f>>=26,f+=g/67108864|0,f+=b>>>26,this.words[p]=b&67108863}return f!==0&&(this.words[p]=f,this.length++),c?this.ineg():this},s.prototype.muln=function(i){return this.clone().imuln(i)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(i){var c=A(i);if(c.length===0)return new s(1);for(var f=this,p=0;p<c.length&&c[p]===0;p++,f=f.sqr());if(++p<c.length)for(var g=f.sqr();p<c.length;p++,g=g.sqr())c[p]!==0&&(f=f.mul(g));return f},s.prototype.iushln=function(i){r(typeof i=="number"&&i>=0);var c=i%26,f=(i-c)/26,p=67108863>>>26-c<<26-c,g;if(c!==0){var b=0;for(g=0;g<this.length;g++){var M=this.words[g]&p,d=(this.words[g]|0)-M<<c;this.words[g]=d|b,b=M>>>26-c}b&&(this.words[g]=b,this.length++)}if(f!==0){for(g=this.length-1;g>=0;g--)this.words[g+f]=this.words[g];for(g=0;g<f;g++)this.words[g]=0;this.length+=f}return this._strip()},s.prototype.ishln=function(i){return r(this.negative===0),this.iushln(i)},s.prototype.iushrn=function(i,c,f){r(typeof i=="number"&&i>=0);var p;c?p=(c-c%26)/26:p=0;var g=i%26,b=Math.min((i-g)/26,this.length),M=67108863^67108863>>>g<<g,d=f;if(p-=b,p=Math.max(0,p),d){for(var a=0;a<b;a++)d.words[a]=this.words[a];d.length=b}if(b!==0)if(this.length>b)for(this.length-=b,a=0;a<this.length;a++)this.words[a]=this.words[a+b];else this.words[0]=0,this.length=1;var m=0;for(a=this.length-1;a>=0&&(m!==0||a>=p);a--){var N=this.words[a]|0;this.words[a]=m<<26-g|N>>>g,m=N&M}return d&&m!==0&&(d.words[d.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(i,c,f){return r(this.negative===0),this.iushrn(i,c,f)},s.prototype.shln=function(i){return this.clone().ishln(i)},s.prototype.ushln=function(i){return this.clone().iushln(i)},s.prototype.shrn=function(i){return this.clone().ishrn(i)},s.prototype.ushrn=function(i){return this.clone().iushrn(i)},s.prototype.testn=function(i){r(typeof i=="number"&&i>=0);var c=i%26,f=(i-c)/26,p=1<<c;if(this.length<=f)return!1;var g=this.words[f];return!!(g&p)},s.prototype.imaskn=function(i){r(typeof i=="number"&&i>=0);var c=i%26,f=(i-c)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(c!==0&&f++,this.length=Math.min(f,this.length),c!==0){var p=67108863^67108863>>>c<<c;this.words[this.length-1]&=p}return this._strip()},s.prototype.maskn=function(i){return this.clone().imaskn(i)},s.prototype.iaddn=function(i){return r(typeof i=="number"),r(i<67108864),i<0?this.isubn(-i):this.negative!==0?this.length===1&&(this.words[0]|0)<=i?(this.words[0]=i-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(i),this.negative=1,this):this._iaddn(i)},s.prototype._iaddn=function(i){this.words[0]+=i;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},s.prototype.isubn=function(i){if(r(typeof i=="number"),r(i<67108864),i<0)return this.iaddn(-i);if(this.negative!==0)return this.negative=0,this.iaddn(i),this.negative=1,this;if(this.words[0]-=i,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},s.prototype.addn=function(i){return this.clone().iaddn(i)},s.prototype.subn=function(i){return this.clone().isubn(i)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(i,c,f){var p=i.length+f,g;this._expand(p);var b,M=0;for(g=0;g<i.length;g++){b=(this.words[g+f]|0)+M;var d=(i.words[g]|0)*c;b-=d&67108863,M=(b>>26)-(d/67108864|0),this.words[g+f]=b&67108863}for(;g<this.length-f;g++)b=(this.words[g+f]|0)+M,M=b>>26,this.words[g+f]=b&67108863;if(M===0)return this._strip();for(r(M===-1),M=0,g=0;g<this.length;g++)b=-(this.words[g]|0)+M,M=b>>26,this.words[g]=b&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(i,c){var f=this.length-i.length,p=this.clone(),g=i,b=g.words[g.length-1]|0,M=this._countBits(b);f=26-M,f!==0&&(g=g.ushln(f),p.iushln(f),b=g.words[g.length-1]|0);var d=p.length-g.length,a;if(c!=="mod"){a=new s(null),a.length=d+1,a.words=new Array(a.length);for(var m=0;m<a.length;m++)a.words[m]=0}var N=p.clone()._ishlnsubmul(g,1,d);N.negative===0&&(p=N,a&&(a.words[d]=1));for(var q=d-1;q>=0;q--){var z=(p.words[g.length+q]|0)*67108864+(p.words[g.length+q-1]|0);for(z=Math.min(z/b|0,67108863),p._ishlnsubmul(g,z,q);p.negative!==0;)z--,p.negative=0,p._ishlnsubmul(g,1,q),p.isZero()||(p.negative^=1);a&&(a.words[q]=z)}return a&&a._strip(),p._strip(),c!=="div"&&f!==0&&p.iushrn(f),{div:a||null,mod:p}},s.prototype.divmod=function(i,c,f){if(r(!i.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var p,g,b;return this.negative!==0&&i.negative===0?(b=this.neg().divmod(i,c),c!=="mod"&&(p=b.div.neg()),c!=="div"&&(g=b.mod.neg(),f&&g.negative!==0&&g.iadd(i)),{div:p,mod:g}):this.negative===0&&i.negative!==0?(b=this.divmod(i.neg(),c),c!=="mod"&&(p=b.div.neg()),{div:p,mod:b.mod}):this.negative&i.negative?(b=this.neg().divmod(i.neg(),c),c!=="div"&&(g=b.mod.neg(),f&&g.negative!==0&&g.isub(i)),{div:b.div,mod:g}):i.length>this.length||this.cmp(i)<0?{div:new s(0),mod:this}:i.length===1?c==="div"?{div:this.divn(i.words[0]),mod:null}:c==="mod"?{div:null,mod:new s(this.modrn(i.words[0]))}:{div:this.divn(i.words[0]),mod:new s(this.modrn(i.words[0]))}:this._wordDiv(i,c)},s.prototype.div=function(i){return this.divmod(i,"div",!1).div},s.prototype.mod=function(i){return this.divmod(i,"mod",!1).mod},s.prototype.umod=function(i){return this.divmod(i,"mod",!0).mod},s.prototype.divRound=function(i){var c=this.divmod(i);if(c.mod.isZero())return c.div;var f=c.div.negative!==0?c.mod.isub(i):c.mod,p=i.ushrn(1),g=i.andln(1),b=f.cmp(p);return b<0||g===1&&b===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},s.prototype.modrn=function(i){var c=i<0;c&&(i=-i),r(i<=67108863);for(var f=(1<<26)%i,p=0,g=this.length-1;g>=0;g--)p=(f*p+(this.words[g]|0))%i;return c?-p:p},s.prototype.modn=function(i){return this.modrn(i)},s.prototype.idivn=function(i){var c=i<0;c&&(i=-i),r(i<=67108863);for(var f=0,p=this.length-1;p>=0;p--){var g=(this.words[p]|0)+f*67108864;this.words[p]=g/i|0,f=g%i}return this._strip(),c?this.ineg():this},s.prototype.divn=function(i){return this.clone().idivn(i)},s.prototype.egcd=function(i){r(i.negative===0),r(!i.isZero());var c=this,f=i.clone();c.negative!==0?c=c.umod(i):c=c.clone();for(var p=new s(1),g=new s(0),b=new s(0),M=new s(1),d=0;c.isEven()&&f.isEven();)c.iushrn(1),f.iushrn(1),++d;for(var a=f.clone(),m=c.clone();!c.isZero();){for(var N=0,q=1;!(c.words[0]&q)&&N<26;++N,q<<=1);if(N>0)for(c.iushrn(N);N-- >0;)(p.isOdd()||g.isOdd())&&(p.iadd(a),g.isub(m)),p.iushrn(1),g.iushrn(1);for(var z=0,nt=1;!(f.words[0]&nt)&&z<26;++z,nt<<=1);if(z>0)for(f.iushrn(z);z-- >0;)(b.isOdd()||M.isOdd())&&(b.iadd(a),M.isub(m)),b.iushrn(1),M.iushrn(1);c.cmp(f)>=0?(c.isub(f),p.isub(b),g.isub(M)):(f.isub(c),b.isub(p),M.isub(g))}return{a:b,b:M,gcd:f.iushln(d)}},s.prototype._invmp=function(i){r(i.negative===0),r(!i.isZero());var c=this,f=i.clone();c.negative!==0?c=c.umod(i):c=c.clone();for(var p=new s(1),g=new s(0),b=f.clone();c.cmpn(1)>0&&f.cmpn(1)>0;){for(var M=0,d=1;!(c.words[0]&d)&&M<26;++M,d<<=1);if(M>0)for(c.iushrn(M);M-- >0;)p.isOdd()&&p.iadd(b),p.iushrn(1);for(var a=0,m=1;!(f.words[0]&m)&&a<26;++a,m<<=1);if(a>0)for(f.iushrn(a);a-- >0;)g.isOdd()&&g.iadd(b),g.iushrn(1);c.cmp(f)>=0?(c.isub(f),p.isub(g)):(f.isub(c),g.isub(p))}var N;return c.cmpn(1)===0?N=p:N=g,N.cmpn(0)<0&&N.iadd(i),N},s.prototype.gcd=function(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var c=this.clone(),f=i.clone();c.negative=0,f.negative=0;for(var p=0;c.isEven()&&f.isEven();p++)c.iushrn(1),f.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;f.isEven();)f.iushrn(1);var g=c.cmp(f);if(g<0){var b=c;c=f,f=b}else if(g===0||f.cmpn(1)===0)break;c.isub(f)}while(!0);return f.iushln(p)},s.prototype.invm=function(i){return this.egcd(i).a.umod(i)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(i){return this.words[0]&i},s.prototype.bincn=function(i){r(typeof i=="number");var c=i%26,f=(i-c)/26,p=1<<c;if(this.length<=f)return this._expand(f+1),this.words[f]|=p,this;for(var g=p,b=f;g!==0&&b<this.length;b++){var M=this.words[b]|0;M+=g,g=M>>>26,M&=67108863,this.words[b]=M}return g!==0&&(this.words[b]=g,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(i){var c=i<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var f;if(this.length>1)f=1;else{c&&(i=-i),r(i<=67108863,"Number is too big");var p=this.words[0]|0;f=p===i?0:p<i?-1:1}return this.negative!==0?-f|0:f},s.prototype.cmp=function(i){if(this.negative!==0&&i.negative===0)return-1;if(this.negative===0&&i.negative!==0)return 1;var c=this.ucmp(i);return this.negative!==0?-c|0:c},s.prototype.ucmp=function(i){if(this.length>i.length)return 1;if(this.length<i.length)return-1;for(var c=0,f=this.length-1;f>=0;f--){var p=this.words[f]|0,g=i.words[f]|0;if(p!==g){p<g?c=-1:p>g&&(c=1);break}}return c},s.prototype.gtn=function(i){return this.cmpn(i)===1},s.prototype.gt=function(i){return this.cmp(i)===1},s.prototype.gten=function(i){return this.cmpn(i)>=0},s.prototype.gte=function(i){return this.cmp(i)>=0},s.prototype.ltn=function(i){return this.cmpn(i)===-1},s.prototype.lt=function(i){return this.cmp(i)===-1},s.prototype.lten=function(i){return this.cmpn(i)<=0},s.prototype.lte=function(i){return this.cmp(i)<=0},s.prototype.eqn=function(i){return this.cmpn(i)===0},s.prototype.eq=function(i){return this.cmp(i)===0},s.red=function(i){return new G(i)},s.prototype.toRed=function(i){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),i.convertTo(this)._forceRed(i)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(i){return this.red=i,this},s.prototype.forceRed=function(i){return r(!this.red,"Already a number in reduction context"),this._forceRed(i)},s.prototype.redAdd=function(i){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,i)},s.prototype.redIAdd=function(i){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,i)},s.prototype.redSub=function(i){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,i)},s.prototype.redISub=function(i){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,i)},s.prototype.redShl=function(i){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,i)},s.prototype.redMul=function(i){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.mul(this,i)},s.prototype.redIMul=function(i){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.imul(this,i)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(i){return r(this.red&&!i.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,i)};var V={k256:null,p224:null,p192:null,p25519:null};function K(y,i){this.name=y,this.p=new s(i,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}K.prototype._tmp=function(){var i=new s(null);return i.words=new Array(Math.ceil(this.n/13)),i},K.prototype.ireduce=function(i){var c=i,f;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),f=c.bitLength();while(f>this.n);var p=f<this.n?-1:c.ucmp(this.p);return p===0?(c.words[0]=0,c.length=1):p>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},K.prototype.split=function(i,c){i.iushrn(this.n,0,c)},K.prototype.imulK=function(i){return i.imul(this.k)};function J(){K.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(J,K),J.prototype.split=function(i,c){for(var f=4194303,p=Math.min(i.length,9),g=0;g<p;g++)c.words[g]=i.words[g];if(c.length=p,i.length<=9){i.words[0]=0,i.length=1;return}var b=i.words[9];for(c.words[c.length++]=b&f,g=10;g<i.length;g++){var M=i.words[g]|0;i.words[g-10]=(M&f)<<4|b>>>22,b=M}b>>>=22,i.words[g-10]=b,b===0&&i.length>10?i.length-=10:i.length-=9},J.prototype.imulK=function(i){i.words[i.length]=0,i.words[i.length+1]=0,i.length+=2;for(var c=0,f=0;f<i.length;f++){var p=i.words[f]|0;c+=p*977,i.words[f]=c&67108863,c=p*64+(c/67108864|0)}return i.words[i.length-1]===0&&(i.length--,i.words[i.length-1]===0&&i.length--),i};function rt(){K.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(rt,K);function Gt(){K.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(Gt,K);function St(){K.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(St,K),St.prototype.imulK=function(i){for(var c=0,f=0;f<i.length;f++){var p=(i.words[f]|0)*19+c,g=p&67108863;p>>>=26,i.words[f]=g,c=p}return c!==0&&(i.words[i.length++]=c),i},s._prime=function(i){if(V[i])return V[i];var c;if(i==="k256")c=new J;else if(i==="p224")c=new rt;else if(i==="p192")c=new Gt;else if(i==="p25519")c=new St;else throw new Error("Unknown prime "+i);return V[i]=c,c};function G(y){if(typeof y=="string"){var i=s._prime(y);this.m=i.p,this.prime=i}else r(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}G.prototype._verify1=function(i){r(i.negative===0,"red works only with positives"),r(i.red,"red works only with red numbers")},G.prototype._verify2=function(i,c){r((i.negative|c.negative)===0,"red works only with positives"),r(i.red&&i.red===c.red,"red works only with red numbers")},G.prototype.imod=function(i){return this.prime?this.prime.ireduce(i)._forceRed(this):(x(i,i.umod(this.m)._forceRed(this)),i)},G.prototype.neg=function(i){return i.isZero()?i.clone():this.m.sub(i)._forceRed(this)},G.prototype.add=function(i,c){this._verify2(i,c);var f=i.add(c);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},G.prototype.iadd=function(i,c){this._verify2(i,c);var f=i.iadd(c);return f.cmp(this.m)>=0&&f.isub(this.m),f},G.prototype.sub=function(i,c){this._verify2(i,c);var f=i.sub(c);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},G.prototype.isub=function(i,c){this._verify2(i,c);var f=i.isub(c);return f.cmpn(0)<0&&f.iadd(this.m),f},G.prototype.shl=function(i,c){return this._verify1(i),this.imod(i.ushln(c))},G.prototype.imul=function(i,c){return this._verify2(i,c),this.imod(i.imul(c))},G.prototype.mul=function(i,c){return this._verify2(i,c),this.imod(i.mul(c))},G.prototype.isqr=function(i){return this.imul(i,i.clone())},G.prototype.sqr=function(i){return this.mul(i,i)},G.prototype.sqrt=function(i){if(i.isZero())return i.clone();var c=this.m.andln(3);if(r(c%2===1),c===3){var f=this.m.add(new s(1)).iushrn(2);return this.pow(i,f)}for(var p=this.m.subn(1),g=0;!p.isZero()&&p.andln(1)===0;)g++,p.iushrn(1);r(!p.isZero());var b=new s(1).toRed(this),M=b.redNeg(),d=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new s(2*a*a).toRed(this);this.pow(a,d).cmp(M)!==0;)a.redIAdd(M);for(var m=this.pow(a,p),N=this.pow(i,p.addn(1).iushrn(1)),q=this.pow(i,p),z=g;q.cmp(b)!==0;){for(var nt=q,X=0;nt.cmp(b)!==0;X++)nt=nt.redSqr();r(X<z);var Q=this.pow(m,new s(1).iushln(z-X-1));N=N.redMul(Q),m=Q.redSqr(),q=q.redMul(m),z=X}return N},G.prototype.invm=function(i){var c=i._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},G.prototype.pow=function(i,c){if(c.isZero())return new s(1).toRed(this);if(c.cmpn(1)===0)return i.clone();var f=4,p=new Array(1<<f);p[0]=new s(1).toRed(this),p[1]=i;for(var g=2;g<p.length;g++)p[g]=this.mul(p[g-1],i);var b=p[0],M=0,d=0,a=c.bitLength()%26;for(a===0&&(a=26),g=c.length-1;g>=0;g--){for(var m=c.words[g],N=a-1;N>=0;N--){var q=m>>N&1;if(b!==p[0]&&(b=this.sqr(b)),q===0&&M===0){d=0;continue}M<<=1,M|=q,d++,!(d!==f&&(g!==0||N!==0))&&(b=this.mul(b,p[M]),d=0,M=0)}a=26}return b},G.prototype.convertTo=function(i){var c=i.umod(this.m);return c===i?c.clone():c},G.prototype.convertFrom=function(i){var c=i.clone();return c.red=null,c},s.mont=function(i){return new D(i)};function D(y){G.call(this,y),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(D,G),D.prototype.convertTo=function(i){return this.imod(i.ushln(this.shift))},D.prototype.convertFrom=function(i){var c=this.imod(i.mul(this.rinv));return c.red=null,c},D.prototype.imul=function(i,c){if(i.isZero()||c.isZero())return i.words[0]=0,i.length=1,i;var f=i.imul(c),p=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=f.isub(p).iushrn(this.shift),b=g;return g.cmp(this.m)>=0?b=g.isub(this.m):g.cmpn(0)<0&&(b=g.iadd(this.m)),b._forceRed(this)},D.prototype.mul=function(i,c){if(i.isZero()||c.isZero())return new s(0)._forceRed(this);var f=i.mul(c),p=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=f.isub(p).iushrn(this.shift),b=g;return g.cmp(this.m)>=0?b=g.isub(this.m):g.cmpn(0)<0&&(b=g.iadd(this.m)),b._forceRed(this)},D.prototype.invm=function(i){var c=this.imod(i._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(n,$e)})(fs);var $u=fs.exports;function sr(n,t,e){return t<=n&&n<=e}function fi(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function Ku(n){for(var t=String(n),e=t.length,r=0,o=[];r<e;){var s=t.charCodeAt(r);if(s<55296||s>57343)o.push(s);else if(56320<=s&&s<=57343)o.push(65533);else if(55296<=s&&s<=56319)if(r===e-1)o.push(65533);else{var u=n.charCodeAt(r+1);if(56320<=u&&u<=57343){var w=s&1023,v=u&1023;o.push(65536+(w<<10)+v),r+=1}else o.push(65533)}r+=1}return o}function Wu(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Yn=-1;function hs(n){this.tokens=[].slice.call(n)}hs.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Yn},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var fn=-1;function Si(n,t){if(n)throw TypeError("Decoder error");return t||65533}var Xn="utf-8";function Jn(n,t){if(!(this instanceof Jn))return new Jn(n,t);if(n=n!==void 0?String(n).toLowerCase():Xn,n!==Xn)throw new Error("Encoding not supported. Only utf-8 is supported");t=fi(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Jn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=fi(e),this._streaming||(this._decoder=new Vu({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var o=new hs(r),s=[],u;!o.endOfStream()&&(u=this._decoder.handler(o,o.read()),u!==fn);)u!==null&&(Array.isArray(u)?s.push.apply(s,u):s.push(u));if(!this._streaming){do{if(u=this._decoder.handler(o,o.read()),u===fn)break;u!==null&&(Array.isArray(u)?s.push.apply(s,u):s.push(u))}while(!o.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),Wu(s)}};function Qn(n,t){if(!(this instanceof Qn))return new Qn(n,t);if(n=n!==void 0?String(n).toLowerCase():Xn,n!==Xn)throw new Error("Encoding not supported. Only utf-8 is supported");t=fi(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Qn.prototype={encode:function(t,e){t=t?String(t):"",e=fi(e),this._streaming||(this._encoder=new Gu(this._options)),this._streaming=!!e.stream;for(var r=[],o=new hs(Ku(t)),s;!o.endOfStream()&&(s=this._encoder.handler(o,o.read()),s!==fn);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(o,o.read()),s!==fn;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function Vu(n){var t=n.fatal,e=0,r=0,o=0,s=128,u=191;this.handler=function(w,v){if(v===Yn&&o!==0)return o=0,Si(t);if(v===Yn)return fn;if(o===0){if(sr(v,0,127))return v;if(sr(v,194,223))o=1,e=v-192;else if(sr(v,224,239))v===224&&(s=160),v===237&&(u=159),o=2,e=v-224;else if(sr(v,240,244))v===240&&(s=144),v===244&&(u=143),o=3,e=v-240;else return Si(t);return e=e<<6*o,null}if(!sr(v,s,u))return e=o=r=0,s=128,u=191,w.prepend(v),Si(t);if(s=128,u=191,r+=1,e+=v-128<<6*(o-r),r!==o)return null;var B=e;return e=o=r=0,B}}function Gu(n){n.fatal,this.handler=function(t,e){if(e===Yn)return fn;if(sr(e,0,127))return e;var r,o;sr(e,128,2047)?(r=1,o=192):sr(e,2048,65535)?(r=2,o=224):sr(e,65536,1114111)&&(r=3,o=240);for(var s=[(e>>6*r)+o];r>0;){var u=e>>6*(r-1);s.push(128|u&63),r-=1}return s}}const ju=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Jn,TextEncoder:Qn},Symbol.toStringTag,{value:"Module"})),Zu=Xi(ju);var Yu=$e&&$e.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e),Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),Xu=$e&&$e.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),tr=$e&&$e.__decorate||function(n,t,e,r){var o=arguments.length,s=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,e,r);else for(var w=n.length-1;w>=0;w--)(u=n[w])&&(s=(o<3?u(s):o>3?u(t,e,s):u(t,e))||s);return o>3&&s&&Object.defineProperty(t,e,s),s},Ju=$e&&$e.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.hasOwnProperty.call(n,e)&&Yu(t,n,e);return Xu(t,n),t},Wo=$e&&$e.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(xe,"__esModule",{value:!0});var Vo=xe.deserializeUnchecked=Jo=xe.deserialize=Xo=xe.serialize=xe.BinaryReader=xe.BinaryWriter=xe.BorshError=xe.baseDecode=xe.baseEncode=void 0;const gr=Wo($u),Go=Wo(Ho),Qu=Ju(Zu),tf=typeof TextDecoder!="function"?Qu.TextDecoder:TextDecoder,ef=new tf("utf-8",{fatal:!0});function rf(n){return typeof n=="string"&&(n=ae.from(n,"utf8")),Go.default.encode(ae.from(n))}xe.baseEncode=rf;function nf(n){return ae.from(Go.default.decode(n))}xe.baseDecode=nf;const Bi=1024;class ke extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}xe.BorshError=ke;class jo{constructor(){this.buf=ae.alloc(Bi),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=ae.concat([this.buf,ae.alloc(Bi)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(ae.from(new gr.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(ae.from(new gr.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(ae.from(new gr.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(ae.from(new gr.default(t).toArray("le",64)))}writeBuffer(t){this.buf=ae.concat([ae.from(this.buf.subarray(0,this.length)),t,ae.alloc(Bi)]),this.length+=t.length}writeString(t){this.maybeResize();const e=ae.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(ae.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}xe.BinaryWriter=jo;function er(n,t,e){const r=e.value;e.value=function(...o){try{return r.apply(this,o)}catch(s){if(s instanceof RangeError){const u=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(u)>=0)throw new ke("Reached the end of buffer when deserializing")}throw s}}}class Ce{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new gr.default(t,"le")}readU128(){const t=this.readBuffer(16);return new gr.default(t,"le")}readU256(){const t=this.readBuffer(32);return new gr.default(t,"le")}readU512(){const t=this.readBuffer(64);return new gr.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new ke(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return ef.decode(e)}catch(r){throw new ke(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let o=0;o<e;++o)r.push(t());return r}}tr([er],Ce.prototype,"readU8",null);tr([er],Ce.prototype,"readU16",null);tr([er],Ce.prototype,"readU32",null);tr([er],Ce.prototype,"readU64",null);tr([er],Ce.prototype,"readU128",null);tr([er],Ce.prototype,"readU256",null);tr([er],Ce.prototype,"readU512",null);tr([er],Ce.prototype,"readString",null);tr([er],Ce.prototype,"readFixedArray",null);tr([er],Ce.prototype,"readArray",null);xe.BinaryReader=Ce;function Zo(n){return n.charAt(0).toUpperCase()+n.slice(1)}function zr(n,t,e,r,o){try{if(typeof r=="string")o[`write${Zo(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new ke(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);o.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new ke(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let s=0;s<r[1];s++)zr(n,null,e[s],r[0],o)}else o.writeArray(e,s=>{zr(n,t,s,r[0],o)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?o.writeU8(0):(o.writeU8(1),zr(n,t,e,r.type,o));break}case"map":{o.writeU32(e.size),e.forEach((s,u)=>{zr(n,t,u,r.key,o),zr(n,t,s,r.value,o)});break}default:throw new ke(`FieldType ${r} unrecognized`)}else Yo(n,e,o)}catch(s){throw s instanceof ke&&s.addToFieldPath(t),s}}function Yo(n,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=n.get(t.constructor);if(!r)throw new ke(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([o,s])=>{zr(n,o,t[o],s,e)});else if(r.kind==="enum"){const o=t[r.field];for(let s=0;s<r.values.length;++s){const[u,w]=r.values[s];if(u===o){e.writeU8(s),zr(n,u,t[u],w,e);break}}}else throw new ke(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function sf(n,t,e=jo){const r=new e;return Yo(n,t,r),r.toArray()}var Xo=xe.serialize=sf;function $r(n,t,e,r){try{if(typeof e=="string")return r[`read${Zo(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const o=[];for(let s=0;s<e[1];s++)o.push($r(n,null,e[0],r));return o}else return r.readArray(()=>$r(n,t,e[0],r))}if(e.kind==="option")return r.readU8()?$r(n,t,e.type,r):void 0;if(e.kind==="map"){let o=new Map;const s=r.readU32();for(let u=0;u<s;u++){const w=$r(n,t,e.key,r),v=$r(n,t,e.value,r);o.set(w,v)}return o}return ls(n,e,r)}catch(o){throw o instanceof ke&&o.addToFieldPath(t),o}}function ls(n,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=n.get(t);if(!r)throw new ke(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const o={};for(const[s,u]of n.get(t).fields)o[s]=$r(n,s,u,e);return new t(o)}if(r.kind==="enum"){const o=e.readU8();if(o>=r.values.length)throw new ke(`Enum index: ${o} is out of range`);const[s,u]=r.values[o],w=$r(n,s,u,e);return new t({[s]:w})}throw new ke(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function of(n,t,e,r=Ce){const o=new r(e),s=ls(n,t,o);if(o.offset<e.length)throw new ke(`Unexpected ${e.length-o.offset} bytes after deserialized data`);return s}var Jo=xe.deserialize=of;function af(n,t,e,r=Ce){const o=new r(e);return ls(n,t,o)}Vo=xe.deserializeUnchecked=af;var P={};Object.defineProperty(P,"__esModule",{value:!0});P.s16=P.s8=P.nu64be=P.u48be=P.u40be=P.u32be=P.u24be=P.u16be=be=P.nu64=P.u48=P.u40=lt=P.u32=P.u24=Oe=P.u16=Zt=P.u8=Vr=P.offset=P.greedy=P.Constant=P.UTF8=P.CString=P.Blob=P.Boolean=P.BitField=P.BitStructure=P.VariantLayout=P.Union=P.UnionLayoutDiscriminator=P.UnionDiscriminator=P.Structure=P.Sequence=P.DoubleBE=P.Double=P.FloatBE=P.Float=P.NearInt64BE=P.NearInt64=P.NearUInt64BE=P.NearUInt64=P.IntBE=P.Int=P.UIntBE=P.UInt=P.OffsetLayout=P.GreedyCount=P.ExternalLayout=P.bindConstructorLayout=P.nameWithProperty=P.Layout=P.uint8ArrayToBuffer=P.checkUint8Array=void 0;P.constant=P.utf8=P.cstr=se=P.blob=P.unionLayoutDiscriminator=P.union=Ae=P.seq=P.bits=ut=P.struct=P.f64be=P.f64=P.f32be=P.f32=P.ns64be=P.s48be=P.s40be=P.s32be=P.s24be=P.s16be=Te=P.ns64=P.s48=P.s40=P.s32=P.s24=void 0;const ds=ui;function gn(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}P.checkUint8Array=gn;function jt(n){return gn(n),ds.Buffer.from(n.buffer,n.byteOffset,n.length)}P.uint8ArrayToBuffer=jt;class Xt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}P.Layout=Xt;function ps(n,t){return t.property?n+"["+t.property+"]":n}P.nameWithProperty=ps;function cf(n,t){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Xt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=t,t.boundConstructor_=n,t.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(n,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}P.bindConstructorLayout=cf;class Ie extends Xt{isCount(){throw new Error("ExternalLayout is abstract")}}P.ExternalLayout=Ie;class Qo extends Ie{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){gn(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}P.GreedyCount=Qo;class gs extends Ie{constructor(t,e=0,r){if(!(t instanceof Xt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof ze||this.layout instanceof Ge}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}P.OffsetLayout=gs;class ze extends Xt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return jt(t).readUIntLE(e,this.span)}encode(t,e,r=0){return jt(e).writeUIntLE(t,r,this.span),this.span}}P.UInt=ze;class Ge extends Xt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return jt(t).readUIntBE(e,this.span)}encode(t,e,r=0){return jt(e).writeUIntBE(t,r,this.span),this.span}}P.UIntBE=Ge;class Xr extends Xt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return jt(t).readIntLE(e,this.span)}encode(t,e,r=0){return jt(e).writeIntLE(t,r,this.span),this.span}}P.Int=Xr;class mn extends Xt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return jt(t).readIntBE(e,this.span)}encode(t,e,r=0){return jt(e).writeIntBE(t,r,this.span),this.span}}P.IntBE=mn;const Hi=Math.pow(2,32);function hi(n){const t=Math.floor(n/Hi),e=n-t*Hi;return{hi32:t,lo32:e}}function li(n,t){return n*Hi+t}class ta extends Xt{constructor(t){super(8,t)}decode(t,e=0){const r=jt(t),o=r.readUInt32LE(e),s=r.readUInt32LE(e+4);return li(s,o)}encode(t,e,r=0){const o=hi(t),s=jt(e);return s.writeUInt32LE(o.lo32,r),s.writeUInt32LE(o.hi32,r+4),8}}P.NearUInt64=ta;class ea extends Xt{constructor(t){super(8,t)}decode(t,e=0){const r=jt(t),o=r.readUInt32BE(e),s=r.readUInt32BE(e+4);return li(o,s)}encode(t,e,r=0){const o=hi(t),s=jt(e);return s.writeUInt32BE(o.hi32,r),s.writeUInt32BE(o.lo32,r+4),8}}P.NearUInt64BE=ea;class ra extends Xt{constructor(t){super(8,t)}decode(t,e=0){const r=jt(t),o=r.readUInt32LE(e),s=r.readInt32LE(e+4);return li(s,o)}encode(t,e,r=0){const o=hi(t),s=jt(e);return s.writeUInt32LE(o.lo32,r),s.writeInt32LE(o.hi32,r+4),8}}P.NearInt64=ra;class na extends Xt{constructor(t){super(8,t)}decode(t,e=0){const r=jt(t),o=r.readInt32BE(e),s=r.readUInt32BE(e+4);return li(o,s)}encode(t,e,r=0){const o=hi(t),s=jt(e);return s.writeInt32BE(o.hi32,r),s.writeUInt32BE(o.lo32,r+4),8}}P.NearInt64BE=na;class ia extends Xt{constructor(t){super(4,t)}decode(t,e=0){return jt(t).readFloatLE(e)}encode(t,e,r=0){return jt(e).writeFloatLE(t,r),4}}P.Float=ia;class sa extends Xt{constructor(t){super(4,t)}decode(t,e=0){return jt(t).readFloatBE(e)}encode(t,e,r=0){return jt(e).writeFloatBE(t,r),4}}P.FloatBE=sa;class oa extends Xt{constructor(t){super(8,t)}decode(t,e=0){return jt(t).readDoubleLE(e)}encode(t,e,r=0){return jt(e).writeDoubleLE(t,r),8}}P.Double=oa;class aa extends Xt{constructor(t){super(8,t)}decode(t,e=0){return jt(t).readDoubleBE(e)}encode(t,e,r=0){return jt(e).writeDoubleBE(t,r),8}}P.DoubleBE=aa;class ca extends Xt{constructor(t,e,r){if(!(t instanceof Xt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Ie&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let o=-1;!(e instanceof Ie)&&0<t.span&&(o=e*t.span),super(o,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,o=this.count;if(o instanceof Ie&&(o=o.decode(t,e)),0<this.elementLayout.span)r=o*this.elementLayout.span;else{let s=0;for(;s<o;)r+=this.elementLayout.getSpan(t,e+r),++s}return r}decode(t,e=0){const r=[];let o=0,s=this.count;for(s instanceof Ie&&(s=s.decode(t,e));o<s;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),o+=1;return r}encode(t,e,r=0){const o=this.elementLayout,s=t.reduce((u,w)=>u+o.encode(w,e,r+u),0);return this.count instanceof Ie&&this.count.encode(t.length,e,r),s}}P.Sequence=ca;class ua extends Xt{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((s,u)=>s&&u instanceof Xt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const s of t)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let o=-1;try{o=t.reduce((s,u)=>s+u.getSpan(),0)}catch{}super(o,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((o,s)=>{const u=s.getSpan(t,e);return e+=u,o+u},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){gn(t);const r=this.makeDestinationObject();for(const o of this.fields)if(o.property!==void 0&&(r[o.property]=o.decode(t,e)),e+=o.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const o=r;let s=0,u=0;for(const w of this.fields){let v=w.span;if(u=0<v?v:0,w.property!==void 0){const B=t[w.property];B!==void 0&&(u=w.encode(B,e,r),0>v&&(v=w.getSpan(e,r)))}s=r,r+=v}return s+u-o}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}P.Structure=ua;class ms{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}P.UnionDiscriminator=ms;class ti extends ms{constructor(t,e){if(!(t instanceof Ie&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}P.UnionLayoutDiscriminator=ti;class ys extends Xt{constructor(t,e,r){let o;if(t instanceof ze||t instanceof Ge)o=new ti(new gs(t));else if(t instanceof Ie&&t.isCount())o=new ti(t);else if(t instanceof ms)o=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Xt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let s=-1;e&&(s=e.span,0<=s&&(t instanceof ze||t instanceof Ge)&&(s+=o.layout.span)),super(s,r),this.discriminator=o,this.usesPrefixDiscriminator=t instanceof ze||t instanceof Ge,this.defaultLayout=e,this.registry={};let u=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(w){return u(w)},this.configGetSourceVariant=function(w){u=w.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const o=this.discriminator,s=o.decode(t,e),u=this.registry[s];if(u===void 0){const w=this.defaultLayout;let v=0;this.usesPrefixDiscriminator&&(v=o.layout.span),r=this.makeDestinationObject(),r[o.property]=s,r[w.property]=w.decode(t,e+v)}else r=u.decode(t,e);return r}encode(t,e,r=0){const o=this.getSourceVariant(t);if(o===void 0){const s=this.discriminator,u=this.defaultLayout;let w=0;return this.usesPrefixDiscriminator&&(w=s.layout.span),s.encode(t[s.property],e,r),w+u.encode(t[u.property],e,r+w)}return o.encode(t,e,r)}addVariant(t,e,r){const o=new fa(this,t,e,r);return this.registry[t]=o,o}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}P.Union=ys;class fa extends Xt{constructor(t,e,r,o){if(!(t instanceof ys))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&o===void 0&&(o=r,r=null),r){if(!(r instanceof Xt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof o!="string")throw new TypeError("variant must have a String property")}let s=t.span;0>t.span&&(s=r?r.span:0,0<=s&&t.usesPrefixDiscriminator&&(s+=t.discriminator.layout.span)),super(s,o),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let o=0;return this.layout&&(o=this.layout.getSpan(t,e+r)),r+o}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let o=0;return this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+o):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let o=0;if(this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let s=o;if(this.layout&&(this.layout.encode(t[this.property],e,r+o),s+=this.layout.getSpan(e,r+o),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}P.VariantLayout=fa;function rn(n){return 0>n&&(n+=4294967296),n}class ws extends Xt{constructor(t,e,r){if(!(t instanceof ze||t instanceof Ge))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let o=0;this._packedSetValue=function(s){return o=rn(s),this},this._packedGetValue=function(){return o}}decode(t,e=0){const r=this.makeDestinationObject(),o=this.word.decode(t,e);this._packedSetValue(o);for(const s of this.fields)s.property!==void 0&&(r[s.property]=s.decode(t));return r}encode(t,e,r=0){const o=this.word.decode(e,r);this._packedSetValue(o);for(const s of this.fields)if(s.property!==void 0){const u=t[s.property];u!==void 0&&s.encode(u)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new bs(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new ha(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}P.BitStructure=ws;class bs{constructor(t,e,r){if(!(t instanceof ws))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const o=8*t.span,s=t.fields.reduce((u,w)=>u+w.bits,0);if(e+s>o)throw new Error("bits too long for span remainder ("+(o-s)+" of "+o+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=o-s-e),this.wordMask=rn(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return rn(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==rn(t&this.valueMask))throw new TypeError(ps("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=rn(t<<this.start);this.container._packedSetValue(rn(e&~this.wordMask)|r)}}P.BitField=bs;let ha=class extends bs{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};P.Boolean=ha;class la extends Xt{constructor(t,e){if(!(t instanceof Ie&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Ie||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),jt(t).slice(e,e+r)}encode(t,e,r){let o=this.length;if(this.length instanceof Ie&&(o=t.length),!(t instanceof Uint8Array&&o===t.length))throw new TypeError(ps("Blob.encode",this)+" requires (length "+o+") Uint8Array as src");if(r+o>e.length)throw new RangeError("encoding overruns Uint8Array");const s=jt(t);return jt(e).write(s.toString("hex"),r,o,"hex"),this.length instanceof Ie&&this.length.encode(o,e,r),o}}P.Blob=la;class da extends Xt{constructor(t){super(-1,t)}getSpan(t,e=0){gn(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return jt(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const o=ds.Buffer.from(t,"utf8"),s=o.length;if(r+s>e.length)throw new RangeError("encoding overruns Buffer");const u=jt(e);return o.copy(u,r),u[r+s]=0,s+1}}P.CString=da;class pa extends Xt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return gn(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return jt(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const o=ds.Buffer.from(t,"utf8"),s=o.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>e.length)throw new RangeError("encoding overruns Buffer");return o.copy(jt(e),r),s}}P.UTF8=pa;class ga extends Xt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}P.Constant=ga;P.greedy=(n,t)=>new Qo(n,t);var Vr=P.offset=(n,t,e)=>new gs(n,t,e),Zt=P.u8=n=>new ze(1,n),Oe=P.u16=n=>new ze(2,n);P.u24=n=>new ze(3,n);var lt=P.u32=n=>new ze(4,n);P.u40=n=>new ze(5,n);P.u48=n=>new ze(6,n);var be=P.nu64=n=>new ta(n);P.u16be=n=>new Ge(2,n);P.u24be=n=>new Ge(3,n);P.u32be=n=>new Ge(4,n);P.u40be=n=>new Ge(5,n);P.u48be=n=>new Ge(6,n);P.nu64be=n=>new ea(n);P.s8=n=>new Xr(1,n);P.s16=n=>new Xr(2,n);P.s24=n=>new Xr(3,n);P.s32=n=>new Xr(4,n);P.s40=n=>new Xr(5,n);P.s48=n=>new Xr(6,n);var Te=P.ns64=n=>new ra(n);P.s16be=n=>new mn(2,n);P.s24be=n=>new mn(3,n);P.s32be=n=>new mn(4,n);P.s40be=n=>new mn(5,n);P.s48be=n=>new mn(6,n);P.ns64be=n=>new na(n);P.f32=n=>new ia(n);P.f32be=n=>new sa(n);P.f64=n=>new oa(n);P.f64be=n=>new aa(n);var ut=P.struct=(n,t,e)=>new ua(n,t,e);P.bits=(n,t,e)=>new ws(n,t,e);var Ae=P.seq=(n,t,e)=>new ca(n,t,e);P.union=(n,t,e)=>new ys(n,t,e);P.unionLayoutDiscriminator=(n,t)=>new ti(n,t);var se=P.blob=(n,t)=>new la(n,t);P.cstr=n=>new da(n);P.utf8=(n,t)=>new pa(n,t);P.constant=(n,t)=>new ga(n,t);var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});function uf(n){{const t=ae.from(n);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var ff=Fn.toBigIntLE=uf;function hf(n){{const t=n.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}Fn.toBigIntBE=hf;function lf(n,t){{const e=n.toString(16),r=ae.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var df=Fn.toBufferLE=lf;function pf(n,t){{const e=n.toString(16);return ae.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}Fn.toBufferBE=pf;class gf extends TypeError{constructor(t,e){let r;const{message:o,...s}=t,{path:u}=t,w=u.length===0?o:"At path: "+u.join(".")+" -- "+o;super(w),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var v;return(v=r)!=null?v:r=[t,...e()]}}}function mf(n){return wr(n)&&typeof n[Symbol.iterator]=="function"}function wr(n){return typeof n=="object"&&n!=null}function je(n){return typeof n=="string"?JSON.stringify(n):""+n}function yf(n){const{done:t,value:e}=n.next();return t?void 0:e}function wf(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:o,branch:s}=t,{type:u}=e,{refinement:w,message:v="Expected a value of type `"+u+"`"+(w?" with refinement `"+w+"`":"")+", but received: `"+je(r)+"`"}=n;return{value:r,type:u,refinement:w,key:o[o.length-1],path:o,branch:s,...n,message:v}}function*qs(n,t,e,r){mf(n)||(n=[n]);for(const o of n){const s=wf(o,t,e,r);s&&(yield s)}}function*vs(n,t,e={}){const{path:r=[],branch:o=[n],coerce:s=!1,mask:u=!1}=e,w={path:r,branch:o};if(s&&(n=t.coercer(n,w),u&&t.type!=="type"&&wr(t.schema)&&wr(n)&&!Array.isArray(n)))for(const B in n)t.schema[B]===void 0&&delete n[B];let v=!0;for(const B of t.validator(n,w))v=!1,yield[B,void 0];for(let[B,x,E]of t.entries(n,w)){const F=vs(x,E,{path:B===void 0?r:[...r,B],branch:B===void 0?o:[...o,x],coerce:s,mask:u});for(const T of F)T[0]?(v=!1,yield[T[0],void 0]):s&&(x=T[1],B===void 0?n=x:n instanceof Map?n.set(B,x):n instanceof Set?n.add(x):wr(n)&&(n[B]=x))}if(v)for(const B of t.refiner(n,w))v=!1,yield[B,void 0];v&&(yield[void 0,n])}let rr=class{constructor(t){const{type:e,schema:r,validator:o,refiner:s,coercer:u=v=>v,entries:w=function*(){}}=t;this.type=e,this.schema=r,this.entries=w,this.coercer=u,o?this.validator=(v,B)=>{const x=o(v,B);return qs(x,B,this,v)}:this.validator=()=>[],s?this.refiner=(v,B)=>{const x=s(v,B);return qs(x,B,this,v)}:this.refiner=()=>[]}assert(t){return bf(t,this)}create(t){return Z(t,this)}is(t){return ma(t,this)}mask(t){return vf(t,this)}validate(t,e={}){return Nn(t,this,e)}};function bf(n,t){const e=Nn(n,t);if(e[0])throw e[0]}function Z(n,t){const e=Nn(n,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function vf(n,t){const e=Nn(n,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function ma(n,t){return!Nn(n,t)[0]}function Nn(n,t,e={}){const r=vs(n,t,e),o=yf(r);return o[0]?[new gf(o[0],function*(){for(const u of r)u[0]&&(yield u[0])}),void 0]:[void 0,o[1]]}function Jr(n,t){return new rr({type:n,schema:null,validator:t})}function xf(){return Jr("any",()=>!0)}function et(n){return new rr({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+je(t)}})}function Qe(){return Jr("boolean",n=>typeof n=="boolean")}function xs(n){return Jr("instance",t=>t instanceof n||"Expected a `"+n.name+"` instance, but received: "+je(t))}function re(n){const t=je(n),e=typeof n;return new rr({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||"Expected the literal `"+t+"`, but received: "+je(r)}})}function _f(){return Jr("never",()=>!1)}function tt(n){return new rr({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function C(){return Jr("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+je(n))}function mt(n){return new rr({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function ya(n,t){return new rr({type:"record",schema:null,*entries(e){if(wr(e))for(const r in e){const o=e[r];yield[r,r,n],yield[r,o,t]}},validator(e){return wr(e)||"Expected an object, but received: "+je(e)}})}function j(){return Jr("string",n=>typeof n=="string"||"Expected a string, but received: "+je(n))}function _s(n){const t=_f();return new rr({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let o=0;o<r;o++)yield[o,e[o],n[o]||t]}},validator(e){return Array.isArray(e)||"Expected an array, but received: "+je(e)}})}function W(n){const t=Object.keys(n);return new rr({type:"type",schema:n,*entries(e){if(wr(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return wr(e)||"Expected an object, but received: "+je(e)}})}function Re(n){const t=n.map(e=>e.type).join(" | ");return new rr({type:"union",schema:null,validator(e,r){const o=[];for(const s of n){const[...u]=vs(e,s,r),[w]=u;if(w[0])for(const[v]of u)v&&o.push(v);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+je(e),...o]}})}function Pn(){return Jr("unknown",()=>!0)}function On(n,t,e){return new rr({...n,coercer:(r,o)=>ma(r,t)?n.coercer(e(r,o),o):n.coercer(r,o)})}var zn,Mf=new Uint8Array(16);function wa(){if(!zn&&(zn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!zn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zn(Mf)}const Sf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function di(n){return typeof n=="string"&&Sf.test(n)}var we=[];for(var Ei=0;Ei<256;++Ei)we.push((Ei+256).toString(16).substr(1));function pi(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(we[n[t+0]]+we[n[t+1]]+we[n[t+2]]+we[n[t+3]]+"-"+we[n[t+4]]+we[n[t+5]]+"-"+we[n[t+6]]+we[n[t+7]]+"-"+we[n[t+8]]+we[n[t+9]]+"-"+we[n[t+10]]+we[n[t+11]]+we[n[t+12]]+we[n[t+13]]+we[n[t+14]]+we[n[t+15]]).toLowerCase();if(!di(e))throw TypeError("Stringified UUID is invalid");return e}var Ds,ki,Ai=0,Ii=0;function Bf(n,t,e){var r=t&&e||0,o=t||new Array(16);n=n||{};var s=n.node||Ds,u=n.clockseq!==void 0?n.clockseq:ki;if(s==null||u==null){var w=n.random||(n.rng||wa)();s==null&&(s=Ds=[w[0]|1,w[1],w[2],w[3],w[4],w[5]]),u==null&&(u=ki=(w[6]<<8|w[7])&16383)}var v=n.msecs!==void 0?n.msecs:Date.now(),B=n.nsecs!==void 0?n.nsecs:Ii+1,x=v-Ai+(B-Ii)/1e4;if(x<0&&n.clockseq===void 0&&(u=u+1&16383),(x<0||v>Ai)&&n.nsecs===void 0&&(B=0),B>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ai=v,Ii=B,ki=u,v+=122192928e5;var E=((v&268435455)*1e4+B)%4294967296;o[r++]=E>>>24&255,o[r++]=E>>>16&255,o[r++]=E>>>8&255,o[r++]=E&255;var F=v/4294967296*1e4&268435455;o[r++]=F>>>8&255,o[r++]=F&255,o[r++]=F>>>24&15|16,o[r++]=F>>>16&255,o[r++]=u>>>8|128,o[r++]=u&255;for(var T=0;T<6;++T)o[r+T]=s[T];return t||pi(o)}function ba(n){if(!di(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Ef(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var kf="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Af="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function va(n,t,e){function r(o,s,u,w){if(typeof o=="string"&&(o=Ef(o)),typeof s=="string"&&(s=ba(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var v=new Uint8Array(16+o.length);if(v.set(s),v.set(o,s.length),v=e(v),v[6]=v[6]&15|t,v[8]=v[8]&63|128,u){w=w||0;for(var B=0;B<16;++B)u[w+B]=v[B];return u}return pi(v)}try{r.name=n}catch{}return r.DNS=kf,r.URL=Af,r}function If(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return Rf(Lf(Tf(n),n.length*8))}function Rf(n){for(var t=[],e=n.length*32,r="0123456789abcdef",o=0;o<e;o+=8){var s=n[o>>5]>>>o%32&255,u=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);t.push(u)}return t}function xa(n){return(n+64>>>9<<4)+14+1}function Lf(n,t){n[t>>5]|=128<<t%32,n[xa(t)-1]=t;for(var e=1732584193,r=-271733879,o=-1732584194,s=271733878,u=0;u<n.length;u+=16){var w=e,v=r,B=o,x=s;e=Me(e,r,o,s,n[u],7,-680876936),s=Me(s,e,r,o,n[u+1],12,-389564586),o=Me(o,s,e,r,n[u+2],17,606105819),r=Me(r,o,s,e,n[u+3],22,-1044525330),e=Me(e,r,o,s,n[u+4],7,-176418897),s=Me(s,e,r,o,n[u+5],12,1200080426),o=Me(o,s,e,r,n[u+6],17,-1473231341),r=Me(r,o,s,e,n[u+7],22,-45705983),e=Me(e,r,o,s,n[u+8],7,1770035416),s=Me(s,e,r,o,n[u+9],12,-1958414417),o=Me(o,s,e,r,n[u+10],17,-42063),r=Me(r,o,s,e,n[u+11],22,-1990404162),e=Me(e,r,o,s,n[u+12],7,1804603682),s=Me(s,e,r,o,n[u+13],12,-40341101),o=Me(o,s,e,r,n[u+14],17,-1502002290),r=Me(r,o,s,e,n[u+15],22,1236535329),e=Se(e,r,o,s,n[u+1],5,-165796510),s=Se(s,e,r,o,n[u+6],9,-1069501632),o=Se(o,s,e,r,n[u+11],14,643717713),r=Se(r,o,s,e,n[u],20,-373897302),e=Se(e,r,o,s,n[u+5],5,-701558691),s=Se(s,e,r,o,n[u+10],9,38016083),o=Se(o,s,e,r,n[u+15],14,-660478335),r=Se(r,o,s,e,n[u+4],20,-405537848),e=Se(e,r,o,s,n[u+9],5,568446438),s=Se(s,e,r,o,n[u+14],9,-1019803690),o=Se(o,s,e,r,n[u+3],14,-187363961),r=Se(r,o,s,e,n[u+8],20,1163531501),e=Se(e,r,o,s,n[u+13],5,-1444681467),s=Se(s,e,r,o,n[u+2],9,-51403784),o=Se(o,s,e,r,n[u+7],14,1735328473),r=Se(r,o,s,e,n[u+12],20,-1926607734),e=Be(e,r,o,s,n[u+5],4,-378558),s=Be(s,e,r,o,n[u+8],11,-2022574463),o=Be(o,s,e,r,n[u+11],16,1839030562),r=Be(r,o,s,e,n[u+14],23,-35309556),e=Be(e,r,o,s,n[u+1],4,-1530992060),s=Be(s,e,r,o,n[u+4],11,1272893353),o=Be(o,s,e,r,n[u+7],16,-155497632),r=Be(r,o,s,e,n[u+10],23,-1094730640),e=Be(e,r,o,s,n[u+13],4,681279174),s=Be(s,e,r,o,n[u],11,-358537222),o=Be(o,s,e,r,n[u+3],16,-722521979),r=Be(r,o,s,e,n[u+6],23,76029189),e=Be(e,r,o,s,n[u+9],4,-640364487),s=Be(s,e,r,o,n[u+12],11,-421815835),o=Be(o,s,e,r,n[u+15],16,530742520),r=Be(r,o,s,e,n[u+2],23,-995338651),e=Ee(e,r,o,s,n[u],6,-198630844),s=Ee(s,e,r,o,n[u+7],10,1126891415),o=Ee(o,s,e,r,n[u+14],15,-1416354905),r=Ee(r,o,s,e,n[u+5],21,-57434055),e=Ee(e,r,o,s,n[u+12],6,1700485571),s=Ee(s,e,r,o,n[u+3],10,-1894986606),o=Ee(o,s,e,r,n[u+10],15,-1051523),r=Ee(r,o,s,e,n[u+1],21,-2054922799),e=Ee(e,r,o,s,n[u+8],6,1873313359),s=Ee(s,e,r,o,n[u+15],10,-30611744),o=Ee(o,s,e,r,n[u+6],15,-1560198380),r=Ee(r,o,s,e,n[u+13],21,1309151649),e=Ee(e,r,o,s,n[u+4],6,-145523070),s=Ee(s,e,r,o,n[u+11],10,-1120210379),o=Ee(o,s,e,r,n[u+2],15,718787259),r=Ee(r,o,s,e,n[u+9],21,-343485551),e=mr(e,w),r=mr(r,v),o=mr(o,B),s=mr(s,x)}return[e,r,o,s]}function Tf(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(xa(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function mr(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function Cf(n,t){return n<<t|n>>>32-t}function gi(n,t,e,r,o,s){return mr(Cf(mr(mr(t,n),mr(r,s)),o),e)}function Me(n,t,e,r,o,s,u){return gi(t&e|~t&r,n,t,o,s,u)}function Se(n,t,e,r,o,s,u){return gi(t&r|e&~r,n,t,o,s,u)}function Be(n,t,e,r,o,s,u){return gi(t^e^r,n,t,o,s,u)}function Ee(n,t,e,r,o,s,u){return gi(e^(t|~r),n,t,o,s,u)}var Uf=va("v3",48,If);const Ff=Uf;function Nf(n,t,e){n=n||{};var r=n.random||(n.rng||wa)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var o=0;o<16;++o)t[e+o]=r[o];return t}return pi(r)}function Pf(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function Ri(n,t){return n<<t|n>>>32-t}function Of(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var o=0;o<r.length;++o)n.push(r.charCodeAt(o))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var s=n.length/4+2,u=Math.ceil(s/16),w=new Array(u),v=0;v<u;++v){for(var B=new Uint32Array(16),x=0;x<16;++x)B[x]=n[v*64+x*4]<<24|n[v*64+x*4+1]<<16|n[v*64+x*4+2]<<8|n[v*64+x*4+3];w[v]=B}w[u-1][14]=(n.length-1)*8/Math.pow(2,32),w[u-1][14]=Math.floor(w[u-1][14]),w[u-1][15]=(n.length-1)*8&4294967295;for(var E=0;E<u;++E){for(var F=new Uint32Array(80),T=0;T<16;++T)F[T]=w[E][T];for(var I=16;I<80;++I)F[I]=Ri(F[I-3]^F[I-8]^F[I-14]^F[I-16],1);for(var k=e[0],A=e[1],O=e[2],$=e[3],H=e[4],Y=0;Y<80;++Y){var V=Math.floor(Y/20),K=Ri(k,5)+Pf(V,A,O,$)+H+t[V]+F[Y]>>>0;H=$,$=O,O=Ri(A,30)>>>0,A=k,k=K}e[0]=e[0]+k>>>0,e[1]=e[1]+A>>>0,e[2]=e[2]+O>>>0,e[3]=e[3]+$>>>0,e[4]=e[4]+H>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var qf=va("v5",80,Of);const Df=qf,Hf="00000000-0000-0000-0000-000000000000";function zf(n){if(!di(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const $f=Object.freeze(Object.defineProperty({__proto__:null,NIL:Hf,parse:ba,stringify:pi,v1:Bf,v3:Ff,v4:Nf,v5:Df,validate:di,version:zf},Symbol.toStringTag,{value:"Module"})),_a=Xi($f),Kf=_a.v4,Wf=function(n,t,e,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const o=typeof r.version=="number"?r.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const s={method:n};if(o===2&&(s.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");s.params=t}if(typeof e>"u"){const u=typeof r.generator=="function"?r.generator:function(){return Kf()};s.id=u(s,r)}else o===2&&e===null?r.notificationIdNull&&(s.id=null):s.id=e;return s};var Vf=Wf;const Gf=_a.v4,jf=Vf,Rn=function(n,t){if(!(this instanceof Rn))return new Rn(n,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return Gf()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=n};var Zf=Rn;Rn.prototype.request=function(n,t,e,r){const o=this;let s=null;const u=Array.isArray(n)&&typeof t=="function";if(this.options.version===1&&u)throw new TypeError("JSON-RPC 1.0 does not support batching");if(u||!u&&n&&typeof n=="object"&&typeof t=="function")r=t,s=n;else{typeof e=="function"&&(r=e,e=void 0);const B=typeof r=="function";try{s=jf(n,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(x){if(B)return r(x);throw x}if(!B)return s}let v;try{v=JSON.stringify(s,this.options.replacer)}catch(B){return r(B)}return this.callServer(v,function(B,x){o._parseResponse(B,x,r)}),s};Rn.prototype._parseResponse=function(n,t,e){if(n){e(n);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(o){return e(o)}if(e.length===3)if(Array.isArray(r)){const o=function(u){return typeof u.error<"u"},s=function(u){return!o(u)};return e(null,r.filter(o),r.filter(s))}else return e(null,r.error,r.result);e(null,r)};const Yf=Yi(Zf);var Ma={},Sa={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function o(v,B,x){this.fn=v,this.context=B,this.once=x||!1}function s(v,B,x,E,F){if(typeof x!="function")throw new TypeError("The listener must be a function");var T=new o(x,E||v,F),I=e?e+B:B;return v._events[I]?v._events[I].fn?v._events[I]=[v._events[I],T]:v._events[I].push(T):(v._events[I]=T,v._eventsCount++),v}function u(v,B){--v._eventsCount===0?v._events=new r:delete v._events[B]}function w(){this._events=new r,this._eventsCount=0}w.prototype.eventNames=function(){var B=[],x,E;if(this._eventsCount===0)return B;for(E in x=this._events)t.call(x,E)&&B.push(e?E.slice(1):E);return Object.getOwnPropertySymbols?B.concat(Object.getOwnPropertySymbols(x)):B},w.prototype.listeners=function(B){var x=e?e+B:B,E=this._events[x];if(!E)return[];if(E.fn)return[E.fn];for(var F=0,T=E.length,I=new Array(T);F<T;F++)I[F]=E[F].fn;return I},w.prototype.listenerCount=function(B){var x=e?e+B:B,E=this._events[x];return E?E.fn?1:E.length:0},w.prototype.emit=function(B,x,E,F,T,I){var k=e?e+B:B;if(!this._events[k])return!1;var A=this._events[k],O=arguments.length,$,H;if(A.fn){switch(A.once&&this.removeListener(B,A.fn,void 0,!0),O){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,x),!0;case 3:return A.fn.call(A.context,x,E),!0;case 4:return A.fn.call(A.context,x,E,F),!0;case 5:return A.fn.call(A.context,x,E,F,T),!0;case 6:return A.fn.call(A.context,x,E,F,T,I),!0}for(H=1,$=new Array(O-1);H<O;H++)$[H-1]=arguments[H];A.fn.apply(A.context,$)}else{var Y=A.length,V;for(H=0;H<Y;H++)switch(A[H].once&&this.removeListener(B,A[H].fn,void 0,!0),O){case 1:A[H].fn.call(A[H].context);break;case 2:A[H].fn.call(A[H].context,x);break;case 3:A[H].fn.call(A[H].context,x,E);break;case 4:A[H].fn.call(A[H].context,x,E,F);break;default:if(!$)for(V=1,$=new Array(O-1);V<O;V++)$[V-1]=arguments[V];A[H].fn.apply(A[H].context,$)}}return!0},w.prototype.on=function(B,x,E){return s(this,B,x,E,!1)},w.prototype.once=function(B,x,E){return s(this,B,x,E,!0)},w.prototype.removeListener=function(B,x,E,F){var T=e?e+B:B;if(!this._events[T])return this;if(!x)return u(this,T),this;var I=this._events[T];if(I.fn)I.fn===x&&(!F||I.once)&&(!E||I.context===E)&&u(this,T);else{for(var k=0,A=[],O=I.length;k<O;k++)(I[k].fn!==x||F&&!I[k].once||E&&I[k].context!==E)&&A.push(I[k]);A.length?this._events[T]=A.length===1?A[0]:A:u(this,T)}return this},w.prototype.removeAllListeners=function(B){var x;return B?(x=e?e+B:B,this._events[x]&&u(this,x)):(this._events=new r,this._eventsCount=0),this},w.prototype.off=w.prototype.removeListener,w.prototype.addListener=w.prototype.on,w.prefixed=e,w.EventEmitter=w,n.exports=w})(Sa);var Ba=Sa.exports,hn={};Object.defineProperty(hn,"__esModule",{value:!0});hn.createError=hn.DefaultDataPack=void 0;const Xf=new Map([[-32e3,"Event not provided"],[-32600,"Invalid Request"],[-32601,"Method not found"],[-32602,"Invalid params"],[-32603,"Internal error"],[-32604,"Params not found"],[-32605,"Method forbidden"],[-32606,"Event forbidden"],[-32700,"Parse error"]]);class Jf{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}}hn.DefaultDataPack=Jf;function Qf(n,t){const e={code:n,message:Xf.get(n)||"Internal Server Error"};return t&&(e.data=t),e}hn.createError=Qf;Object.defineProperty(Ma,"__esModule",{value:!0});const th=Ba,eh=hn;class rh extends th.EventEmitter{constructor(e,r="ws://localhost:8080",{autoconnect:o=!0,reconnect:s=!0,reconnect_interval:u=1e3,max_reconnects:w=5,...v}={},B,x){super();pe(this,"address");pe(this,"rpc_id");pe(this,"queue");pe(this,"options");pe(this,"autoconnect");pe(this,"ready");pe(this,"reconnect");pe(this,"reconnect_timer_id");pe(this,"reconnect_interval");pe(this,"max_reconnects");pe(this,"rest_options");pe(this,"current_reconnects");pe(this,"generate_request_id");pe(this,"socket");pe(this,"webSocketFactory");pe(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=r,this.autoconnect=o,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=u,this.max_reconnects=w,this.rest_options=v,this.current_reconnects=0,this.generate_request_id=B||(()=>++this.rpc_id),x?this.dataPack=x:this.dataPack=new eh.DefaultDataPack,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,r,o,s){return!s&&typeof o=="object"&&(s=o,o=null),new Promise((u,w)=>{if(!this.ready)return w(new Error("socket not ready"));const v=this.generate_request_id(e,r),B={jsonrpc:"2.0",method:e,params:r||void 0,id:v};this.socket.send(this.dataPack.encode(B),s,x=>{if(x)return w(x);this.queue[v]={promise:[u,w]},o&&(this.queue[v].timeout=setTimeout(()=>{delete this.queue[v],w(new Error("reply timeout"))},o))})})}async login(e){const r=await this.call("rpc.login",e);if(!r)throw new Error("authentication failed");return r}async listMethods(){return await this.call("__listMethods")}notify(e,r){return new Promise((o,s)=>{if(!this.ready)return s(new Error("socket not ready"));const u={jsonrpc:"2.0",method:e,params:r};this.socket.send(this.dataPack.encode(u),w=>{if(w)return s(w);o()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const r=await this.call("rpc.on",e);if(typeof e=="string"&&r[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+r[e]);return r}async unsubscribe(e){typeof e=="string"&&(e=[e]);const r=await this.call("rpc.off",e);if(typeof e=="string"&&r[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+r);return r}close(e,r){this.socket.close(e||1e3,r)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,r){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,r),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:o})=>{o instanceof ArrayBuffer&&(o=ae.from(o).toString());try{o=this.dataPack.decode(o)}catch{return}if(o.notification&&this.listeners(o.notification).length){if(!Object.keys(o.params).length)return this.emit(o.notification);const s=[o.notification];if(o.params.constructor===Object)s.push(o.params);else for(let u=0;u<o.params.length;u++)s.push(o.params[u]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[o.id])return o.method?Promise.resolve().then(()=>{this.emit(o.method,o==null?void 0:o.params)}):void 0;"error"in o=="result"in o&&this.queue[o.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[o.id].timeout&&clearTimeout(this.queue[o.id].timeout),o.error?this.queue[o.id].promise[1](o.error):this.queue[o.id].promise[0](o.result),delete this.queue[o.id]}),this.socket.addEventListener("error",o=>this.emit("error",o)),this.socket.addEventListener("close",({code:o,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",o,s),0),this.ready=!1,this.socket=void 0,o!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,r),this.reconnect_interval)))})}}var nh=Ma.default=rh,Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});const ih=Ba;class sh extends ih.EventEmitter{constructor(e,r,o){super();pe(this,"socket");this.socket=new window.WebSocket(e,o),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(e,r,o){const s=o||r;try{this.socket.send(e),s()}catch(u){s(u)}}close(e,r){this.socket.close(e,r)}addEventListener(e,r,o){this.socket.addEventListener(e,r,o)}}function oh(n,t){return new sh(n,t)}var ah=Ea.default=oh;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ch(n){const t=ns(n);dn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:o}=t;if(e){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:uh,hexToBytes:fh}=ru,Kr={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(n){const{Err:t}=Kr;if(n.length<2||n[0]!==2)throw new t("Invalid signature integer tag");const e=n[1],r=n.subarray(2,e+2);if(!e||r.length!==e)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:uh(r),l:n.subarray(e+2)}},toSig(n){const{Err:t}=Kr,e=typeof n=="string"?fh(n):n;Un(e);let r=e.length;if(r<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:s}=Kr._parseInt(e.subarray(2)),{d:u,l:w}=Kr._parseInt(s);if(w.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:u}},hexFromSig(n){const t=B=>Number.parseInt(B[0],16)&8?"00"+B:B,e=B=>{const x=B.toString(16);return x.length&1?`0${x}`:x},r=t(e(n.s)),o=t(e(n.r)),s=r.length/2,u=o.length/2,w=e(s),v=e(u);return`30${e(u+s+4)}02${v}${o}02${w}${r}`}},or=BigInt(0),Pe=BigInt(1);BigInt(2);const Hs=BigInt(3);BigInt(4);function hh(n){const t=ch(n),{Fp:e}=t,r=t.toBytes||((I,k,A)=>{const O=k.toAffine();return Zr(Uint8Array.from([4]),e.toBytes(O.x),e.toBytes(O.y))}),o=t.fromBytes||(I=>{const k=I.subarray(1),A=e.fromBytes(k.subarray(0,e.BYTES)),O=e.fromBytes(k.subarray(e.BYTES,2*e.BYTES));return{x:A,y:O}});function s(I){const{a:k,b:A}=t,O=e.sqr(I),$=e.mul(O,I);return e.add(e.add($,e.mul(I,k)),A)}if(!e.eql(e.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function u(I){return typeof I=="bigint"&&or<I&&I<t.n}function w(I){if(!u(I))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function v(I){const{allowedPrivateKeyLengths:k,nByteLength:A,wrapPrivateKey:O,n:$}=t;if(k&&typeof I!="bigint"){if(Gr(I)&&(I=jr(I)),typeof I!="string"||!k.includes(I.length))throw new Error("Invalid key");I=I.padStart(A*2,"0")}let H;try{H=typeof I=="bigint"?I:Wr(he("private key",I,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof I}`)}return O&&(H=ee(H,$)),w(H),H}const B=new Map;function x(I){if(!(I instanceof E))throw new Error("ProjectivePoint expected")}class E{constructor(k,A,O){if(this.px=k,this.py=A,this.pz=O,k==null||!e.isValid(k))throw new Error("x required");if(A==null||!e.isValid(A))throw new Error("y required");if(O==null||!e.isValid(O))throw new Error("z required")}static fromAffine(k){const{x:A,y:O}=k||{};if(!k||!e.isValid(A)||!e.isValid(O))throw new Error("invalid affine point");if(k instanceof E)throw new Error("projective point not allowed");const $=H=>e.eql(H,e.ZERO);return $(A)&&$(O)?E.ZERO:new E(A,O,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(k){const A=e.invertBatch(k.map(O=>O.pz));return k.map((O,$)=>O.toAffine(A[$])).map(E.fromAffine)}static fromHex(k){const A=E.fromAffine(o(he("pointHex",k)));return A.assertValidity(),A}static fromPrivateKey(k){return E.BASE.multiply(v(k))}_setWindowSize(k){this._WINDOW_SIZE=k,B.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:k,y:A}=this.toAffine();if(!e.isValid(k)||!e.isValid(A))throw new Error("bad point: x or y not FE");const O=e.sqr(A),$=s(k);if(!e.eql(O,$))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:k}=this.toAffine();if(e.isOdd)return!e.isOdd(k);throw new Error("Field doesn't support isOdd")}equals(k){x(k);const{px:A,py:O,pz:$}=this,{px:H,py:Y,pz:V}=k,K=e.eql(e.mul(A,V),e.mul(H,$)),J=e.eql(e.mul(O,V),e.mul(Y,$));return K&&J}negate(){return new E(this.px,e.neg(this.py),this.pz)}double(){const{a:k,b:A}=t,O=e.mul(A,Hs),{px:$,py:H,pz:Y}=this;let V=e.ZERO,K=e.ZERO,J=e.ZERO,rt=e.mul($,$),Gt=e.mul(H,H),St=e.mul(Y,Y),G=e.mul($,H);return G=e.add(G,G),J=e.mul($,Y),J=e.add(J,J),V=e.mul(k,J),K=e.mul(O,St),K=e.add(V,K),V=e.sub(Gt,K),K=e.add(Gt,K),K=e.mul(V,K),V=e.mul(G,V),J=e.mul(O,J),St=e.mul(k,St),G=e.sub(rt,St),G=e.mul(k,G),G=e.add(G,J),J=e.add(rt,rt),rt=e.add(J,rt),rt=e.add(rt,St),rt=e.mul(rt,G),K=e.add(K,rt),St=e.mul(H,Y),St=e.add(St,St),rt=e.mul(St,G),V=e.sub(V,rt),J=e.mul(St,Gt),J=e.add(J,J),J=e.add(J,J),new E(V,K,J)}add(k){x(k);const{px:A,py:O,pz:$}=this,{px:H,py:Y,pz:V}=k;let K=e.ZERO,J=e.ZERO,rt=e.ZERO;const Gt=t.a,St=e.mul(t.b,Hs);let G=e.mul(A,H),D=e.mul(O,Y),y=e.mul($,V),i=e.add(A,O),c=e.add(H,Y);i=e.mul(i,c),c=e.add(G,D),i=e.sub(i,c),c=e.add(A,$);let f=e.add(H,V);return c=e.mul(c,f),f=e.add(G,y),c=e.sub(c,f),f=e.add(O,$),K=e.add(Y,V),f=e.mul(f,K),K=e.add(D,y),f=e.sub(f,K),rt=e.mul(Gt,c),K=e.mul(St,y),rt=e.add(K,rt),K=e.sub(D,rt),rt=e.add(D,rt),J=e.mul(K,rt),D=e.add(G,G),D=e.add(D,G),y=e.mul(Gt,y),c=e.mul(St,c),D=e.add(D,y),y=e.sub(G,y),y=e.mul(Gt,y),c=e.add(c,y),G=e.mul(D,c),J=e.add(J,G),G=e.mul(f,c),K=e.mul(i,K),K=e.sub(K,G),G=e.mul(i,D),rt=e.mul(f,rt),rt=e.add(rt,G),new E(K,J,rt)}subtract(k){return this.add(k.negate())}is0(){return this.equals(E.ZERO)}wNAF(k){return T.wNAFCached(this,B,k,A=>{const O=e.invertBatch(A.map($=>$.pz));return A.map(($,H)=>$.toAffine(O[H])).map(E.fromAffine)})}multiplyUnsafe(k){const A=E.ZERO;if(k===or)return A;if(w(k),k===Pe)return this;const{endo:O}=t;if(!O)return T.unsafeLadder(this,k);let{k1neg:$,k1:H,k2neg:Y,k2:V}=O.splitScalar(k),K=A,J=A,rt=this;for(;H>or||V>or;)H&Pe&&(K=K.add(rt)),V&Pe&&(J=J.add(rt)),rt=rt.double(),H>>=Pe,V>>=Pe;return $&&(K=K.negate()),Y&&(J=J.negate()),J=new E(e.mul(J.px,O.beta),J.py,J.pz),K.add(J)}multiply(k){w(k);let A=k,O,$;const{endo:H}=t;if(H){const{k1neg:Y,k1:V,k2neg:K,k2:J}=H.splitScalar(A);let{p:rt,f:Gt}=this.wNAF(V),{p:St,f:G}=this.wNAF(J);rt=T.constTimeNegate(Y,rt),St=T.constTimeNegate(K,St),St=new E(e.mul(St.px,H.beta),St.py,St.pz),O=rt.add(St),$=Gt.add(G)}else{const{p:Y,f:V}=this.wNAF(A);O=Y,$=V}return E.normalizeZ([O,$])[0]}multiplyAndAddUnsafe(k,A,O){const $=E.BASE,H=(V,K)=>K===or||K===Pe||!V.equals($)?V.multiplyUnsafe(K):V.multiply(K),Y=H(this,A).add(H(k,O));return Y.is0()?void 0:Y}toAffine(k){const{px:A,py:O,pz:$}=this,H=this.is0();k==null&&(k=H?e.ONE:e.inv($));const Y=e.mul(A,k),V=e.mul(O,k),K=e.mul($,k);if(H)return{x:e.ZERO,y:e.ZERO};if(!e.eql(K,e.ONE))throw new Error("invZ was invalid");return{x:Y,y:V}}isTorsionFree(){const{h:k,isTorsionFree:A}=t;if(k===Pe)return!0;if(A)return A(E,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:k,clearCofactor:A}=t;return k===Pe?this:A?A(E,this):this.multiplyUnsafe(t.h)}toRawBytes(k=!0){return this.assertValidity(),r(E,this,k)}toHex(k=!0){return jr(this.toRawBytes(k))}}E.BASE=new E(t.Gx,t.Gy,e.ONE),E.ZERO=new E(e.ZERO,e.ONE,e.ZERO);const F=t.nBitLength,T=qo(E,t.endo?Math.ceil(F/2):F);return{CURVE:t,ProjectivePoint:E,normPrivateKeyToScalar:v,weierstrassEquation:s,isWithinCurveOrder:u}}function lh(n){const t=ns(n);return dn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function dh(n){const t=lh(n),{Fp:e,n:r}=t,o=e.BYTES+1,s=2*e.BYTES+1;function u(c){return or<c&&c<e.ORDER}function w(c){return ee(c,r)}function v(c){return Oi(c,r)}const{ProjectivePoint:B,normPrivateKeyToScalar:x,weierstrassEquation:E,isWithinCurveOrder:F}=hh({...t,toBytes(c,f,p){const g=f.toAffine(),b=e.toBytes(g.x),M=Zr;return p?M(Uint8Array.from([f.hasEvenY()?2:3]),b):M(Uint8Array.from([4]),b,e.toBytes(g.y))},fromBytes(c){const f=c.length,p=c[0],g=c.subarray(1);if(f===o&&(p===2||p===3)){const b=Wr(g);if(!u(b))throw new Error("Point is not on curve");const M=E(b);let d;try{d=e.sqrt(M)}catch(N){const q=N instanceof Error?": "+N.message:"";throw new Error("Point is not on curve"+q)}const a=(d&Pe)===Pe;return(p&1)===1!==a&&(d=e.neg(d)),{x:b,y:d}}else if(f===s&&p===4){const b=e.fromBytes(g.subarray(0,e.BYTES)),M=e.fromBytes(g.subarray(e.BYTES,2*e.BYTES));return{x:b,y:M}}else throw new Error(`Point of length ${f} was invalid. Expected ${o} compressed bytes or ${s} uncompressed bytes`)}}),T=c=>jr(un(c,t.nByteLength));function I(c){const f=r>>Pe;return c>f}function k(c){return I(c)?w(-c):c}const A=(c,f,p)=>Wr(c.slice(f,p));class O{constructor(f,p,g){this.r=f,this.s=p,this.recovery=g,this.assertValidity()}static fromCompact(f){const p=t.nByteLength;return f=he("compactSignature",f,p*2),new O(A(f,0,p),A(f,p,2*p))}static fromDER(f){const{r:p,s:g}=Kr.toSig(he("DER",f));return new O(p,g)}assertValidity(){if(!F(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!F(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(f){return new O(this.r,this.s,f)}recoverPublicKey(f){const{r:p,s:g,recovery:b}=this,M=J(he("msgHash",f));if(b==null||![0,1,2,3].includes(b))throw new Error("recovery id invalid");const d=b===2||b===3?p+t.n:p;if(d>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const a=b&1?"03":"02",m=B.fromHex(a+T(d)),N=v(d),q=w(-M*N),z=w(g*N),nt=B.BASE.multiplyAndAddUnsafe(m,q,z);if(!nt)throw new Error("point at infinify");return nt.assertValidity(),nt}hasHighS(){return I(this.s)}normalizeS(){return this.hasHighS()?new O(this.r,w(-this.s),this.recovery):this}toDERRawBytes(){return cn(this.toDERHex())}toDERHex(){return Kr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return cn(this.toCompactHex())}toCompactHex(){return T(this.r)+T(this.s)}}const $={isValidPrivateKey(c){try{return x(c),!0}catch{return!1}},normPrivateKeyToScalar:x,randomPrivateKey:()=>{const c=Oo(t.n);return du(t.randomBytes(c),t.n)},precompute(c=8,f=B.BASE){return f._setWindowSize(c),f.multiply(BigInt(3)),f}};function H(c,f=!0){return B.fromPrivateKey(c).toRawBytes(f)}function Y(c){const f=Gr(c),p=typeof c=="string",g=(f||p)&&c.length;return f?g===o||g===s:p?g===2*o||g===2*s:c instanceof B}function V(c,f,p=!0){if(Y(c))throw new Error("first arg must be private key");if(!Y(f))throw new Error("second arg must be public key");return B.fromHex(f).multiply(x(c)).toRawBytes(p)}const K=t.bits2int||function(c){const f=Wr(c),p=c.length*8-t.nBitLength;return p>0?f>>BigInt(p):f},J=t.bits2int_modN||function(c){return w(K(c))},rt=rs(t.nBitLength);function Gt(c){if(typeof c!="bigint")throw new Error("bigint expected");if(!(or<=c&&c<rt))throw new Error(`bigint expected < 2^${t.nBitLength}`);return un(c,t.nByteLength)}function St(c,f,p=G){if(["recovered","canonical"].some(Q=>Q in p))throw new Error("sign() legacy options not supported");const{hash:g,randomBytes:b}=t;let{lowS:M,prehash:d,extraEntropy:a}=p;M==null&&(M=!0),c=he("msgHash",c),d&&(c=he("prehashed msgHash",g(c)));const m=J(c),N=x(f),q=[Gt(N),Gt(m)];if(a!=null&&a!==!1){const Q=a===!0?b(e.BYTES):a;q.push(he("extraEntropy",Q))}const z=Zr(...q),nt=m;function X(Q){const Qt=K(Q);if(!F(Qt))return;const st=v(Qt),ct=B.BASE.multiply(Qt).toAffine(),Yt=w(ct.x);if(Yt===or)return;const ht=w(st*w(nt+Yt*N));if(ht===or)return;let dt=(ct.x===Yt?0:2)|Number(ct.y&Pe),de=ht;return M&&I(ht)&&(de=k(ht),dt^=1),new O(Yt,de,dt)}return{seed:z,k2sig:X}}const G={lowS:t.lowS,prehash:!1},D={lowS:t.lowS,prehash:!1};function y(c,f,p=G){const{seed:g,k2sig:b}=St(c,f,p),M=t;return Uo(M.hash.outputLen,M.nByteLength,M.hmac)(g,b)}B.BASE._setWindowSize(8);function i(c,f,p,g=D){var ct;const b=c;if(f=he("msgHash",f),p=he("publicKey",p),"strict"in g)throw new Error("options.strict was renamed to lowS");const{lowS:M,prehash:d}=g;let a,m;try{if(typeof b=="string"||Gr(b))try{a=O.fromDER(b)}catch(Yt){if(!(Yt instanceof Kr.Err))throw Yt;a=O.fromCompact(b)}else if(typeof b=="object"&&typeof b.r=="bigint"&&typeof b.s=="bigint"){const{r:Yt,s:ht}=b;a=new O(Yt,ht)}else throw new Error("PARSE");m=B.fromHex(p)}catch(Yt){if(Yt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(M&&a.hasHighS())return!1;d&&(f=t.hash(f));const{r:N,s:q}=a,z=J(f),nt=v(q),X=w(z*nt),Q=w(N*nt),Qt=(ct=B.BASE.multiplyAndAddUnsafe(m,X,Q))==null?void 0:ct.toAffine();return Qt?w(Qt.x)===N:!1}return{CURVE:t,getPublicKey:H,getSharedSecret:V,sign:y,verify:i,ProjectivePoint:B,Signature:O,utils:$}}class ka extends zo{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Cu(t);const r=us(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?t.create().update(r).digest():r);for(let u=0;u<s.length;u++)s[u]^=54;this.iHash.update(s),this.oHash=t.create();for(let u=0;u<s.length;u++)s[u]^=106;this.oHash.update(s),s.fill(0)}update(t){return jn(this),this.iHash.update(t),this}digestInto(t){jn(this),cs(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:o,destroyed:s,blockLen:u,outputLen:w}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=u,t.outputLen=w,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Aa=(n,t,e)=>new ka(n,t).update(e).digest();Aa.create=(n,t)=>new ka(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ph(n){return{hash:n,hmac:(t,...e)=>Aa(n,t,vr.concatBytes(...e)),randomBytes:vr.randomBytes}}function gh(n,t){const e=r=>dh({...n,...ph(r)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ia=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),zs=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),mh=BigInt(1),zi=BigInt(2),$s=(n,t)=>(n+t/zi)/t;function yh(n){const t=Ia,e=BigInt(3),r=BigInt(6),o=BigInt(11),s=BigInt(22),u=BigInt(23),w=BigInt(44),v=BigInt(88),B=n*n*n%t,x=B*B*n%t,E=ie(x,e,t)*x%t,F=ie(E,e,t)*x%t,T=ie(F,zi,t)*B%t,I=ie(T,o,t)*T%t,k=ie(I,s,t)*I%t,A=ie(k,w,t)*k%t,O=ie(A,v,t)*A%t,$=ie(O,w,t)*k%t,H=ie($,e,t)*x%t,Y=ie(H,u,t)*I%t,V=ie(Y,r,t)*B%t,K=ie(V,zi,t);if(!$i.eql($i.sqr(K),n))throw new Error("Cannot find square root");return K}const $i=No(Ia,void 0,void 0,{sqrt:yh}),Ms=gh({a:BigInt(0),b:BigInt(7),Fp:$i,n:zs,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=zs,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-mh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=e,u=BigInt("0x100000000000000000000000000000000"),w=$s(s*n,t),v=$s(-r*n,t);let B=ee(n-w*e-v*o,t),x=ee(-w*r-v*s,t);const E=B>u,F=x>u;if(E&&(B=t-B),F&&(x=t-x),B>u||x>u)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:E,k1:B,k2neg:F,k2:x}}}},Zn);BigInt(0);Ms.ProjectivePoint;pn.utils.randomPrivateKey;const Ks=()=>{const n=pn.utils.randomPrivateKey(),t=Ki(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},Ki=pn.getPublicKey;function Ws(n){try{return pn.ExtendedPoint.fromHex(n),!0}catch{return!1}}const wh=(n,t)=>pn.sign(n,t.slice(0,32)),bh=pn.verify,ve=n=>$t.isBuffer(n)?n:n instanceof Uint8Array?$t.from(n.buffer,n.byteOffset,n.byteLength):$t.from(n);class vh{constructor(t){Object.assign(this,t)}encode(){return $t.from(Xo(Wn,this))}static decode(t){return Jo(Wn,this,t)}static decodeUnchecked(t){return Vo(Wn,this,t)}}const Wn=new Map;var Ra;const xh=32,br=32;function _h(n){return n._bn!==void 0}let Vs=1;class yt extends vh{constructor(t){if(super({}),this._bn=void 0,_h(t))this._bn=t._bn;else{if(typeof t=="string"){const e=_e.decode(t);if(e.length!=br)throw new Error("Invalid public key input");this._bn=new Ps(e)}else this._bn=new Ps(t);if(this._bn.byteLength()>br)throw new Error("Invalid public key input")}}static unique(){const t=new yt(Vs);return Vs+=1,new yt(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return _e.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike($t);if(t.length===br)return t;const e=$t.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const o=$t.concat([t.toBuffer(),$t.from(e),r.toBuffer()]),s=Zn(o);return new yt(s)}static createProgramAddressSync(t,e){let r=$t.alloc(0);t.forEach(function(s){if(s.length>xh)throw new TypeError("Max seed length exceeded");r=$t.concat([r,ve(s)])}),r=$t.concat([r,e.toBuffer(),$t.from("ProgramDerivedAddress")]);const o=Zn(r);if(Ws(o))throw new Error("Invalid seeds, address must fall off the curve");return new yt(o)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,o;for(;r!=0;){try{const s=t.concat($t.from([r]));o=this.createProgramAddressSync(s,e)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[o,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new yt(t);return Ws(e.toBytes())}}Ra=yt;yt.default=new Ra("11111111111111111111111111111111");Wn.set(yt,{kind:"struct",fields:[["_bn","u256"]]});new yt("BPFLoader1111111111111111111111111111111111");const an=1280-40-8,La=127,Ta=64;class Ca extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ca.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Ua extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ua.prototype,"name",{value:"TransactionExpiredTimeoutError"});class kn extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(kn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class ei{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,u)=>{r.set(s.toBase58(),u)});const o=s=>{const u=r.get(s.toBase58());if(u===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return u};return t.map(s=>({programIdIndex:o(s.programId),accountKeyIndexes:s.keys.map(u=>o(u.pubkey)),data:s.data}))}}const Vt=(n="publicKey")=>se(32,n),sn=(n="string")=>{const t=ut([lt("length"),lt("lengthPadding"),se(Vr(lt(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),o=t;return o.decode=(s,u)=>e(s,u).chars.toString(),o.encode=(s,u,w)=>{const v={chars:$t.from(s,"utf8")};return r(v,u,w)},o.alloc=s=>lt().span+lt().span+$t.from(s,"utf8").length,o},Mh=(n="authorized")=>ut([Vt("staker"),Vt("withdrawer")],n),Sh=(n="lockup")=>ut([Te("unixTimestamp"),Te("epoch"),Vt("custodian")],n),Bh=(n="voteInit")=>ut([Vt("nodePubkey"),Vt("authorizedVoter"),Vt("authorizedWithdrawer"),Zt("commission")],n),Eh=(n="voteAuthorizeWithSeedArgs")=>ut([lt("voteAuthorizationType"),Vt("currentAuthorityDerivedKeyOwnerPubkey"),sn("currentAuthorityDerivedKeySeed"),Vt("newAuthorized")],n);function Fa(n,t){const e=o=>{if(o.span>=0)return o.span;if(typeof o.alloc=="function")return o.alloc(t[o.property]);if("count"in o&&"elementLayout"in o){const s=t[o.property];if(Array.isArray(s))return s.length*e(o.elementLayout)}else if("fields"in o)return Fa({layout:o},t[o.property]);return 0};let r=0;return n.layout.fields.forEach(o=>{r+=e(o)}),r}function qe(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function De(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function ce(n,t){if(!n)throw new Error(t||"Assertion failed")}class mi{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,o=u=>{const w=u.toBase58();let v=r.get(w);return v===void 0&&(v={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(w,v)),v},s=o(e);s.isSigner=!0,s.isWritable=!0;for(const u of t){o(u.programId).isInvoked=!0;for(const w of u.keys){const v=o(w.pubkey);v.isSigner||(v.isSigner=w.isSigner),v.isWritable||(v.isWritable=w.isWritable)}}return new mi(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];ce(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,v])=>v.isSigner&&v.isWritable),r=t.filter(([,v])=>v.isSigner&&!v.isWritable),o=t.filter(([,v])=>!v.isSigner&&v.isWritable),s=t.filter(([,v])=>!v.isSigner&&!v.isWritable),u={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{ce(e.length>0,"Expected at least one writable signer key");const[v]=e[0];ce(v===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const w=[...e.map(([v])=>new yt(v)),...r.map(([v])=>new yt(v)),...o.map(([v])=>new yt(v)),...s.map(([v])=>new yt(v))];return[u,w]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&u.isWritable),[o,s]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&!u.isWritable);if(!(e.length===0&&o.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:o},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(t,e){const r=new Array,o=new Array;for(const[s,u]of this.keyMetaMap.entries())if(e(u)){const w=new yt(s),v=t.findIndex(B=>B.equals(w));v>=0&&(ce(v<256,"Max lookup table index exceeded"),r.push(v),o.push(w),this.keyMetaMap.delete(s))}return[r,o]}}const Na="Reached end of buffer unexpectedly";function ar(n){if(n.length===0)throw new Error(Na);return n.shift()}function He(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(Na);return n.splice(...t)}class xr{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new yt(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:_e.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new ei(this.staticAccountKeys)}static compile(t){const e=mi.compile(t.instructions,t.payerKey),[r,o]=e.getMessageComponents(),u=new ei(o).compileInstructions(t.instructions).map(w=>({programIdIndex:w.programIdIndex,accounts:w.accountKeyIndexes,data:_e.encode(w.data)}));return new xr({header:r,accountKeys:o,recentBlockhash:t.recentBlockhash,instructions:u})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,s=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];De(e,t);const r=this.instructions.map(E=>{const{accounts:F,programIdIndex:T}=E,I=Array.from(_e.decode(E.data));let k=[];De(k,F.length);let A=[];return De(A,I.length),{programIdIndex:T,keyIndicesCount:$t.from(k),keyIndices:F,dataLength:$t.from(A),data:I}});let o=[];De(o,r.length);let s=$t.alloc(an);$t.from(o).copy(s);let u=o.length;r.forEach(E=>{const T=ut([Zt("programIdIndex"),se(E.keyIndicesCount.length,"keyIndicesCount"),Ae(Zt("keyIndex"),E.keyIndices.length,"keyIndices"),se(E.dataLength.length,"dataLength"),Ae(Zt("userdatum"),E.data.length,"data")]).encode(E,s,u);u+=T}),s=s.slice(0,u);const w=ut([se(1,"numRequiredSignatures"),se(1,"numReadonlySignedAccounts"),se(1,"numReadonlyUnsignedAccounts"),se(e.length,"keyCount"),Ae(Vt("key"),t,"keys"),Vt("recentBlockhash")]),v={numRequiredSignatures:$t.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:$t.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:$t.from([this.header.numReadonlyUnsignedAccounts]),keyCount:$t.from(e),keys:this.accountKeys.map(E=>ve(E.toBytes())),recentBlockhash:_e.decode(this.recentBlockhash)};let B=$t.alloc(2048);const x=w.encode(v,B);return s.copy(B,x),B.slice(0,x+s.length)}static from(t){let e=[...t];const r=ar(e);if(r!==(r&La))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const o=ar(e),s=ar(e),u=qe(e);let w=[];for(let F=0;F<u;F++){const T=He(e,0,br);w.push(new yt($t.from(T)))}const v=He(e,0,br),B=qe(e);let x=[];for(let F=0;F<B;F++){const T=ar(e),I=qe(e),k=He(e,0,I),A=qe(e),O=He(e,0,A),$=_e.encode($t.from(O));x.push({programIdIndex:T,accounts:k,data:$})}const E={header:{numRequiredSignatures:r,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:s},recentBlockhash:_e.encode($t.from(v)),accountKeys:w,instructions:x};return new xr(E)}}class ri{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ei(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const o=t-r,s=this.addressTableLookups.reduce((u,w)=>u+w.writableIndexes.length,0);return o<s}else if(t>=this.header.numRequiredSignatures){const o=t-e,u=r-e-this.header.numReadonlyUnsignedAccounts;return o<u}else{const o=e-this.header.numReadonlySignedAccounts;return t<o}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const o=t.find(s=>s.key.equals(r.accountKey));if(!o)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<o.state.addresses.length)e.writable.push(o.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<o.state.addresses.length)e.readonly.push(o.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=mi.compile(t.instructions,t.payerKey),r=new Array,o={writable:new Array,readonly:new Array},s=t.addressLookupTableAccounts||[];for(const x of s){const E=e.extractTableLookup(x);if(E!==void 0){const[F,{writable:T,readonly:I}]=E;r.push(F),o.writable.push(...T),o.readonly.push(...I)}}const[u,w]=e.getMessageComponents(),B=new ei(w,o).compileInstructions(t.instructions);return new ri({header:u,staticAccountKeys:w,recentBlockhash:t.recentBlockhash,compiledInstructions:B,addressTableLookups:r})}serialize(){const t=Array();De(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();De(r,this.compiledInstructions.length);const o=this.serializeAddressTableLookups(),s=Array();De(s,this.addressTableLookups.length);const u=ut([Zt("prefix"),ut([Zt("numRequiredSignatures"),Zt("numReadonlySignedAccounts"),Zt("numReadonlyUnsignedAccounts")],"header"),se(t.length,"staticAccountKeysLength"),Ae(Vt(),this.staticAccountKeys.length,"staticAccountKeys"),Vt("recentBlockhash"),se(r.length,"instructionsLength"),se(e.length,"serializedInstructions"),se(s.length,"addressTableLookupsLength"),se(o.length,"serializedAddressTableLookups")]),w=new Uint8Array(an),v=128,B=u.encode({prefix:v,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(x=>x.toBytes()),recentBlockhash:_e.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:o},w);return w.slice(0,B)}serializeInstructions(){let t=0;const e=new Uint8Array(an);for(const r of this.compiledInstructions){const o=Array();De(o,r.accountKeyIndexes.length);const s=Array();De(s,r.data.length);const u=ut([Zt("programIdIndex"),se(o.length,"encodedAccountKeyIndexesLength"),Ae(Zt(),r.accountKeyIndexes.length,"accountKeyIndexes"),se(s.length,"encodedDataLength"),se(r.data.length,"data")]);t+=u.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(o),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(an);for(const r of this.addressTableLookups){const o=Array();De(o,r.writableIndexes.length);const s=Array();De(s,r.readonlyIndexes.length);const u=ut([Vt("accountKey"),se(o.length,"encodedWritableIndexesLength"),Ae(Zt(),r.writableIndexes.length,"writableIndexes"),se(s.length,"encodedReadonlyIndexesLength"),Ae(Zt(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=u.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(o),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=ar(e),o=r&La;ce(r!==o,"Expected versioned message but received legacy message");const s=o;ce(s===0,`Expected versioned message with version 0 but found version ${s}`);const u={numRequiredSignatures:ar(e),numReadonlySignedAccounts:ar(e),numReadonlyUnsignedAccounts:ar(e)},w=[],v=qe(e);for(let I=0;I<v;I++)w.push(new yt(He(e,0,br)));const B=_e.encode(He(e,0,br)),x=qe(e),E=[];for(let I=0;I<x;I++){const k=ar(e),A=qe(e),O=He(e,0,A),$=qe(e),H=new Uint8Array(He(e,0,$));E.push({programIdIndex:k,accountKeyIndexes:O,data:H})}const F=qe(e),T=[];for(let I=0;I<F;I++){const k=new yt(He(e,0,br)),A=qe(e),O=He(e,0,A),$=qe(e),H=He(e,0,$);T.push({accountKey:k,writableIndexes:O,readonlyIndexes:H})}return new ri({header:u,staticAccountKeys:w,recentBlockhash:B,compiledInstructions:E,addressTableLookups:T})}}let pr=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const kh=$t.alloc(Ta).fill(0);class We{constructor(t){this.keys=void 0,this.programId=void 0,this.data=$t.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class cr{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new We(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let k=0;k<e.length;k++)if(e[k].programId===void 0)throw new Error(`Transaction instruction index ${k} has undefined program id`);const o=[],s=[];e.forEach(k=>{k.keys.forEach(O=>{s.push({...O})});const A=k.programId.toString();o.includes(A)||o.push(A)}),o.forEach(k=>{s.push({pubkey:new yt(k),isSigner:!1,isWritable:!1})});const u=[];s.forEach(k=>{const A=k.pubkey.toString(),O=u.findIndex($=>$.pubkey.toString()===A);O>-1?(u[O].isWritable=u[O].isWritable||k.isWritable,u[O].isSigner=u[O].isSigner||k.isSigner):u.push(k)}),u.sort(function(k,A){if(k.isSigner!==A.isSigner)return k.isSigner?-1:1;if(k.isWritable!==A.isWritable)return k.isWritable?-1:1;const O={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return k.pubkey.toBase58().localeCompare(A.pubkey.toBase58(),"en",O)});const w=u.findIndex(k=>k.pubkey.equals(r));if(w>-1){const[k]=u.splice(w,1);k.isSigner=!0,k.isWritable=!0,u.unshift(k)}else u.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const k of this.signatures){const A=u.findIndex(O=>O.pubkey.equals(k.publicKey));if(A>-1)u[A].isSigner||(u[A].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${k.publicKey.toString()}`)}let v=0,B=0,x=0;const E=[],F=[];u.forEach(({pubkey:k,isSigner:A,isWritable:O})=>{A?(E.push(k.toString()),v+=1,O||(B+=1)):(F.push(k.toString()),O||(x+=1))});const T=E.concat(F),I=e.map(k=>{const{data:A,programId:O}=k;return{programIdIndex:T.indexOf(O.toString()),accounts:k.keys.map($=>T.indexOf($.pubkey.toString())),data:_e.encode(A)}});return I.forEach(k=>{ce(k.programIdIndex>=0),k.accounts.forEach(A=>ce(A>=0))}),new xr({header:{numRequiredSignatures:v,numReadonlySignedAccounts:B,numReadonlyUnsignedAccounts:x},accountKeys:T,recentBlockhash:t,instructions:I})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((o,s)=>e[s].equals(o.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const o=r.toString();return e.has(o)?!1:(e.add(o),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const s of t){const u=s.publicKey.toString();e.has(u)||(e.add(u),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const o=this._compile();this._partialSign(o,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const s of t){const u=s.publicKey.toString();e.has(u)||(e.add(u),r.push(s))}const o=this._compile();this._partialSign(o,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(o=>{const s=wh(r,o.secretKey);this._addSignature(o.publicKey,ve(s))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){ce(e.length===64);const r=this.signatures.findIndex(o=>t.equals(o.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=$t.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:o,publicKey:s}of this.signatures)o===null?e&&(r.missing||(r.missing=[])).push(s):bh(o,t,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),o=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(o,e);if(s){let u="Signature verification failed.";throw s.invalid&&(u+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(w=>w.toBase58()).join("`, `")}\`].`),s.missing&&(u+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(w=>w.toBase58()).join("`, `")}\`].`),new Error(u)}}return this._serialize(o)}_serialize(t){const{signatures:e}=this,r=[];De(r,e.length);const o=r.length+e.length*64+t.length,s=$t.alloc(o);return ce(e.length<256),$t.from(r).copy(s,0),e.forEach(({signature:u},w)=>{u!==null&&(ce(u.length===64,"signature has invalid length"),$t.from(u).copy(s,r.length+w*64))}),t.copy(s,r.length+e.length*64),ce(s.length<=an,`Transaction too large: ${s.length} > ${an}`),s}get keys(){return ce(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return ce(this.instructions.length===1),this.instructions[0].programId}get data(){return ce(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=qe(e);let o=[];for(let s=0;s<r;s++){const u=He(e,0,Ta);o.push(_e.encode($t.from(u)))}return cr.populate(xr.from(e),o)}static populate(t,e=[]){const r=new cr;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((o,s)=>{const u={signature:o==_e.encode(kh)?null:_e.decode(o),publicKey:t.accountKeys[s]};r.signatures.push(u)}),t.instructions.forEach(o=>{const s=o.accounts.map(u=>{const w=t.accountKeys[u];return{pubkey:w,isSigner:r.signatures.some(v=>v.publicKey.toString()===w.toString())||t.isAccountSigner(u),isWritable:t.isAccountWritable(u)}});r.instructions.push(new We({keys:s,programId:t.accountKeys[o.programIdIndex],data:_e.decode(o.data)}))}),r._message=t,r._json=r.toJSON(),r}}const Ah=160,Ih=64,Rh=Ah/Ih,Lh=1e3/Rh;new yt("SysvarC1ock11111111111111111111111111111111");new yt("SysvarEpochSchedu1e111111111111111111111111");new yt("Sysvar1nstructions1111111111111111111111111");const Li=new yt("SysvarRecentB1ockHashes11111111111111111111"),Gs=new yt("SysvarRent111111111111111111111111111111111");new yt("SysvarRewards111111111111111111111111111111");new yt("SysvarS1otHashes111111111111111111111111111");new yt("SysvarS1otHistory11111111111111111111111111");new yt("SysvarStakeHistory1111111111111111111111111");async function _0(n,t,e,r){const o=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},s=await n.sendTransaction(t,e,o);let u;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)u=(await n.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,signature:s,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:w}=t.nonceInfo,v=w.keys[0].pubkey;u=(await n.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:v,nonceValue:t.nonceInfo.nonce,signature:s},r&&r.commitment)).value}else(r==null?void 0:r.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),u=(await n.confirmTransaction(s,r&&r.commitment)).value;if(u.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(u)})`);return s}function nn(n){return new Promise(t=>setTimeout(t,n))}function Ue(n,t){const e=n.layout.span>=0?n.layout.span:Fa(n,t),r=$t.alloc(e),o=Object.assign({instruction:n.index},t);return n.layout.encode(o,r),r}const Th=be("lamportsPerSignature"),Pa=ut([lt("version"),lt("state"),Vt("authorizedPubkey"),Vt("nonce"),ut([Th],"feeCalculator")]),js=Pa.span;class Ss{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Pa.decode(ve(t),0);return new Ss({authorizedPubkey:new yt(e.authorizedPubkey),nonce:new yt(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const Ch=n=>{const t=n.decode.bind(n),e=n.encode.bind(n);return{decode:t,encode:e}},Uh=n=>t=>{const e=se(n,t),{encode:r,decode:o}=Ch(e),s=e;return s.decode=(u,w)=>{const v=o(u,w);return ff($t.from(v))},s.encode=(u,w,v)=>{const B=df(u,n);return r(B,w,v)},s},ln=Uh(8),Fe=Object.freeze({Create:{index:0,layout:ut([lt("instruction"),Te("lamports"),Te("space"),Vt("programId")])},Assign:{index:1,layout:ut([lt("instruction"),Vt("programId")])},Transfer:{index:2,layout:ut([lt("instruction"),ln("lamports")])},CreateWithSeed:{index:3,layout:ut([lt("instruction"),Vt("base"),sn("seed"),Te("lamports"),Te("space"),Vt("programId")])},AdvanceNonceAccount:{index:4,layout:ut([lt("instruction")])},WithdrawNonceAccount:{index:5,layout:ut([lt("instruction"),Te("lamports")])},InitializeNonceAccount:{index:6,layout:ut([lt("instruction"),Vt("authorized")])},AuthorizeNonceAccount:{index:7,layout:ut([lt("instruction"),Vt("authorized")])},Allocate:{index:8,layout:ut([lt("instruction"),Te("space")])},AllocateWithSeed:{index:9,layout:ut([lt("instruction"),Vt("base"),sn("seed"),Te("space"),Vt("programId")])},AssignWithSeed:{index:10,layout:ut([lt("instruction"),Vt("base"),sn("seed"),Vt("programId")])},TransferWithSeed:{index:11,layout:ut([lt("instruction"),ln("lamports"),sn("seed"),Vt("programId")])},UpgradeNonceAccount:{index:12,layout:ut([lt("instruction")])}});class ni{constructor(){}static createAccount(t){const e=Fe.Create,r=Ue(e,{lamports:t.lamports,space:t.space,programId:ve(t.programId.toBuffer())});return new We({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const o=Fe.TransferWithSeed;e=Ue(o,{lamports:BigInt(t.lamports),seed:t.seed,programId:ve(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const o=Fe.Transfer;e=Ue(o,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new We({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const o=Fe.AssignWithSeed;e=Ue(o,{base:ve(t.basePubkey.toBuffer()),seed:t.seed,programId:ve(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const o=Fe.Assign;e=Ue(o,{programId:ve(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new We({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Fe.CreateWithSeed,r=Ue(e,{base:ve(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:ve(t.programId.toBuffer())});let o=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&o.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new We({keys:o,programId:this.programId,data:r})}static createNonceAccount(t){const e=new cr;"basePubkey"in t&&"seed"in t?e.add(ni.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:js,programId:this.programId})):e.add(ni.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:js,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Fe.InitializeNonceAccount,r=Ue(e,{authorized:ve(t.authorizedPubkey.toBuffer())}),o={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Li,isSigner:!1,isWritable:!1},{pubkey:Gs,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new We(o)}static nonceAdvance(t){const e=Fe.AdvanceNonceAccount,r=Ue(e),o={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Li,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new We(o)}static nonceWithdraw(t){const e=Fe.WithdrawNonceAccount,r=Ue(e,{lamports:t.lamports});return new We({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Li,isSigner:!1,isWritable:!1},{pubkey:Gs,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Fe.AuthorizeNonceAccount,r=Ue(e,{authorized:ve(t.newAuthorizedPubkey.toBuffer())});return new We({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const o=Fe.AllocateWithSeed;e=Ue(o,{base:ve(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:ve(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const o=Fe.Allocate;e=Ue(o,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new We({keys:r,programId:this.programId,data:e})}}ni.programId=new yt("11111111111111111111111111111111");new yt("BPFLoader2111111111111111111111111111111111");function Fh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Nh=Object.prototype.toString,Ph=Object.keys||function(n){var t=[];for(var e in n)t.push(e);return t};function An(n,t){var e,r,o,s,u,w,v;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return An(n.toJSON(),t);if(v=Nh.call(n),v==="[object Array]"){for(o="[",r=n.length-1,e=0;e<r;e++)o+=An(n[e],!0)+",";return r>-1&&(o+=An(n[e],!0)),o+"]"}else if(v==="[object Object]"){for(s=Ph(n).sort(),r=s.length,o="",e=0;e<r;)u=s[e],w=An(n[u],!1),w!==void 0&&(o&&(o+=","),o+=JSON.stringify(u)+":"+w),e++;return"{"+o+"}"}else return JSON.stringify(n);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}var Oh=function(n){var t=An(n,!1);if(t!==void 0)return""+t},Zs=Fh(Oh);const En=32;function Ti(n){let t=0;for(;n>1;)n/=2,t++;return t}function qh(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Dh{constructor(t,e,r,o,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=o,this.firstNormalSlot=s}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Ti(qh(t+En+1))-Ti(En)-1,r=this.getSlotsInEpoch(e),o=t-(r-En);return[e,o]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),o=this.firstNormalEpoch+r,s=e%this.slotsPerEpoch;return[o,s]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*En:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Ti(En)):this.slotsPerEpoch}}class Ys extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}class ft extends Error{constructor({code:t,message:e,data:r},o){super(o!=null?`${o}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}var Hh=globalThis.fetch;class zh extends nh{constructor(t,e,r){const o=s=>{const u=ah(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in u?this.underlyingSocket=u.socket:this.underlyingSocket=u,u};super(o,t,e,r),this.underlyingSocket=void 0}call(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function $h(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const Xs=56;class Js{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=$h(Kh,t),r=t.length-Xs;ce(r>=0,"lookup table is invalid"),ce(r%32===0,"lookup table is invalid");const o=r/32,{addresses:s}=ut([Ae(Vt(),o,"addresses")]).decode(t.slice(Xs));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new yt(e.authority[0]):void 0,addresses:s.map(u=>new yt(u))}}}const Kh={index:1,layout:ut([lt("typeIndex"),ln("deactivationSlot"),be("lastExtendedSlot"),Zt("lastExtendedStartIndex"),Zt(),Ae(Vt(),Vr(Zt(),-1),"authority")])},Wh=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Vh(n){const t=n.match(Wh);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,o,s]=t,u=n.startsWith("https:")?"wss:":"ws:",w=o==null?null:parseInt(o.slice(1),10),v=w==null?"":`:${w+1}`;return`${u}//${r}${v}${s}`}const ue=On(xs(yt),j(),n=>new yt(n)),Oa=_s([j(),re("base64")]),Bs=On(xs($t),Oa,n=>$t.from(n[0],"base64")),Gh=30*1e3;function jh(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function te(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...o}=n;t=r,e=o}return{commitment:t,config:e}}function qa(n){return Re([W({jsonrpc:re("2.0"),id:j(),result:n}),W({jsonrpc:re("2.0"),id:j(),error:W({code:Pn(),message:j(),data:mt(xf())})})])}const Zh=qa(Pn());function Wt(n){return On(qa(n),Zh,t=>"error"in t?t:{...t,result:Z(t.result,n)})}function oe(n){return Wt(W({context:W({slot:C()}),value:n}))}function yi(n){return W({context:W({slot:C()}),value:n})}function Ci(n,t){return n===0?new ri({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new yt(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:_e.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new xr(t)}const Yh=W({foundation:C(),foundationTerm:C(),initial:C(),taper:C(),terminal:C()}),Xh=Wt(et(tt(W({epoch:C(),effectiveSlot:C(),amount:C(),postBalance:C(),commission:mt(tt(C()))})))),Jh=et(W({slot:C(),prioritizationFee:C()})),Qh=W({total:C(),validator:C(),foundation:C(),epoch:C()}),tl=W({epoch:C(),slotIndex:C(),slotsInEpoch:C(),absoluteSlot:C(),blockHeight:mt(C()),transactionCount:mt(C())}),el=W({slotsPerEpoch:C(),leaderScheduleSlotOffset:C(),warmup:Qe(),firstNormalEpoch:C(),firstNormalSlot:C()}),rl=ya(j(),et(C())),Qr=tt(Re([W({}),j()])),nl=W({err:Qr}),il=re("receivedSignature"),sl=W({"solana-core":j(),"feature-set":mt(C())}),Qs=oe(W({err:tt(Re([W({}),j()])),logs:tt(et(j())),accounts:mt(tt(et(tt(W({executable:Qe(),owner:j(),lamports:C(),data:et(j()),rentEpoch:mt(C())}))))),unitsConsumed:mt(C()),returnData:mt(tt(W({programId:j(),data:_s([j(),re("base64")])})))})),ol=oe(W({byIdentity:ya(j(),et(C())),range:W({firstSlot:C(),lastSlot:C()})}));function al(n,t,e,r,o,s){const u=e||Hh;let w;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let v;return r&&(v=async(x,E)=>{const F=await new Promise((T,I)=>{try{r(x,E,(k,A)=>T([k,A]))}catch(k){I(k)}});return await u(...F)}),new Yf(async(x,E)=>{const F={method:"POST",body:x,agent:w,headers:Object.assign({"Content-Type":"application/json"},t||{},c0)};try{let T=5,I,k=500;for(;v?I=await v(n,F):I=await u(n,F),!(I.status!==429||o===!0||(T-=1,T===0));)console.error(`Server responded with ${I.status} ${I.statusText}.  Retrying after ${k}ms delay...`),await nn(k),k*=2;const A=await I.text();I.ok?E(null,A):E(new Error(`${I.status} ${I.statusText}: ${A}`))}catch(T){T instanceof Error&&E(T)}},{})}function cl(n){return(t,e)=>new Promise((r,o)=>{n.request(t,e,(s,u)=>{if(s){o(s);return}r(u)})})}function ul(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const o=t.map(s=>n.request(s.methodName,s.args));n.request(o,(s,u)=>{if(s){r(s);return}e(u)})})}const fl=Wt(Yh),hl=Wt(Qh),ll=Wt(Jh),dl=Wt(tl),pl=Wt(el),gl=Wt(rl),ml=Wt(C()),yl=oe(W({total:C(),circulating:C(),nonCirculating:C(),nonCirculatingAccounts:et(ue)})),Wi=W({amount:j(),uiAmount:tt(C()),decimals:C(),uiAmountString:mt(j())}),wl=oe(et(W({address:ue,amount:j(),uiAmount:tt(C()),decimals:C(),uiAmountString:mt(j())}))),bl=oe(et(W({pubkey:ue,account:W({executable:Qe(),owner:ue,lamports:C(),data:Bs,rentEpoch:C()})}))),Vi=W({program:j(),parsed:Pn(),space:C()}),vl=oe(et(W({pubkey:ue,account:W({executable:Qe(),owner:ue,lamports:C(),data:Vi,rentEpoch:C()})}))),xl=oe(et(W({lamports:C(),address:ue}))),Ln=W({executable:Qe(),owner:ue,lamports:C(),data:Bs,rentEpoch:C()}),_l=W({pubkey:ue,account:Ln}),Ml=On(Re([xs($t),Vi]),Re([Oa,Vi]),n=>Array.isArray(n)?Z(n,Bs):n),Gi=W({executable:Qe(),owner:ue,lamports:C(),data:Ml,rentEpoch:C()}),Sl=W({pubkey:ue,account:Gi}),Bl=W({state:Re([re("active"),re("inactive"),re("activating"),re("deactivating")]),active:C(),inactive:C()}),El=Wt(et(W({signature:j(),slot:C(),err:Qr,memo:tt(j()),blockTime:mt(tt(C()))}))),kl=Wt(et(W({signature:j(),slot:C(),err:Qr,memo:tt(j()),blockTime:mt(tt(C()))}))),Al=W({subscription:C(),result:yi(Ln)}),Il=W({pubkey:ue,account:Ln}),Rl=W({subscription:C(),result:yi(Il)}),Ll=W({parent:C(),slot:C(),root:C()}),Tl=W({subscription:C(),result:Ll}),Cl=Re([W({type:Re([re("firstShredReceived"),re("completed"),re("optimisticConfirmation"),re("root")]),slot:C(),timestamp:C()}),W({type:re("createdBank"),parent:C(),slot:C(),timestamp:C()}),W({type:re("frozen"),slot:C(),timestamp:C(),stats:W({numTransactionEntries:C(),numSuccessfulTransactions:C(),numFailedTransactions:C(),maxTransactionsPerEntry:C()})}),W({type:re("dead"),slot:C(),timestamp:C(),err:j()})]),Ul=W({subscription:C(),result:Cl}),Fl=W({subscription:C(),result:yi(Re([nl,il]))}),Nl=W({subscription:C(),result:C()}),Pl=W({pubkey:j(),gossip:tt(j()),tpu:tt(j()),rpc:tt(j()),version:tt(j())}),to=W({votePubkey:j(),nodePubkey:j(),activatedStake:C(),epochVoteAccount:Qe(),epochCredits:et(_s([C(),C(),C()])),commission:C(),lastVote:C(),rootSlot:tt(C())}),Ol=Wt(W({current:et(to),delinquent:et(to)})),ql=Re([re("processed"),re("confirmed"),re("finalized")]),Dl=W({slot:C(),confirmations:tt(C()),err:Qr,confirmationStatus:mt(ql)}),Hl=oe(et(tt(Dl))),zl=Wt(C()),Da=W({accountKey:ue,writableIndexes:et(C()),readonlyIndexes:et(C())}),Es=W({signatures:et(j()),message:W({accountKeys:et(j()),header:W({numRequiredSignatures:C(),numReadonlySignedAccounts:C(),numReadonlyUnsignedAccounts:C()}),instructions:et(W({accounts:et(C()),data:j(),programIdIndex:C()})),recentBlockhash:j(),addressTableLookups:mt(et(Da))})}),Ha=W({pubkey:ue,signer:Qe(),writable:Qe(),source:mt(Re([re("transaction"),re("lookupTable")]))}),za=W({accountKeys:et(Ha),signatures:et(j())}),$a=W({parsed:Pn(),program:j(),programId:ue}),Ka=W({accounts:et(ue),data:j(),programId:ue}),$l=Re([Ka,$a]),Kl=Re([W({parsed:Pn(),program:j(),programId:j()}),W({accounts:et(j()),data:j(),programId:j()})]),Wa=On($l,Kl,n=>"accounts"in n?Z(n,Ka):Z(n,$a)),Va=W({signatures:et(j()),message:W({accountKeys:et(Ha),instructions:et(Wa),recentBlockhash:j(),addressTableLookups:mt(tt(et(Da)))})}),ii=W({accountIndex:C(),mint:j(),owner:mt(j()),uiTokenAmount:Wi}),Ga=W({writable:et(ue),readonly:et(ue)}),wi=W({err:Qr,fee:C(),innerInstructions:mt(tt(et(W({index:C(),instructions:et(W({accounts:et(C()),data:j(),programIdIndex:C()}))})))),preBalances:et(C()),postBalances:et(C()),logMessages:mt(tt(et(j()))),preTokenBalances:mt(tt(et(ii))),postTokenBalances:mt(tt(et(ii))),loadedAddresses:mt(Ga),computeUnitsConsumed:mt(C())}),ks=W({err:Qr,fee:C(),innerInstructions:mt(tt(et(W({index:C(),instructions:et(Wa)})))),preBalances:et(C()),postBalances:et(C()),logMessages:mt(tt(et(j()))),preTokenBalances:mt(tt(et(ii))),postTokenBalances:mt(tt(et(ii))),loadedAddresses:mt(Ga),computeUnitsConsumed:mt(C())}),yn=Re([re(0),re("legacy")]),tn=W({pubkey:j(),lamports:C(),postBalance:tt(C()),rewardType:tt(j()),commission:mt(tt(C()))}),Wl=Wt(tt(W({blockhash:j(),previousBlockhash:j(),parentSlot:C(),transactions:et(W({transaction:Es,meta:tt(wi),version:mt(yn)})),rewards:mt(et(tn)),blockTime:tt(C()),blockHeight:tt(C())}))),Vl=Wt(tt(W({blockhash:j(),previousBlockhash:j(),parentSlot:C(),rewards:mt(et(tn)),blockTime:tt(C()),blockHeight:tt(C())}))),Gl=Wt(tt(W({blockhash:j(),previousBlockhash:j(),parentSlot:C(),transactions:et(W({transaction:za,meta:tt(wi),version:mt(yn)})),rewards:mt(et(tn)),blockTime:tt(C()),blockHeight:tt(C())}))),jl=Wt(tt(W({blockhash:j(),previousBlockhash:j(),parentSlot:C(),transactions:et(W({transaction:Va,meta:tt(ks),version:mt(yn)})),rewards:mt(et(tn)),blockTime:tt(C()),blockHeight:tt(C())}))),Zl=Wt(tt(W({blockhash:j(),previousBlockhash:j(),parentSlot:C(),transactions:et(W({transaction:za,meta:tt(ks),version:mt(yn)})),rewards:mt(et(tn)),blockTime:tt(C()),blockHeight:tt(C())}))),Yl=Wt(tt(W({blockhash:j(),previousBlockhash:j(),parentSlot:C(),rewards:mt(et(tn)),blockTime:tt(C()),blockHeight:tt(C())}))),Xl=Wt(tt(W({blockhash:j(),previousBlockhash:j(),parentSlot:C(),transactions:et(W({transaction:Es,meta:tt(wi)})),rewards:mt(et(tn)),blockTime:tt(C())}))),eo=Wt(tt(W({blockhash:j(),previousBlockhash:j(),parentSlot:C(),signatures:et(j()),blockTime:tt(C())}))),Ui=Wt(tt(W({slot:C(),meta:tt(wi),blockTime:mt(tt(C())),transaction:Es,version:mt(yn)}))),$n=Wt(tt(W({slot:C(),transaction:Va,meta:tt(ks),blockTime:mt(tt(C())),version:mt(yn)}))),Jl=oe(W({blockhash:j(),feeCalculator:W({lamportsPerSignature:C()})})),Ql=oe(W({blockhash:j(),lastValidBlockHeight:C()})),t0=oe(Qe()),e0=W({slot:C(),numTransactions:C(),numSlots:C(),samplePeriodSecs:C()}),r0=Wt(et(e0)),n0=oe(tt(W({feeCalculator:W({lamportsPerSignature:C()})}))),i0=Wt(j()),s0=Wt(j()),o0=W({err:Qr,logs:et(j()),signature:j()}),a0=W({result:yi(o0),subscription:C()}),c0={"solana-client":"js/0.0.0-development"};class M0{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const B={};return async x=>{const{commitment:E,config:F}=te(x),T=this._buildArgs([],E,void 0,F),I=Zs(T);return B[I]=B[I]??(async()=>{try{const k=await this._rpcRequest("getBlockHeight",T),A=Z(k,Wt(C()));if("error"in A)throw new ft(A.error,"failed to get block height information");return A.result}finally{delete B[I]}})(),await B[I]}})();let r,o,s,u,w,v;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,o=e.httpHeaders,s=e.fetch,u=e.fetchMiddleware,w=e.disableRetryOnRateLimit,v=e.httpAgent),this._rpcEndpoint=jh(t),this._rpcWsEndpoint=r||Vh(t),this._rpcClient=al(t,o,s,u,w,v),this._rpcRequest=cl(this._rpcClient),this._rpcBatchRequest=ul(this._rpcClient),this._rpcWebSocket=new zh(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:o}=te(e),s=this._buildArgs([t.toBase58()],r,void 0,o),u=await this._rpcRequest("getBalance",s),w=Z(u,oe(C()));if("error"in w)throw new ft(w.error,`failed to get balance for ${t.toBase58()}`);return w.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=Z(e,Wt(tt(C())));if("error"in r)throw new ft(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=Z(t,Wt(C()));if("error"in e)throw new ft(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=Z(t,ml);if("error"in e)throw new ft(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),o=Z(r,yl);if("error"in o)throw new ft(o.error,"failed to get supply");return o.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenSupply",r),s=Z(o,oe(Wi));if("error"in s)throw new ft(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenAccountBalance",r),s=Z(o,oe(Wi));if("error"in s)throw new ft(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(t,e,r){const{commitment:o,config:s}=te(r);let u=[t.toBase58()];"mint"in e?u.push({mint:e.mint.toBase58()}):u.push({programId:e.programId.toBase58()});const w=this._buildArgs(u,o,"base64",s),v=await this._rpcRequest("getTokenAccountsByOwner",w),B=Z(v,bl);if("error"in B)throw new ft(B.error,`failed to get token accounts owned by account ${t.toBase58()}`);return B.result}async getParsedTokenAccountsByOwner(t,e,r){let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const s=this._buildArgs(o,r,"jsonParsed"),u=await this._rpcRequest("getTokenAccountsByOwner",s),w=Z(u,vl);if("error"in w)throw new ft(w.error,`failed to get token accounts owned by account ${t.toBase58()}`);return w.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],o=await this._rpcRequest("getLargestAccounts",r),s=Z(o,xl);if("error"in s)throw new ft(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenLargestAccounts",r),s=Z(o,wl);if("error"in s)throw new ft(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:o}=te(e),s=this._buildArgs([t.toBase58()],r,"base64",o),u=await this._rpcRequest("getAccountInfo",s),w=Z(u,oe(tt(Ln)));if("error"in w)throw new ft(w.error,`failed to get info about account ${t.toBase58()}`);return w.result}async getParsedAccountInfo(t,e){const{commitment:r,config:o}=te(e),s=this._buildArgs([t.toBase58()],r,"jsonParsed",o),u=await this._rpcRequest("getAccountInfo",s),w=Z(u,oe(tt(Gi)));if("error"in w)throw new ft(w.error,`failed to get info about account ${t.toBase58()}`);return w.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:o}=te(e),s=t.map(B=>B.toBase58()),u=this._buildArgs([s],r,"jsonParsed",o),w=await this._rpcRequest("getMultipleAccounts",u),v=Z(w,oe(et(tt(Gi))));if("error"in v)throw new ft(v.error,`failed to get info for accounts ${s}`);return v.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:o}=te(e),s=t.map(B=>B.toBase58()),u=this._buildArgs([s],r,"base64",o),w=await this._rpcRequest("getMultipleAccounts",u),v=Z(w,oe(et(tt(Ln))));if("error"in v)throw new ft(v.error,`failed to get info for accounts ${s}`);return v.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:o,config:s}=te(e),u=this._buildArgs([t.toBase58()],o,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),w=await this._rpcRequest("getStakeActivation",u),v=Z(w,Wt(Bl));if("error"in v)throw new ft(v.error,`failed to get Stake Activation ${t.toBase58()}`);return v.result}async getProgramAccounts(t,e){const{commitment:r,config:o}=te(e),{encoding:s,...u}=o||{},w=this._buildArgs([t.toBase58()],r,s||"base64",u),v=await this._rpcRequest("getProgramAccounts",w),B=et(_l),x=u.withContext===!0?Z(v,oe(B)):Z(v,Wt(B));if("error"in x)throw new ft(x.error,`failed to get accounts owned by program ${t.toBase58()}`);return x.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:o}=te(e),s=this._buildArgs([t.toBase58()],r,"jsonParsed",o),u=await this._rpcRequest("getProgramAccounts",s),w=Z(u,Wt(et(Sl)));if("error"in w)throw new ft(w.error,`failed to get accounts owned by program ${t.toBase58()}`);return w.result}async confirmTransaction(t,e){var s;let r;if(typeof t=="string")r=t;else{const u=t;if((s=u.abortSignal)!=null&&s.aborted)return Promise.reject(u.abortSignal.reason);r=u.signature}let o;try{o=_e.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return ce(o.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,o,s=!1;const u=new Promise((v,B)=>{try{r=this.onSignature(e,(E,F)=>{r=void 0;const T={context:F,value:E};v({__type:pr.PROCESSED,response:T})},t);const x=new Promise(E=>{r==null?E():o=this._onSubscriptionStateChange(r,F=>{F==="subscribed"&&E()})});(async()=>{if(await x,s)return;const E=await this.getSignatureStatus(e);if(s||E==null)return;const{context:F,value:T}=E;if(T!=null)if(T!=null&&T.err)B(T.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(T.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(T.confirmationStatus==="processed"||T.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,v({__type:pr.PROCESSED,response:{context:F,value:T}})}})()}catch(x){B(x)}});return{abortConfirmation:()=>{o&&(o(),o=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:u}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:o}}){let s=!1;const u=new Promise(E=>{const F=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let T=await F();if(!s){for(;T<=r;)if(await nn(1e3),s||(T=await F(),s))return;E({__type:pr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:w,confirmationPromise:v}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),B=this.getCancellationPromise(e);let x;try{const E=await Promise.race([B,v,u]);if(E.__type===pr.PROCESSED)x=E.response;else throw new Ca(o)}finally{s=!0,w()}return x}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:o,nonceValue:s,signature:u}}){let w=!1;const v=new Promise(T=>{let I=s,k=null;const A=async()=>{try{const{context:O,value:$}=await this.getNonceAndContext(o,{commitment:t,minContextSlot:r});return k=O.slot,$==null?void 0:$.nonce}catch{return I}};(async()=>{if(I=await A(),!w)for(;;){if(s!==I){T({__type:pr.NONCE_INVALID,slotInWhichNonceDidAdvance:k});return}if(await nn(2e3),w||(I=await A(),w))return}})()}),{abortConfirmation:B,confirmationPromise:x}=this.getTransactionConfirmationPromise({commitment:t,signature:u}),E=this.getCancellationPromise(e);let F;try{const T=await Promise.race([E,x,v]);if(T.__type===pr.PROCESSED)F=T.response;else{let I;for(;;){const k=await this.getSignatureStatus(u);if(k==null)break;if(k.context.slot<(T.slotInWhichNonceDidAdvance??r)){await nn(400);continue}I=k;break}if(I!=null&&I.value){const k=t||"finalized",{confirmationStatus:A}=I.value;switch(k){case"processed":case"recent":if(A!=="processed"&&A!=="confirmed"&&A!=="finalized")throw new kn(u);break;case"confirmed":case"single":case"singleGossip":if(A!=="confirmed"&&A!=="finalized")throw new kn(u);break;case"finalized":case"max":case"root":if(A!=="finalized")throw new kn(u);break;default:}F={context:I.context,value:{err:I.value.err}}}else throw new kn(u)}}finally{w=!0,B()}return F}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const o=new Promise(v=>{let B=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{B=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>v({__type:pr.TIMED_OUT,timeoutMs:B}),B)}),{abortConfirmation:s,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let w;try{const v=await Promise.race([u,o]);if(v.__type===pr.PROCESSED)w=v.response;else throw new Ua(e,v.timeoutMs/1e3)}finally{clearTimeout(r),s()}return w}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=Z(t,Wt(et(Pl)));if("error"in e)throw new ft(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),o=Z(r,Ol);if("error"in o)throw new ft(o.error,"failed to get vote accounts");return o.result}async getSlot(t){const{commitment:e,config:r}=te(t),o=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getSlot",o),u=Z(s,Wt(C()));if("error"in u)throw new ft(u.error,"failed to get slot");return u.result}async getSlotLeader(t){const{commitment:e,config:r}=te(t),o=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getSlotLeader",o),u=Z(s,Wt(j()));if("error"in u)throw new ft(u.error,"failed to get slot leader");return u.result}async getSlotLeaders(t,e){const r=[t,e],o=await this._rpcRequest("getSlotLeaders",r),s=Z(o,Wt(et(ue)));if("error"in s)throw new ft(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(t,e){const{context:r,value:o}=await this.getSignatureStatuses([t],e);ce(o.length===1);const s=o[0];return{context:r,value:s}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const o=await this._rpcRequest("getSignatureStatuses",r),s=Z(o,Hl);if("error"in s)throw new ft(s.error,"failed to get signature status");return s.result}async getTransactionCount(t){const{commitment:e,config:r}=te(t),o=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getTransactionCount",o),u=Z(s,Wt(C()));if("error"in u)throw new ft(u.error,"failed to get transaction count");return u.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),o=Z(r,fl);if("error"in o)throw new ft(o.error,"failed to get inflation");return o.result}async getInflationReward(t,e,r){const{commitment:o,config:s}=te(r),u=this._buildArgs([t.map(B=>B.toBase58())],o,void 0,{...s,epoch:e??(s==null?void 0:s.epoch)}),w=await this._rpcRequest("getInflationReward",u),v=Z(w,Xh);if("error"in v)throw new ft(v.error,"failed to get inflation reward");return v.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=Z(t,hl);if("error"in e)throw new ft(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=te(t),o=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getEpochInfo",o),u=Z(s,dl);if("error"in u)throw new ft(u.error,"failed to get epoch info");return u.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=Z(t,pl);if("error"in e)throw new ft(e.error,"failed to get epoch schedule");const r=e.result;return new Dh(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=Z(t,gl);if("error"in e)throw new ft(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),o=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=Z(o,zl);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),o=Z(r,Jl);if("error"in o)throw new ft(o.error,"failed to get recent blockhash");return o.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=Z(e,r0);if("error"in r)throw new ft(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),o=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=Z(o,n0);if("error"in s)throw new ft(s.error,"failed to get fee calculator");const{context:u,value:w}=s.result;return{context:u,value:w!==null?w.feeCalculator:null}}async getFeeForMessage(t,e){const r=ve(t.serialize()).toString("base64"),o=this._buildArgs([r],e),s=await this._rpcRequest("getFeeForMessage",o),u=Z(s,oe(tt(C())));if("error"in u)throw new ft(u.error,"failed to get fee for message");if(u.result===null)throw new Error("invalid blockhash");return u.result}async getRecentPrioritizationFees(t){var u;const e=(u=t==null?void 0:t.lockedWritableAccounts)==null?void 0:u.map(w=>w.toBase58()),r=e!=null&&e.length?[e]:[],o=await this._rpcRequest("getRecentPrioritizationFees",r),s=Z(o,ll);if("error"in s)throw new ft(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=te(t),o=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getLatestBlockhash",o),u=Z(s,Ql);if("error"in u)throw new ft(u.error,"failed to get latest blockhash");return u.result}async isBlockhashValid(t,e){const{commitment:r,config:o}=te(e),s=this._buildArgs([t],r,void 0,o),u=await this._rpcRequest("isBlockhashValid",s),w=Z(u,t0);if("error"in w)throw new ft(w.error,"failed to determine if the blockhash `"+t+"`is valid");return w.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=Z(t,Wt(sl));if("error"in e)throw new ft(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=Z(t,Wt(j()));if("error"in e)throw new ft(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:o}=te(e),s=this._buildArgsAtLeastConfirmed([t],r,void 0,o),u=await this._rpcRequest("getBlock",s);try{switch(o==null?void 0:o.transactionDetails){case"accounts":{const w=Z(u,Gl);if("error"in w)throw w.error;return w.result}case"none":{const w=Z(u,Vl);if("error"in w)throw w.error;return w.result}default:{const w=Z(u,Wl);if("error"in w)throw w.error;const{result:v}=w;return v?{...v,transactions:v.transactions.map(({transaction:B,meta:x,version:E})=>({meta:x,transaction:{...B,message:Ci(E,B.message)},version:E}))}:null}}}catch(w){throw new ft(w,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:o}=te(e),s=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",o),u=await this._rpcRequest("getBlock",s);try{switch(o==null?void 0:o.transactionDetails){case"accounts":{const w=Z(u,Zl);if("error"in w)throw w.error;return w.result}case"none":{const w=Z(u,Yl);if("error"in w)throw w.error;return w.result}default:{const w=Z(u,jl);if("error"in w)throw w.error;return w.result}}}catch(w){throw new ft(w,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:w,...v}=t;r=w,e=v}const o=this._buildArgs([],r,"base64",e),s=await this._rpcRequest("getBlockProduction",o),u=Z(s,ol);if("error"in u)throw new ft(u.error,"failed to get block production information");return u.result}async getTransaction(t,e){const{commitment:r,config:o}=te(e),s=this._buildArgsAtLeastConfirmed([t],r,void 0,o),u=await this._rpcRequest("getTransaction",s),w=Z(u,Ui);if("error"in w)throw new ft(w.error,"failed to get transaction");const v=w.result;return v&&{...v,transaction:{...v.transaction,message:Ci(v.version,v.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:o}=te(e),s=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",o),u=await this._rpcRequest("getTransaction",s),w=Z(u,$n);if("error"in w)throw new ft(w.error,"failed to get transaction");return w.result}async getParsedTransactions(t,e){const{commitment:r,config:o}=te(e),s=t.map(v=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([v],r,"jsonParsed",o)}));return(await this._rpcBatchRequest(s)).map(v=>{const B=Z(v,$n);if("error"in B)throw new ft(B.error,"failed to get transactions");return B.result})}async getTransactions(t,e){const{commitment:r,config:o}=te(e),s=t.map(v=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([v],r,void 0,o)}));return(await this._rpcBatchRequest(s)).map(v=>{const B=Z(v,Ui);if("error"in B)throw new ft(B.error,"failed to get transactions");const x=B.result;return x&&{...x,transaction:{...x.transaction,message:Ci(x.version,x.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),o=await this._rpcRequest("getConfirmedBlock",r),s=Z(o,Xl);if("error"in s)throw new ft(s.error,"failed to get confirmed block");const u=s.result;if(!u)throw new Error("Confirmed block "+t+" not found");const w={...u,transactions:u.transactions.map(({transaction:v,meta:B})=>{const x=new xr(v.message);return{meta:B,transaction:{...v,message:x}}})};return{...w,transactions:w.transactions.map(({transaction:v,meta:B})=>({meta:B,transaction:cr.populate(v.message,v.signatures)}))}}async getBlocks(t,e,r){const o=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),s=await this._rpcRequest("getBlocks",o),u=Z(s,Wt(et(C())));if("error"in u)throw new ft(u.error,"failed to get blocks");return u.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),o=await this._rpcRequest("getBlock",r),s=Z(o,eo);if("error"in s)throw new ft(s.error,"failed to get block");const u=s.result;if(!u)throw new Error("Block "+t+" not found");return u}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),o=await this._rpcRequest("getConfirmedBlock",r),s=Z(o,eo);if("error"in s)throw new ft(s.error,"failed to get confirmed block");const u=s.result;if(!u)throw new Error("Confirmed block "+t+" not found");return u}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),o=await this._rpcRequest("getConfirmedTransaction",r),s=Z(o,Ui);if("error"in s)throw new ft(s.error,"failed to get transaction");const u=s.result;if(!u)return u;const w=new xr(u.transaction.message),v=u.transaction.signatures;return{...u,transaction:cr.populate(w,v)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),o=await this._rpcRequest("getConfirmedTransaction",r),s=Z(o,$n);if("error"in s)throw new ft(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(t,e){const r=t.map(u=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([u],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(u=>{const w=Z(u,$n);if("error"in w)throw new ft(w.error,"failed to get confirmed transactions");return w.result})}async getConfirmedSignaturesForAddress(t,e,r){let o={},s=await this.getFirstAvailableBlock();for(;!("until"in o)&&(e--,!(e<=0||e<s));)try{const v=await this.getConfirmedBlockSignatures(e,"finalized");v.signatures.length>0&&(o.until=v.signatures[v.signatures.length-1].toString())}catch(v){if(v instanceof Error&&v.message.includes("skipped"))continue;throw v}let u=await this.getSlot("finalized");for(;!("before"in o)&&(r++,!(r>u));)try{const v=await this.getConfirmedBlockSignatures(r);v.signatures.length>0&&(o.before=v.signatures[v.signatures.length-1].toString())}catch(v){if(v instanceof Error&&v.message.includes("skipped"))continue;throw v}return(await this.getConfirmedSignaturesForAddress2(t,o)).map(v=>v.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const o=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",o),u=Z(s,El);if("error"in u)throw new ft(u.error,"failed to get confirmed signatures for address");return u.result}async getSignaturesForAddress(t,e,r){const o=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),s=await this._rpcRequest("getSignaturesForAddress",o),u=Z(s,kl);if("error"in u)throw new ft(u.error,"failed to get signatures for address");return u.result}async getAddressLookupTable(t,e){const{context:r,value:o}=await this.getAccountInfoAndContext(t,e);let s=null;return o!==null&&(s=new Js({key:t,state:Js.deserialize(o.data)})),{context:r,value:s}}async getNonceAndContext(t,e){const{context:r,value:o}=await this.getAccountInfoAndContext(t,e);let s=null;return o!==null&&(s=Ss.fromAccountData(o.data)),{context:r,value:s}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),o=Z(r,i0);if("error"in o)throw new ft(o.error,`airdrop to ${t.toBase58()} failed`);return o.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await nn(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Gh;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let o=0;o<50;o++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await nn(Lh/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=te(t),o=this._buildArgs([],e,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",o),u=Z(s,oe(C()));if("error"in u)throw new ft(u.error,"failed to get stake minimum delegation");return u.result}async simulateTransaction(t,e,r){if("message"in t){const k=t.serialize(),A=$t.from(k).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const O=e||{};O.encoding="base64","commitment"in O||(O.commitment=this.commitment);const $=[A,O],H=await this._rpcRequest("simulateTransaction",$),Y=Z(H,Qs);if("error"in Y)throw new Error("failed to simulate transaction: "+Y.error.message);return Y.result}let o;if(t instanceof cr){let I=t;o=new cr,o.feePayer=I.feePayer,o.instructions=t.instructions,o.nonceInfo=I.nonceInfo,o.signatures=I.signatures}else o=cr.populate(t),o._message=o._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(o.nonceInfo&&s)o.sign(...s);else{let I=this._disableBlockhashCaching;for(;;){const k=await this._blockhashWithExpiryBlockHeight(I);if(o.lastValidBlockHeight=k.lastValidBlockHeight,o.recentBlockhash=k.blockhash,!s)break;if(o.sign(...s),!o.signature)throw new Error("!signature");const A=o.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(A)&&!this._blockhashInfo.transactionSignatures.includes(A)){this._blockhashInfo.simulatedSignatures.push(A);break}else I=!0}}const u=o._compile(),w=u.serialize(),B=o._serialize(w).toString("base64"),x={encoding:"base64",commitment:this.commitment};if(r){const I=(Array.isArray(r)?r:u.nonProgramIds()).map(k=>k.toBase58());x.accounts={encoding:"base64",addresses:I}}s&&(x.sigVerify=!0);const E=[B,x],F=await this._rpcRequest("simulateTransaction",E),T=Z(F,Qs);if("error"in T){let I;if("data"in T.error&&(I=T.error.data.logs,I&&Array.isArray(I))){const k=`
    `,A=k+I.join(k);console.error(T.error.message,A)}throw new Ys("failed to simulate transaction: "+T.error.message,I)}return T.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const u=t.serialize();return await this.sendRawTransaction(u,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const o=e;if(t.nonceInfo)t.sign(...o);else{let u=this._disableBlockhashCaching;for(;;){const w=await this._blockhashWithExpiryBlockHeight(u);if(t.lastValidBlockHeight=w.lastValidBlockHeight,t.recentBlockhash=w.blockhash,t.sign(...o),!t.signature)throw new Error("!signature");const v=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(v))u=!0;else{this._blockhashInfo.transactionSignatures.push(v);break}}}const s=t.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(t,e){const r=ve(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},o=e&&e.skipPreflight,s=o===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),o&&(r.skipPreflight=o),s&&(r.preflightCommitment=s);const u=[t,r],w=await this._rpcRequest("sendTransaction",u),v=Z(w,s0);if("error"in v){let B;throw"data"in v.error&&(B=v.error.data.logs),new Ys("failed to send transaction: "+v.error.message,B)}return v.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var o;const r=(o=this._subscriptionsByHash[t])==null?void 0:o.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(u=>{try{u(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var s;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const o=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return o.add(e),()=>{o.delete(e),o.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const o=this._subscriptionsByHash[r];if(o!==void 0)switch(o.state){case"pending":case"unsubscribed":if(o.callbacks.size===0){delete this._subscriptionsByHash[r],o.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[o.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:u}=o;try{this._setSubscription(r,{...o,state:"subscribing"});const w=await this._rpcWebSocket.call(u,s);this._setSubscription(r,{...o,serverSubscriptionId:w,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[w]=o.callbacks,await this._updateSubscriptions()}catch(w){if(w instanceof Error&&console.error(`${u} error for argument`,s,w.message),!e())return;this._setSubscription(r,{...o,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":o.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:u}=o;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...o,state:"unsubscribing"}),this._setSubscription(r,{...o,state:"unsubscribing"});try{await this._rpcWebSocket.call(u,[s])}catch(w){if(w instanceof Error&&console.error(`${u} error:`,w.message),!e())return;this._setSubscription(r,{...o,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...o,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(o=>{try{o(...e)}catch(s){console.error(s)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=Z(t,Al);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,o=Zs([t.method,e]),s=this._subscriptionsByHash[o];return s===void 0?this._subscriptionsByHash[o]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:s.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=o,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const u=this._subscriptionsByHash[o];ce(u!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),u.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const o=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=Z(t,Rl);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,o){const s=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",o?{filters:o}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const o=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},o)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=Z(t,a0);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=Z(t,Tl);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=Z(t,Ul);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,o){const s=e||this._commitment;if(s||r||o){let u={};r&&(u.encoding=r),s&&(u.commitment=s),o&&(u=Object.assign(u,o)),t.push(u)}return t}_buildArgsAtLeastConfirmed(t,e,r,o){const s=e||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,o)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=Z(t,Fl);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const o=this._buildArgs([t],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(u,w)=>{if(u.type==="status"){e(u.result,w);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return s}onSignatureWithOptions(t,e,r){const{commitment:o,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},u=this._buildArgs([t],o,void 0,s),w=this._makeSubscription({callback:(v,B)=>{e(v,B);try{this.removeSignatureListener(w)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},u);return w}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=Z(t,Nl);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Vn{constructor(t){this._keypair=void 0,this._keypair=t??Ks()}static generate(){return new Vn(Ks())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const o=t.slice(0,32),s=Ki(o);for(let u=0;u<32;u++)if(r[u]!==s[u])throw new Error("provided secretKey is invalid")}return new Vn({publicKey:r,secretKey:t})}static fromSeed(t){const e=Ki(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Vn({publicKey:e,secretKey:r})}get publicKey(){return new yt(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:ut([lt("instruction"),ln("recentSlot"),Zt("bumpSeed")])},FreezeLookupTable:{index:1,layout:ut([lt("instruction")])},ExtendLookupTable:{index:2,layout:ut([lt("instruction"),ln(),Ae(Vt(),Vr(lt(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ut([lt("instruction")])},CloseLookupTable:{index:4,layout:ut([lt("instruction")])}});new yt("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:ut([Zt("instruction"),lt("units"),lt("additionalFee")])},RequestHeapFrame:{index:1,layout:ut([Zt("instruction"),lt("bytes")])},SetComputeUnitLimit:{index:2,layout:ut([Zt("instruction"),lt("units")])},SetComputeUnitPrice:{index:3,layout:ut([Zt("instruction"),ln("microLamports")])}});new yt("ComputeBudget111111111111111111111111111111");ut([Zt("numSignatures"),Zt("padding"),Oe("signatureOffset"),Oe("signatureInstructionIndex"),Oe("publicKeyOffset"),Oe("publicKeyInstructionIndex"),Oe("messageDataOffset"),Oe("messageDataSize"),Oe("messageInstructionIndex")]);new yt("Ed25519SigVerify111111111111111111111111111");Ms.utils.isValidPrivateKey;Ms.getPublicKey;ut([Zt("numSignatures"),Oe("signatureOffset"),Zt("signatureInstructionIndex"),Oe("ethAddressOffset"),Zt("ethAddressInstructionIndex"),Oe("messageDataOffset"),Oe("messageDataSize"),Zt("messageInstructionIndex"),se(20,"ethAddress"),se(64,"signature"),Zt("recoveryId")]);new yt("KeccakSecp256k11111111111111111111111111111");var ja;new yt("StakeConfig11111111111111111111111111111111");class Za{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}ja=Za;Za.default=new ja(0,0,yt.default);Object.freeze({Initialize:{index:0,layout:ut([lt("instruction"),Mh(),Sh()])},Authorize:{index:1,layout:ut([lt("instruction"),Vt("newAuthorized"),lt("stakeAuthorizationType")])},Delegate:{index:2,layout:ut([lt("instruction")])},Split:{index:3,layout:ut([lt("instruction"),Te("lamports")])},Withdraw:{index:4,layout:ut([lt("instruction"),Te("lamports")])},Deactivate:{index:5,layout:ut([lt("instruction")])},Merge:{index:7,layout:ut([lt("instruction")])},AuthorizeWithSeed:{index:8,layout:ut([lt("instruction"),Vt("newAuthorized"),lt("stakeAuthorizationType"),sn("authoritySeed"),Vt("authorityOwner")])}});new yt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ut([lt("instruction"),Bh()])},Authorize:{index:1,layout:ut([lt("instruction"),Vt("newAuthorized"),lt("voteAuthorizationType")])},Withdraw:{index:3,layout:ut([lt("instruction"),Te("lamports")])},UpdateValidatorIdentity:{index:4,layout:ut([lt("instruction")])},AuthorizeWithSeed:{index:10,layout:ut([lt("instruction"),Eh()])}});new yt("Vote111111111111111111111111111111111111111");new yt("Va1idator1nfo111111111111111111111111111111");W({name:j(),website:mt(j()),details:mt(j()),keybaseUsername:mt(j())});new yt("Vote111111111111111111111111111111111111111");ut([Vt("nodePubkey"),Vt("authorizedWithdrawer"),Zt("commission"),be(),Ae(ut([be("slot"),lt("confirmationCount")]),Vr(lt(),-8),"votes"),Zt("rootSlotValid"),be("rootSlot"),be(),Ae(ut([be("epoch"),Vt("authorizedVoter")]),Vr(lt(),-8),"authorizedVoters"),ut([Ae(ut([Vt("authorizedPubkey"),be("epochOfLastAuthorizedSwitch"),be("targetEpoch")]),32,"buf"),be("idx"),Zt("isEmpty")],"priorVoters"),be(),Ae(ut([be("epoch"),be("credits"),be("prevCredits")]),Vr(lt(),-8),"epochCredits"),ut([be("slot"),be("timestamp")],"lastTimestamp")]);const S0=1e9;export{ae as B,M0 as C,Vn as K,S0 as L,yt as P,ni as S,cr as T,ge as _,rc as a,w0 as b,vr as c,Ve as d,d0 as e,_0 as f,Xi as g,g0 as p,l0 as s,Je as t,p0 as u};
